<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:context="http://www.springframework.org/schema/context" xmlns:util="http://www.springframework.org/schema/util"
		xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.3.xsd">

		<!-- This is used for tests, config.xml is used in production -->

		<!-- 
		  Just leave this here. It means some components are got from the Java source files, by means of
		  Spring annotations. You do need this base (which the declaration below extend/override). 
		-->
    <context:component-scan base-package = "uk.ac.rothamsted.knetminer.backend" />
    
    <bean name = "configDirPath" class = "java.lang.String">
    	<constructor-arg value = "${knetminer.configDir}/neo4j" />
    </bean> 
    
		<!-- 
			This is one of the many ways to read query definitions from files. 
			All *.cypher files are read using our IOUtils. 
		-->
		<bean name = "semanticMotifsQueries" class = "java.util.Arrays" factory-method = "asList" >
			<constructor-arg>
				<bean class = "uk.ac.ebi.utils.io.IOUtils" factory-method = "readFiles">
					<constructor-arg ref = "configDirPath" />
					<constructor-arg>
						<bean class = "org.apache.commons.io.filefilter.WildcardFileFilter">
							<constructor-arg value = "*.cypher" />
						</bean>
					</constructor-arg>
				</bean>
			</constructor-arg>
		</bean>
		
		
		<!--
			This is another possible initialisation pattern.
			Apache IOUtils are used to read file contents into strings. 
		-->		
		<!-- util:list id = "semanticMotifsQueries" value-type = "java.lang.String">
			<bean class = "org.apache.commons.io.IOUtils" factory-method = "toString">
				<constructor-arg 
					value = "classpath:test-config/simple-protein-publication.cypher"
					type = "java.io.Reader" 
				/>
			</bean>
			<bean class = "org.apache.commons.io.IOUtils" factory-method = "toString">
				<constructor-arg 
					value = "classpath:test-config/simple-gene-occurrence.cypher"
					type = "java.io.Reader" 
				/>
			</bean>
		</util:list -->
        
		<bean id = "neoDriver" class = "org.neo4j.driver.v1.GraphDatabase" factory-method="driver">
			<constructor-arg value = "${neo4j.server.boltUrl}" />
			<constructor-arg>
				<bean class = "org.neo4j.driver.v1.AuthTokens" factory-method = "basic">
					<constructor-arg value = "neo4j" />
					<constructor-arg value = "test" />
				</bean>
			</constructor-arg>
		</bean>    
</beans>