!function(t){"use strict";t.fn.maskLoader=function(e){var n=t.extend({fade:!0,"z-index":"999",background:"black",opacity:"0.6",position:"absolute",imgLoader:!1,autoCreate:!0,textAlert:!1},e),i=t(this),r=n.fade,o=n.imgLoader,a=n.autoCreate;delete n.fade,delete n.imgLoader,delete n.autoCreate;var s="";s=r?"hide-loader":"show-loader";var l=t('<div class="mask-loader '+s+'"></div>'),u=t('<div class="mask-loader img '+s+'"></div>'),c=t();if(n.textAlert)var c=t('<div class="mask-loader text-alert '+s+'"><div class="textalert">'+n.textAlert+"</div></div>");l.css(n),"BODY"==i[0].tagName?(l.css({position:"fixed",width:"100%",height:"100%",left:"0",top:"0"}),u.css({position:"fixed"}),c.css({position:"fixed"})):(l.css({width:i.width()-2,height:i.height()-2}),u.css({position:"absolute"}),c.css({position:"absolute"})),u.css({"z-index":parseInt(l.css("z-index")+5),width:l.css("width"),height:l.css("height")}),c.css({"z-index":parseInt(l.css("z-index")+5),width:l.css("width"),height:l.css("height")}),o&&u.css({background:"url("+o+") center center no-repeat"});var h={create:function(){i.each(function(){t(this).prepend(c.clone()),t(this).prepend(u.clone()),t(this).prepend(l.clone()),r&&t(this).find(".mask-loader").fadeIn("slow")})},destroy:function(){i.each(function(){r?t(this).find(".mask-loader").fadeOut("slow",function(){t(this).remove()}):t(this).find(".mask-loader").remove()})}};return a&&h.create(),h};var e={};t(document).ajaxSend(function(n,i,r){if(null!=r.maskLoaderSettings){if(!r.maskLoaderSettings.hasOwnProperty("element"))throw'MaskLoader: element not defined. Ex: maskLoaderSettings:{"element":"#id .class"}';var o=r.maskLoaderSettings.element;if(delete r.maskLoaderSettings.element,e.element=o,"object"!=t.type(o)&&"string"==t.type(o)&&(e.element=t(o)),!e.element.length)throw"MaskLoader: Element not exists.";e.maskLoader=e.element.maskLoader(r.maskLoaderSettings)}}),t(document).ajaxError(function(t,n,i,r){e.hasOwnProperty("element")&&e.maskLoader.destroy()}),t(document).ajaxComplete(function(t,n,i){e.hasOwnProperty("element")&&e.maskLoader.destroy()}),t(document).ajaxStop(function(){e.hasOwnProperty("element")&&e.maskLoader.destroy()})}(jQuery),function(t,e,n){!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.qtip&&t(jQuery)}(function(i){"use strict";function r(t,e,n,r){this.id=n,this.target=t,this.tooltip=k,this.elements={target:t},this._id=G+"-"+n,this.timers={img:{}},this.options=e,this.plugins={},this.cache={event:{},target:i(),disabled:P,attr:r,onTooltip:P,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=P}function o(t){return t===k||"object"!==i.type(t)}function a(t){return!(i.isFunction(t)||t&&t.attr||t.length||"object"===i.type(t)&&(t.jquery||t.then))}function s(t){var e,n,r,s;return o(t)?P:(o(t.metadata)&&(t.metadata={type:t.metadata}),"content"in t&&(e=t.content,o(e)||e.jquery||e.done?e=t.content={text:n=a(e)?P:e}:n=e.text,"ajax"in e&&(r=e.ajax,s=r&&r.once!==P,delete e.ajax,e.text=function(t,e){var o=n||i(this).attr(e.options.content.attr)||"Loading...",a=i.ajax(i.extend({},r,{context:e})).then(r.success,k,r.error).then(function(t){return t&&s&&e.set("content.text",t),t},function(t,n,i){e.destroyed||0===t.status||e.set("content.text",n+": "+i)});return s?o:(e.set("content.text",o),a)}),"title"in e&&(o(e.title)||(e.button=e.title.button,e.title=e.title.text),a(e.title||P)&&(e.title=P))),"position"in t&&o(t.position)&&(t.position={my:t.position,at:t.position}),"show"in t&&o(t.show)&&(t.show=t.show.jquery?{target:t.show}:t.show===M?{ready:M}:{event:t.show}),"hide"in t&&o(t.hide)&&(t.hide=t.hide.jquery?{target:t.hide}:{event:t.hide}),"style"in t&&o(t.style)&&(t.style={classes:t.style}),i.each(V,function(){this.sanitize&&this.sanitize(t)}),t)}function l(t,e){for(var n,i=0,r=t,o=e.split(".");r=r[o[i++]];)o.length>i&&(n=r);return[n||t,o.pop()]}function u(t,e){var n,i,r;for(n in this.checks)for(i in this.checks[n])(r=RegExp(i,"i").exec(t))&&(e.push(r),("builtin"===n||this.plugins[n])&&this.checks[n][i].apply(this.plugins[n]||this,e))}function c(t){return H.concat("").join(t?"-"+t+" ":" ")}function h(n){return n&&{type:n.type,pageX:n.pageX,pageY:n.pageY,target:n.target,relatedTarget:n.relatedTarget,scrollX:n.scrollX||t.pageXOffset||e.body.scrollLeft||e.documentElement.scrollLeft,scrollY:n.scrollY||t.pageYOffset||e.body.scrollTop||e.documentElement.scrollTop}||{}}function d(t,e){return e>0?setTimeout(i.proxy(t,this),e):(t.call(this),n)}function p(t){return this.tooltip.hasClass(et)?P:(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=d.call(this,function(){this.toggle(M,t)},this.options.show.delay),n)}function f(t){if(this.tooltip.hasClass(et))return P;var e=i(t.relatedTarget),n=e.closest($)[0]===this.tooltip[0],r=e[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==e[0]&&"mouse"===this.options.position.target&&n||this.options.hide.fixed&&/mouse(out|leave|move)/.test(t.type)&&(n||r))try{t.preventDefault(),t.stopImmediatePropagation()}catch(o){}else this.timers.hide=d.call(this,function(){this.toggle(P,t)},this.options.hide.delay,this)}function g(t){return this.tooltip.hasClass(et)||!this.options.hide.inactive?P:(clearTimeout(this.timers.inactive),this.timers.inactive=d.call(this,function(){this.hide(t)},this.options.hide.inactive),n)}function v(t){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(t)}function y(t,n,r){i(e.body).delegate(t,(n.split?n:n.join(lt+" "))+lt,function(){var t=D.api[i.attr(this,W)];t&&!t.disabled&&r.apply(t,arguments)})}function m(t,n,o){var a,l,u,c,h,d=i(e.body),p=t[0]===e?d:t,f=t.metadata?t.metadata(o.metadata):k,g="html5"===o.metadata.type&&f?f[o.metadata.name]:k,v=t.data(o.metadata.name||"qtipopts");try{v="string"==typeof v?i.parseJSON(v):v}catch(y){}if(c=i.extend(M,{},D.defaults,o,"object"==typeof v?s(v):k,s(g||f)),l=c.position,c.id=n,"boolean"==typeof c.content.text){if(u=t.attr(c.content.attr),c.content.attr===P||!u)return P;c.content.text=u}if(l.container.length||(l.container=d),l.target===P&&(l.target=p),c.show.target===P&&(c.show.target=p),c.show.solo===M&&(c.show.solo=l.container.closest("body")),c.hide.target===P&&(c.hide.target=p),c.position.viewport===M&&(c.position.viewport=l.container),l.container=l.container.eq(0),l.at=new N(l.at,M),l.my=new N(l.my),t.data(G))if(c.overwrite)t.qtip("destroy",!0);else if(c.overwrite===P)return P;return t.attr(U,n),c.suppress&&(h=t.attr("title"))&&t.removeAttr("title").attr(it,h).attr("title",""),a=new r(t,c,n,(!!u)),t.data(G,a),t.one("remove.qtip-"+n+" removeqtip.qtip-"+n,function(){var t;(t=i(this).data(G))&&t.destroy(!0)}),a}function x(t){return t.charAt(0).toUpperCase()+t.slice(1)}function b(t,e){var i,r,o=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+xt.join(o+" ")+o).split(" "),s=0;if(mt[e])return t.css(mt[e]);for(;i=a[s++];)if((r=t.css(i))!==n)return mt[e]=i,r}function w(t,e){return Math.ceil(parseFloat(b(t,e)))}function _(t,e){this._ns="tip",this.options=e,this.offset=e.offset,this.size=[e.width,e.height],this.init(this.qtip=t)}function E(t,e){this.options=e,this._ns="-modal",this.init(this.qtip=t)}function T(t){this._ns="ie6",this.init(this.qtip=t)}var D,S,N,C,L,M=!0,P=!1,k=null,I="x",O="y",A="width",R="height",B="top",F="left",z="bottom",q="right",j="center",X="flipinvert",Y="shift",V={},G="qtip",U="data-hasqtip",W="data-qtip-id",H=["ui-widget","ui-tooltip"],$="."+G,Z="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),K=G+"-fixed",Q=G+"-default",J=G+"-focus",tt=G+"-hover",et=G+"-disabled",nt="_replacedByqTip",it="oldtitle",rt={ie:function(){for(var t=3,n=e.createElement("div");(n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&n.getElementsByTagName("i")[0];);return t>4?t:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||P};S=r.prototype,S._when=function(t){return i.when.apply(i,t)},S.render=function(t){if(this.rendered||this.destroyed)return this;var e,n=this,r=this.options,o=this.cache,a=this.elements,s=r.content.text,l=r.content.title,u=r.content.button,c=r.position,h=("."+this._id+" ",[]);return i.attr(this.target[0],"aria-describedby",this._id),this.tooltip=a.tooltip=e=i("<div/>",{id:this._id,"class":[G,Q,r.style.classes,G+"-pos-"+r.position.my.abbrev()].join(" "),width:r.style.width||"",height:r.style.height||"",tracking:"mouse"===c.target&&c.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":P,"aria-describedby":this._id+"-content","aria-hidden":M}).toggleClass(et,this.disabled).attr(W,this.id).data(G,this).appendTo(c.container).append(a.content=i("<div />",{"class":G+"-content",id:this._id+"-content","aria-atomic":M})),this.rendered=-1,this.positioning=M,l&&(this._createTitle(),i.isFunction(l)||h.push(this._updateTitle(l,P))),u&&this._createButton(),i.isFunction(s)||h.push(this._updateContent(s,P)),this.rendered=M,this._setWidget(),i.each(V,function(t){var e;"render"===this.initialize&&(e=this(n))&&(n.plugins[t]=e)}),this._unassignEvents(),this._assignEvents(),this._when(h).then(function(){n._trigger("render"),n.positioning=P,n.hiddenDuringWait||!r.show.ready&&!t||n.toggle(M,o.event,P),n.hiddenDuringWait=P}),D.api[this.id]=this,this},S.destroy=function(t){function e(){if(!this.destroyed){this.destroyed=M;var t=this.target,e=t.attr(it);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),i.each(this.plugins,function(){this.destroy&&this.destroy()}),clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this._unassignEvents(),t.removeData(G).removeAttr(W).removeAttr(U).removeAttr("aria-describedby"),this.options.suppress&&e&&t.attr("title",e).removeAttr(it),this._unbind(t),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=k,delete D.api[this.id]}}return this.destroyed?this.target:(t===M&&"hide"!==this.triggering||!this.rendered?e.call(this):(this.tooltip.one("tooltiphidden",i.proxy(e,this)),!this.triggering&&this.hide()),this.target)},C=S.checks={builtin:{"^id$":function(t,e,n,r){var o=n===M?D.nextid:n,a=G+"-"+o;o!==P&&o.length>0&&!i("#"+a).length?(this._id=a,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):t[e]=r},"^prerender":function(t,e,n){n&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(t,e,n){this._updateContent(n)},"^content.attr$":function(t,e,n,i){this.options.content.text===this.target.attr(i)&&this._updateContent(this.target.attr(n))},"^content.title$":function(t,e,i){return i?(i&&!this.elements.title&&this._createTitle(),this._updateTitle(i),n):this._removeTitle()},"^content.button$":function(t,e,n){this._updateButton(n)},"^content.title.(text|button)$":function(t,e,n){this.set("content."+e,n)},"^position.(my|at)$":function(t,e,n){"string"==typeof n&&(t[e]=new N(n,"at"===e))},"^position.container$":function(t,e,n){this.rendered&&this.tooltip.appendTo(n)},"^show.ready$":function(t,e,n){n&&(!this.rendered&&this.render(M)||this.toggle(M))},"^style.classes$":function(t,e,n,i){this.rendered&&this.tooltip.removeClass(i).addClass(n)},"^style.(width|height)":function(t,e,n){this.rendered&&this.tooltip.css(e,n)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(t,e,n){this.rendered&&this.tooltip.toggleClass(Q,!!n)},"^events.(render|show|move|hide|focus|blur)$":function(t,e,n){this.rendered&&this.tooltip[(i.isFunction(n)?"":"un")+"bind"]("tooltip"+e,n)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var t=this.options.position;this.tooltip.attr("tracking","mouse"===t.target&&t.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},S.get=function(t){if(this.destroyed)return this;var e=l(this.options,t.toLowerCase()),n=e[0][e[1]];return n.precedance?n.string():n};var ot=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,at=/^prerender|show\.ready/i;S.set=function(t,e){if(this.destroyed)return this;var r,o=this.rendered,a=P,c=this.options;return this.checks,"string"==typeof t?(r=t,t={},t[r]=e):t=i.extend({},t),i.each(t,function(e,r){if(o&&at.test(e))return delete t[e],n;var s,u=l(c,e.toLowerCase());s=u[0][u[1]],u[0][u[1]]=r&&r.nodeType?i(r):r,a=ot.test(e)||a,t[e]=[u[0],u[1],r,s]}),s(c),this.positioning=M,i.each(t,i.proxy(u,this)),this.positioning=P,this.rendered&&this.tooltip[0].offsetWidth>0&&a&&this.reposition("mouse"===c.position.target?k:this.cache.event),this},S._update=function(t,e){var n=this,r=this.cache;return this.rendered&&t?(i.isFunction(t)&&(t=t.call(this.elements.target,r.event,this)||""),i.isFunction(t.then)?(r.waiting=M,t.then(function(t){return r.waiting=P,n._update(t,e)},k,function(t){return n._update(t,e)})):t===P||!t&&""!==t?P:(t.jquery&&t.length>0?e.empty().append(t.css({display:"block",visibility:"visible"})):e.html(t),this._waitForContent(e).then(function(t){t.images&&t.images.length&&n.rendered&&n.tooltip[0].offsetWidth>0&&n.reposition(r.event,!t.length)}))):P},S._waitForContent=function(t){var e=this.cache;return e.waiting=M,(i.fn.imagesLoaded?t.imagesLoaded():i.Deferred().resolve([])).done(function(){e.waiting=P}).promise()},S._updateContent=function(t,e){this._update(t,this.elements.content,e)},S._updateTitle=function(t,e){this._update(t,this.elements.title,e)===P&&this._removeTitle(P)},S._createTitle=function(){var t=this.elements,e=this._id+"-title";t.titlebar&&this._removeTitle(),t.titlebar=i("<div />",{"class":G+"-titlebar "+(this.options.style.widget?c("header"):"")}).append(t.title=i("<div />",{id:e,"class":G+"-title","aria-atomic":M})).insertBefore(t.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(t){i(this).toggleClass("ui-state-active ui-state-focus","down"===t.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(t){i(this).toggleClass("ui-state-hover","mouseover"===t.type)}),this.options.content.button&&this._createButton()},S._removeTitle=function(t){var e=this.elements;e.title&&(e.titlebar.remove(),e.titlebar=e.title=e.button=k,t!==P&&this.reposition())},S.reposition=function(n,r){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=M;var o,a,s=this.cache,l=this.tooltip,u=this.options.position,c=u.target,h=u.my,d=u.at,p=u.viewport,f=u.container,g=u.adjust,v=g.method.split(" "),y=l.outerWidth(P),m=l.outerHeight(P),x=0,b=0,w=l.css("position"),_={left:0,top:0},E=l[0].offsetWidth>0,T=n&&"scroll"===n.type,D=i(t),S=f[0].ownerDocument,N=this.mouse;if(i.isArray(c)&&2===c.length)d={x:F,y:B},_={left:c[0],top:c[1]};else if("mouse"===c)d={x:F,y:B},!N||!N.pageX||!g.mouse&&n&&n.pageX?n&&n.pageX||((!g.mouse||this.options.show.distance)&&s.origin&&s.origin.pageX?n=s.origin:(!n||n&&("resize"===n.type||"scroll"===n.type))&&(n=s.event)):n=N,"static"!==w&&(_=f.offset()),S.body.offsetWidth!==(t.innerWidth||S.documentElement.clientWidth)&&(a=i(e.body).offset()),_={left:n.pageX-_.left+(a&&a.left||0),top:n.pageY-_.top+(a&&a.top||0)},g.mouse&&T&&N&&(_.left-=(N.scrollX||0)-D.scrollLeft(),_.top-=(N.scrollY||0)-D.scrollTop());else{if("event"===c?n&&n.target&&"scroll"!==n.type&&"resize"!==n.type?s.target=i(n.target):n.target||(s.target=this.elements.target):"event"!==c&&(s.target=i(c.jquery?c:this.elements.target)),c=s.target,c=i(c).eq(0),0===c.length)return this;c[0]===e||c[0]===t?(x=rt.iOS?t.innerWidth:c.width(),b=rt.iOS?t.innerHeight:c.height(),c[0]===t&&(_={top:(p||c).scrollTop(),left:(p||c).scrollLeft()})):V.imagemap&&c.is("area")?o=V.imagemap(this,c,d,V.viewport?v:P):V.svg&&c&&c[0].ownerSVGElement?o=V.svg(this,c,d,V.viewport?v:P):(x=c.outerWidth(P),b=c.outerHeight(P),_=c.offset()),o&&(x=o.width,b=o.height,a=o.offset,_=o.position),_=this.reposition.offset(c,_,f),(rt.iOS>3.1&&4.1>rt.iOS||rt.iOS>=4.3&&4.33>rt.iOS||!rt.iOS&&"fixed"===w)&&(_.left-=D.scrollLeft(),_.top-=D.scrollTop()),(!o||o&&o.adjustable!==P)&&(_.left+=d.x===q?x:d.x===j?x/2:0,_.top+=d.y===z?b:d.y===j?b/2:0)}return _.left+=g.x+(h.x===q?-y:h.x===j?-y/2:0),_.top+=g.y+(h.y===z?-m:h.y===j?-m/2:0),V.viewport?(_.adjusted=V.viewport(this,_,u,x,b,y,m),a&&_.adjusted.left&&(_.left+=a.left),a&&_.adjusted.top&&(_.top+=a.top)):_.adjusted={left:0,top:0},this._trigger("move",[_,p.elem||p],n)?(delete _.adjusted,r===P||!E||isNaN(_.left)||isNaN(_.top)||"mouse"===c||!i.isFunction(u.effect)?l.css(_):i.isFunction(u.effect)&&(u.effect.call(l,this,i.extend({},_)),l.queue(function(t){i(this).css({opacity:"",height:""}),rt.ie&&this.style.removeAttribute("filter"),t()})),this.positioning=P,this):this},S.reposition.offset=function(t,n,r){function o(t,e){n.left+=e*t.scrollLeft(),n.top+=e*t.scrollTop()}if(!r[0])return n;var a,s,l,u,c=i(t[0].ownerDocument),h=!!rt.ie&&"CSS1Compat"!==e.compatMode,d=r[0];do"static"!==(s=i.css(d,"position"))&&("fixed"===s?(l=d.getBoundingClientRect(),o(c,-1)):(l=i(d).position(),l.left+=parseFloat(i.css(d,"borderLeftWidth"))||0,l.top+=parseFloat(i.css(d,"borderTopWidth"))||0),n.left-=l.left+(parseFloat(i.css(d,"marginLeft"))||0),n.top-=l.top+(parseFloat(i.css(d,"marginTop"))||0),a||"hidden"===(u=i.css(d,"overflow"))||"visible"===u||(a=i(d)));while(d=d.offsetParent);return a&&(a[0]!==c[0]||h)&&o(a,1),n};var st=(N=S.reposition.Corner=function(t,e){t=(""+t).replace(/([A-Z])/," $1").replace(/middle/gi,j).toLowerCase(),this.x=(t.match(/left|right/i)||t.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(t.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!e;var n=t.charAt(0);this.precedance="t"===n||"b"===n?O:I}).prototype;st.invert=function(t,e){this[t]=this[t]===F?q:this[t]===q?F:e||this[t]},st.string=function(){var t=this.x,e=this.y;return t===e?t:this.precedance===O||this.forceY&&"center"!==e?e+" "+t:t+" "+e},st.abbrev=function(){var t=this.string().split(" ");return t[0].charAt(0)+(t[1]&&t[1].charAt(0)||"")},st.clone=function(){return new N(this.string(),this.forceY)},S.toggle=function(t,n){var r=this.cache,o=this.options,a=this.tooltip;if(n){if(/over|enter/.test(n.type)&&/out|leave/.test(r.event.type)&&o.show.target.add(n.target).length===o.show.target.length&&a.has(n.relatedTarget).length)return this;r.event=h(n)}if(this.waiting&&!t&&(this.hiddenDuringWait=M),!this.rendered)return t?this.render(1):this;if(this.destroyed||this.disabled)return this;var s,l,u,c=t?"show":"hide",d=this.options[c],p=(this.options[t?"hide":"show"],this.options.position),f=this.options.content,g=this.tooltip.css("width"),v=this.tooltip.is(":visible"),y=t||1===d.target.length,m=!n||2>d.target.length||r.target[0]===n.target;return(typeof t).search("boolean|number")&&(t=!v),s=!a.is(":animated")&&v===t&&m,l=s?k:!!this._trigger(c,[90]),this.destroyed?this:(l!==P&&t&&this.focus(n),!l||s?this:(i.attr(a[0],"aria-hidden",!t),t?(r.origin=h(this.mouse),i.isFunction(f.text)&&this._updateContent(f.text,P),i.isFunction(f.title)&&this._updateTitle(f.title,P),!L&&"mouse"===p.target&&p.adjust.mouse&&(i(e).bind("mousemove."+G,this._storeMouse),L=M),g||a.css("width",a.outerWidth(P)),this.reposition(n,arguments[2]),g||a.css("width",""),d.solo&&("string"==typeof d.solo?i(d.solo):i($,d.solo)).not(a).not(d.target).qtip("hide",i.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete r.origin,L&&!i($+'[tracking="true"]:visible',d.solo).not(a).length&&(i(e).unbind("mousemove."+G),L=P),this.blur(n)),u=i.proxy(function(){t?(rt.ie&&a[0].style.removeAttribute("filter"),a.css("overflow",""),"string"==typeof d.autofocus&&i(this.options.show.autofocus,a).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):a.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(t?"visible":"hidden")},this),d.effect===P||y===P?(a[c](),u()):i.isFunction(d.effect)?(a.stop(1,1),d.effect.call(a,this),a.queue("fx",function(t){u(),t()})):a.fadeTo(90,t?1:0,u),t&&d.target.trigger("qtip-"+this.id+"-inactive"),this))},S.show=function(t){return this.toggle(M,t)},S.hide=function(t){return this.toggle(P,t)},S.focus=function(t){if(!this.rendered||this.destroyed)return this;var e=i($),n=this.tooltip,r=parseInt(n[0].style.zIndex,10),o=D.zindex+e.length;return n.hasClass(J)||this._trigger("focus",[o],t)&&(r!==o&&(e.each(function(){this.style.zIndex>r&&(this.style.zIndex=this.style.zIndex-1)}),e.filter("."+J).qtip("blur",t)),n.addClass(J)[0].style.zIndex=o),this},S.blur=function(t){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(J),this._trigger("blur",[this.tooltip.css("zIndex")],t),this)},S.disable=function(t){return this.destroyed?this:("toggle"===t?t=!(this.rendered?this.tooltip.hasClass(et):this.disabled):"boolean"!=typeof t&&(t=M),this.rendered&&this.tooltip.toggleClass(et,t).attr("aria-disabled",t),this.disabled=!!t,this)},S.enable=function(){return this.disable(P)},S._createButton=function(){var t=this,e=this.elements,n=e.tooltip,r=this.options.content.button,o="string"==typeof r,a=o?r:"Close tooltip";e.button&&e.button.remove(),e.button=r.jquery?r:i("<a />",{"class":"qtip-close "+(this.options.style.widget?"":G+"-icon"),title:a,"aria-label":a}).prepend(i("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),e.button.appendTo(e.titlebar||n).attr("role","button").click(function(e){return n.hasClass(et)||t.hide(e),P})},S._updateButton=function(t){if(!this.rendered)return P;var e=this.elements.button;t?this._createButton():e.remove()},S._setWidget=function(){var t=this.options.style.widget,e=this.elements,n=e.tooltip,i=n.hasClass(et);n.removeClass(et),et=t?"ui-state-disabled":"qtip-disabled",n.toggleClass(et,i),n.toggleClass("ui-helper-reset "+c(),t).toggleClass(Q,this.options.style.def&&!t),e.content&&e.content.toggleClass(c("content"),t),e.titlebar&&e.titlebar.toggleClass(c("header"),t),e.button&&e.button.toggleClass(G+"-icon",!t)},S._storeMouse=function(t){(this.mouse=h(t)).type="mousemove"},S._bind=function(t,e,n,r,o){var a="."+this._id+(r?"-"+r:"");e.length&&i(t).bind((e.split?e:e.join(a+" "))+a,i.proxy(n,o||this))},S._unbind=function(t,e){i(t).unbind("."+this._id+(e?"-"+e:""))};var lt="."+G;i(function(){y($,["mouseenter","mouseleave"],function(t){var e="mouseenter"===t.type,n=i(t.currentTarget),r=i(t.relatedTarget||t.target),o=this.options;e?(this.focus(t),n.hasClass(K)&&!n.hasClass(et)&&clearTimeout(this.timers.hide)):"mouse"===o.position.target&&o.hide.event&&o.show.target&&!r.closest(o.show.target[0]).length&&this.hide(t),n.toggleClass(tt,e)}),y("["+W+"]",Z,g)}),S._trigger=function(t,e,n){var r=i.Event("tooltip"+t);return r.originalEvent=n&&i.extend({},n)||this.cache.event||k,this.triggering=t,this.tooltip.trigger(r,[this].concat(e||[])),this.triggering=P,!r.isDefaultPrevented()},S._bindEvents=function(t,e,r,o,a,s){if(o.add(r).length===o.length){var l=[];e=i.map(e,function(e){var r=i.inArray(e,t);return r>-1?(l.push(t.splice(r,1)[0]),n):e}),l.length&&this._bind(r,l,function(t){var e=!!this.rendered&&this.tooltip[0].offsetWidth>0;(e?s:a).call(this,t)})}this._bind(r,t,a),this._bind(o,e,s)},S._assignInitialEvents=function(t){function e(t){return this.disabled||this.destroyed?P:(this.cache.event=h(t),this.cache.target=t?i(t.target):[n],clearTimeout(this.timers.show),this.timers.show=d.call(this,function(){this.render("object"==typeof t||r.show.ready)},r.show.delay),n)}var r=this.options,o=r.show.target,a=r.hide.target,s=r.show.event?i.trim(""+r.show.event).split(" "):[],l=r.hide.event?i.trim(""+r.hide.event).split(" "):[];/mouse(over|enter)/i.test(r.show.event)&&!/mouse(out|leave)/i.test(r.hide.event)&&l.push("mouseleave"),this._bind(o,"mousemove",function(t){this._storeMouse(t),this.cache.onTarget=M}),this._bindEvents(s,l,o,a,e,function(){clearTimeout(this.timers.show)}),(r.show.ready||r.prerender)&&e.call(this,t)},S._assignEvents=function(){var n=this,r=this.options,o=r.position,a=this.tooltip,s=r.show.target,l=r.hide.target,u=o.container,c=o.viewport,h=i(e),d=(i(e.body),i(t)),y=r.show.event?i.trim(""+r.show.event).split(" "):[],m=r.hide.event?i.trim(""+r.hide.event).split(" "):[];i.each(r.events,function(t,e){n._bind(a,"toggle"===t?["tooltipshow","tooltiphide"]:["tooltip"+t],e,null,a)}),/mouse(out|leave)/i.test(r.hide.event)&&"window"===r.hide.leave&&this._bind(h,["mouseout","blur"],function(t){/select|option/.test(t.target.nodeName)||t.relatedTarget||this.hide(t)}),r.hide.fixed?l=l.add(a.addClass(K)):/mouse(over|enter)/i.test(r.show.event)&&this._bind(l,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+r.hide.event).indexOf("unfocus")>-1&&this._bind(u.closest("html"),["mousedown","touchstart"],function(t){var e=i(t.target),n=this.rendered&&!this.tooltip.hasClass(et)&&this.tooltip[0].offsetWidth>0,r=e.parents($).filter(this.tooltip[0]).length>0;e[0]===this.target[0]||e[0]===this.tooltip[0]||r||this.target.has(e[0]).length||!n||this.hide(t)}),"number"==typeof r.hide.inactive&&(this._bind(s,"qtip-"+this.id+"-inactive",g),this._bind(l.add(a),D.inactiveEvents,g,"-inactive")),this._bindEvents(y,m,s,l,p,f),this._bind(s.add(a),"mousemove",function(t){if("number"==typeof r.hide.distance){var e=this.cache.origin||{},n=this.options.hide.distance,i=Math.abs;(i(t.pageX-e.pageX)>=n||i(t.pageY-e.pageY)>=n)&&this.hide(t)}this._storeMouse(t)}),"mouse"===o.target&&o.adjust.mouse&&(r.hide.event&&this._bind(s,["mouseenter","mouseleave"],function(t){this.cache.onTarget="mouseenter"===t.type}),this._bind(h,"mousemove",function(t){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(et)&&this.tooltip[0].offsetWidth>0&&this.reposition(t)})),(o.adjust.resize||c.length)&&this._bind(i.event.special.resize?c:d,"resize",v),o.adjust.scroll&&this._bind(d.add(o.container),"scroll",v)},S._unassignEvents=function(){var n=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],t,e];this._unbind(i([]).pushStack(i.grep(n,function(t){return"object"==typeof t})))},D=i.fn.qtip=function(t,e,r){var o=(""+t).toLowerCase(),a=k,l=i.makeArray(arguments).slice(1),u=l[l.length-1],c=this[0]?i.data(this[0],G):k;return!arguments.length&&c||"api"===o?c:"string"==typeof t?(this.each(function(){var t=i.data(this,G);if(!t)return M;if(u&&u.timeStamp&&(t.cache.event=u),!e||"option"!==o&&"options"!==o)t[o]&&t[o].apply(t,l);else{if(r===n&&!i.isPlainObject(e))return a=t.get(e),P;t.set(e,r)}}),a!==k?a:this):"object"!=typeof t&&arguments.length?n:(c=s(i.extend(M,{},t)),this.each(function(t){var e,r;return r=i.isArray(c.id)?c.id[t]:c.id,r=!r||r===P||1>r.length||D.api[r]?D.nextid++:r,e=m(i(this),r,c),e===P?M:(D.api[r]=e,i.each(V,function(){"initialize"===this.initialize&&this(e)}),e._assignInitialEvents(u),n)}))},i.qtip=r,D.api={},i.each({attr:function(t,e){if(this.length){var n=this[0],r="title",o=i.data(n,"qtip");if(t===r&&o&&"object"==typeof o&&o.options.suppress)return 2>arguments.length?i.attr(n,it):(o&&o.options.content.attr===r&&o.cache.attr&&o.set("content.text",e),this.attr(it,e))}return i.fn["attr"+nt].apply(this,arguments)},clone:function(t){var e=(i([]),i.fn["clone"+nt].apply(this,arguments));return t||e.filter("["+it+"]").attr("title",function(){return i.attr(this,it)}).removeAttr(it),e}},function(t,e){if(!e||i.fn[t+nt])return M;var n=i.fn[t+nt]=i.fn[t];i.fn[t]=function(){return e.apply(this,arguments)||n.apply(this,arguments)}}),i.ui||(i["cleanData"+nt]=i.cleanData,i.cleanData=function(t){for(var e,n=0;(e=i(t[n])).length;n++)if(e.attr(U))try{e.triggerHandler("removeqtip")}catch(r){}i["cleanData"+nt].apply(this,arguments)}),D.version="2.2.0",D.nextid=0,D.inactiveEvents=Z,D.zindex=15e3,D.defaults={prerender:P,id:P,overwrite:M,suppress:M,content:{text:M,attr:"title",title:P,button:P},position:{my:"top left",at:"bottom right",target:P,container:P,viewport:P,adjust:{x:0,y:0,mouse:M,scroll:M,resize:M,method:"flipinvert flipinvert"},effect:function(t,e){i(this).animate(e,{duration:200,queue:P})}},show:{target:P,event:"mouseenter",effect:M,delay:90,solo:P,ready:P,autofocus:P},hide:{target:P,event:"mouseleave",effect:M,delay:0,fixed:P,inactive:P,leave:"window",distance:P},style:{classes:"",widget:P,width:P,height:P,def:M},events:{render:k,move:k,show:k,hide:k,toggle:k,visible:k,hidden:k,focus:k,blur:k}};var ut,ct="margin",ht="border",dt="color",pt="background-color",ft="transparent",gt=" !important",vt=!!e.createElement("canvas").getContext,yt=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,mt={},xt=["Webkit","O","Moz","ms"];if(vt)var bt=t.devicePixelRatio||1,wt=function(){var t=e.createElement("canvas").getContext("2d");return t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||1}(),_t=bt/wt;else var Et=function(t,e,n){return"<qtipvml:"+t+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(e||"")+' style="behavior: url(#default#VML); '+(n||"")+'" />'};i.extend(_.prototype,{init:function(t){var e,n;n=this.element=t.elements.tip=i("<div />",{"class":G+"-tip"}).prependTo(t.tooltip),vt?(e=i("<canvas />").appendTo(this.element)[0].getContext("2d"),e.lineJoin="miter",e.miterLimit=1e5,e.save()):(e=Et("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(e+e),t._bind(i("*",n).add(n),["click","mousedown"],function(t){t.stopPropagation()},this._ns)),t._bind(t.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(t){var e=this.qtip.elements.titlebar;return e&&(t.y===B||t.y===j&&this.element.position().top+this.size[1]/2+this.options.offset<e.outerHeight(M))},_parseCorner:function(t){var e=this.qtip.options.position.my;return t===P||e===P?t=P:t===M?t=new N(e.string()):t.string||(t=new N(t),t.fixed=M),t},_parseWidth:function(t,e,n){var i=this.qtip.elements,r=ht+x(e)+"Width";return(n?w(n,r):w(i.content,r)||w(this._useTitle(t)&&i.titlebar||i.content,r)||w(i.tooltip,r))||0},_parseRadius:function(t){var e=this.qtip.elements,n=ht+x(t.y)+x(t.x)+"Radius";return 9>rt.ie?0:w(this._useTitle(t)&&e.titlebar||e.content,n)||w(e.tooltip,n)||0},_invalidColour:function(t,e,n){var i=t.css(e);return!i||n&&i===t.css(n)||yt.test(i)?P:i},_parseColours:function(t){var e=this.qtip.elements,n=this.element.css("cssText",""),r=ht+x(t[t.precedance])+x(dt),o=this._useTitle(t)&&e.titlebar||e.content,a=this._invalidColour,s=[];return s[0]=a(n,pt)||a(o,pt)||a(e.content,pt)||a(e.tooltip,pt)||n.css(pt),s[1]=a(n,r,dt)||a(o,r,dt)||a(e.content,r,dt)||a(e.tooltip,r,dt)||e.tooltip.css(r),i("*",n).add(n).css("cssText",pt+":"+ft+gt+";"+ht+":0"+gt+";"),s},_calculateSize:function(t){var e,n,i,r=t.precedance===O,o=this.options.width,a=this.options.height,s="c"===t.abbrev(),l=(r?o:a)*(s?.5:1),u=Math.pow,c=Math.round,h=Math.sqrt(u(l,2)+u(a,2)),d=[this.border/l*h,this.border/a*h];return d[2]=Math.sqrt(u(d[0],2)-u(this.border,2)),d[3]=Math.sqrt(u(d[1],2)-u(this.border,2)),e=h+d[2]+d[3]+(s?0:d[0]),n=e/h,i=[c(n*o),c(n*a)],r?i:i.reverse()},_calculateTip:function(t,e,n){n=n||1,e=e||this.size;var i=e[0]*n,r=e[1]*n,o=Math.ceil(i/2),a=Math.ceil(r/2),s={br:[0,0,i,r,i,0],bl:[0,0,i,0,0,r],tr:[0,r,i,0,i,r],tl:[0,0,0,r,i,r],tc:[0,r,o,0,i,r],bc:[0,0,i,0,o,r],rc:[0,0,i,a,0,r],lc:[i,0,i,r,0,a]};return s.lt=s.br,s.rt=s.bl,s.lb=s.tr,s.rb=s.tl,s[t.abbrev()]},_drawCoords:function(t,e){t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.closePath()},create:function(){var t=this.corner=(vt||rt.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=t.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(e,n){if(!this.enabled)return this;var r,o,a,s,l,u,c,h,d=this.qtip.elements,p=this.element,f=p.children(),g=this.options,v=this.size,y=g.mimic,m=Math.round;
e||(e=this.qtip.cache.corner||this.corner),y===P?y=e:(y=new N(y),y.precedance=e.precedance,"inherit"===y.x?y.x=e.x:"inherit"===y.y?y.y=e.y:y.x===y.y&&(y[e.precedance]=e[e.precedance])),o=y.precedance,e.precedance===I?this._swapDimensions():this._resetDimensions(),r=this.color=this._parseColours(e),r[1]!==ft?(h=this.border=this._parseWidth(e,e[e.precedance]),g.border&&1>h&&!yt.test(r[1])&&(r[0]=r[1]),this.border=h=g.border!==M?g.border:h):this.border=h=0,c=this.size=this._calculateSize(e),p.css({width:c[0],height:c[1],lineHeight:c[1]+"px"}),u=e.precedance===O?[m(y.x===F?h:y.x===q?c[0]-v[0]-h:(c[0]-v[0])/2),m(y.y===B?c[1]-v[1]:0)]:[m(y.x===F?c[0]-v[0]:0),m(y.y===B?h:y.y===z?c[1]-v[1]-h:(c[1]-v[1])/2)],vt?(a=f[0].getContext("2d"),a.restore(),a.save(),a.clearRect(0,0,6e3,6e3),s=this._calculateTip(y,v,_t),l=this._calculateTip(y,this.size,_t),f.attr(A,c[0]*_t).attr(R,c[1]*_t),f.css(A,c[0]).css(R,c[1]),this._drawCoords(a,l),a.fillStyle=r[1],a.fill(),a.translate(u[0]*_t,u[1]*_t),this._drawCoords(a,s),a.fillStyle=r[0],a.fill()):(s=this._calculateTip(y),s="m"+s[0]+","+s[1]+" l"+s[2]+","+s[3]+" "+s[4]+","+s[5]+" xe",u[2]=h&&/^(r|b)/i.test(e.string())?8===rt.ie?2:1:0,f.css({coordsize:c[0]+h+" "+(c[1]+h),antialias:""+(y.string().indexOf(j)>-1),left:u[0]-u[2]*Number(o===I),top:u[1]-u[2]*Number(o===O),width:c[0]+h,height:c[1]+h}).each(function(t){var e=i(this);e[e.prop?"prop":"attr"]({coordsize:c[0]+h+" "+(c[1]+h),path:s,fillcolor:r[0],filled:!!t,stroked:!t}).toggle(!(!h&&!t)),!t&&e.html(Et("stroke",'weight="'+2*h+'px" color="'+r[1]+'" miterlimit="1000" joinstyle="miter"'))})),t.opera&&setTimeout(function(){d.tip.css({display:"inline-block",visibility:"visible"})},1),n!==P&&this.calculate(e,c)},calculate:function(t,e){if(!this.enabled)return P;var n,r,o=this,a=this.qtip.elements,s=this.element,l=this.options.offset,u=(a.tooltip.hasClass("ui-widget"),{});return t=t||this.corner,n=t.precedance,e=e||this._calculateSize(t),r=[t.x,t.y],n===I&&r.reverse(),i.each(r,function(i,r){var s,c,h;r===j?(s=n===O?F:B,u[s]="50%",u[ct+"-"+s]=-Math.round(e[n===O?0:1]/2)+l):(s=o._parseWidth(t,r,a.tooltip),c=o._parseWidth(t,r,a.content),h=o._parseRadius(t),u[r]=Math.max(-o.border,i?c:l+(h>s?h:-s)))}),u[t[n]]-=e[n===I?0:1],s.css({margin:"",top:"",bottom:"",left:"",right:""}).css(u),u},reposition:function(t,e,i){function r(t,e,n,i,r){t===Y&&u.precedance===e&&c[i]&&u[n]!==j?u.precedance=u.precedance===I?O:I:t!==Y&&c[i]&&(u[e]=u[e]===j?c[i]>0?i:r:u[e]===i?r:i)}function o(t,e,r){u[t]===j?g[ct+"-"+e]=f[t]=a[ct+"-"+e]-c[e]:(s=a[r]!==n?[c[e],-a[e]]:[-c[e],a[e]],(f[t]=Math.max(s[0],s[1]))>s[0]&&(i[e]-=c[e],f[e]=P),g[a[r]!==n?r:e]=f[t])}if(this.enabled){var a,s,l=e.cache,u=this.corner.clone(),c=i.adjusted,h=e.options.position.adjust.method.split(" "),d=h[0],p=h[1]||h[0],f={left:P,top:P,x:0,y:0},g={};this.corner.fixed!==M&&(r(d,I,O,F,q),r(p,O,I,B,z),u.string()===l.corner.string()||l.cornerTop===c.top&&l.cornerLeft===c.left||this.update(u,P)),a=this.calculate(u),a.right!==n&&(a.left=-a.right),a.bottom!==n&&(a.top=-a.bottom),a.user=this.offset,(f.left=d===Y&&!!c.left)&&o(I,F,q),(f.top=p===Y&&!!c.top)&&o(O,B,z),this.element.css(g).toggle(!(f.x&&f.y||u.x===j&&f.y||u.y===j&&f.x)),i.left-=a.left.charAt?a.user:d!==Y||f.top||!f.left&&!f.top?a.left+this.border:0,i.top-=a.top.charAt?a.user:p!==Y||f.left||!f.left&&!f.top?a.top+this.border:0,l.cornerLeft=c.left,l.cornerTop=c.top,l.corner=u.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),ut=V.tip=function(t){return new _(t,t.options.style.tip)},ut.initialize="render",ut.sanitize=function(t){if(t.style&&"tip"in t.style){var e=t.style.tip;"object"!=typeof e&&(e=t.style.tip={corner:e}),/string|boolean/i.test(typeof e.corner)||(e.corner=M)}},C.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(t){this.size=[t.width,t.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},i.extend(M,D.defaults,{style:{tip:{corner:M,mimic:P,width:6,height:6,border:M,offset:0}}});var Tt,Dt,St="qtip-modal",Nt="."+St;Dt=function(){function t(t){if(i.expr[":"].focusable)return i.expr[":"].focusable;var e,n,r,o=!isNaN(i.attr(t,"tabindex")),a=t.nodeName&&t.nodeName.toLowerCase();return"area"===a?(e=t.parentNode,n=e.name,!(!t.href||!n||"map"!==e.nodeName.toLowerCase())&&(r=i("img[usemap=#"+n+"]")[0],!!r&&r.is(":visible"))):/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||o:o}function n(t){1>c.length&&t.length?t.not("body").blur():c.first().focus()}function r(t){if(l.is(":visible")){var e,r=i(t.target),s=o.tooltip,u=r.closest($);e=1>u.length?P:parseInt(u[0].style.zIndex,10)>parseInt(s[0].style.zIndex,10),e||r.closest($)[0]===s[0]||n(r),a=t.target===c[c.length-1]}}var o,a,s,l,u=this,c={};i.extend(u,{init:function(){return l=u.elem=i("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return P}}).hide(),i(e.body).bind("focusin"+Nt,r),i(e).bind("keydown"+Nt,function(t){o&&o.options.show.modal.escape&&27===t.keyCode&&o.hide(t)}),l.bind("click"+Nt,function(t){o&&o.options.show.modal.blur&&o.hide(t)}),u},update:function(e){o=e,c=e.options.show.modal.stealfocus!==P?e.tooltip.find("*").filter(function(){return t(this)}):[]},toggle:function(t,r,a){var c=(i(e.body),t.tooltip),h=t.options.show.modal,d=h.effect,p=r?"show":"hide",f=l.is(":visible"),g=i(Nt).filter(":visible:not(:animated)").not(c);return u.update(t),r&&h.stealfocus!==P&&n(i(":focus")),l.toggleClass("blurs",h.blur),r&&l.appendTo(e.body),l.is(":animated")&&f===r&&s!==P||!r&&g.length?u:(l.stop(M,P),i.isFunction(d)?d.call(l,r):d===P?l[p]():l.fadeTo(parseInt(a,10)||90,r?1:0,function(){r||l.hide()}),r||l.queue(function(t){l.css({left:"",top:""}),i(Nt).length||l.detach(),t()}),s=r,o.destroyed&&(o=k),u)}}),u.init()},Dt=new Dt,i.extend(E.prototype,{init:function(t){var e=t.tooltip;return this.options.on?(t.elements.overlay=Dt.elem,e.addClass(St).css("z-index",D.modal_zindex+i(Nt).length),t._bind(e,["tooltipshow","tooltiphide"],function(t,n,r){var o=t.originalEvent;if(t.target===e[0])if(o&&"tooltiphide"===t.type&&/mouse(leave|enter)/.test(o.type)&&i(o.relatedTarget).closest(Dt.elem[0]).length)try{t.preventDefault()}catch(a){}else(!o||o&&"tooltipsolo"!==o.type)&&this.toggle(t,"tooltipshow"===t.type,r)},this._ns,this),t._bind(e,"tooltipfocus",function(t,n){if(!t.isDefaultPrevented()&&t.target===e[0]){var r=i(Nt),o=D.modal_zindex+r.length,a=parseInt(e[0].style.zIndex,10);Dt.elem[0].style.zIndex=o-1,r.each(function(){this.style.zIndex>a&&(this.style.zIndex-=1)}),r.filter("."+J).qtip("blur",t.originalEvent),e.addClass(J)[0].style.zIndex=o,Dt.update(n);try{t.preventDefault()}catch(s){}}},this._ns,this),t._bind(e,"tooltiphide",function(t){t.target===e[0]&&i(Nt).filter(":visible").not(e).last().qtip("focus",t)},this._ns,this),n):this},toggle:function(t,e,i){return t&&t.isDefaultPrevented()?this:(Dt.toggle(this.qtip,!!e,i),n)},destroy:function(){this.qtip.tooltip.removeClass(St),this.qtip._unbind(this.qtip.tooltip,this._ns),Dt.toggle(this.qtip,P),delete this.qtip.elements.overlay}}),Tt=V.modal=function(t){return new E(t,t.options.show.modal)},Tt.sanitize=function(t){t.show&&("object"!=typeof t.show.modal?t.show.modal={on:!!t.show.modal}:t.show.modal.on===n&&(t.show.modal.on=M))},D.modal_zindex=D.zindex-200,Tt.initialize="render",C.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},i.extend(M,D.defaults,{show:{modal:{on:P,effect:M,blur:M,stealfocus:M,escape:M}}}),V.viewport=function(n,i,r,o,a,s,l){function u(t,e,n,r,o,a,s,l,u){var c=i[o],d=w[t],x=_[t],b=n===Y,E=d===o?u:d===a?-u:-u/2,T=x===o?l:x===a?-l:-l/2,D=y[o]+m[o]-(f?0:p[o]),S=D-c,N=c+u-(s===A?g:v)-D,C=E-(w.precedance===t||d===w[e]?T:0)-(x===j?l/2:0);return b?(C=(d===o?1:-1)*E,i[o]+=S>0?S:N>0?-N:0,i[o]=Math.max(-p[o]+m[o],c-C,Math.min(Math.max(-p[o]+m[o]+(s===A?g:v),c+C),i[o],"center"===d?c-E:1e9))):(r*=n===X?2:0,S>0&&(d!==o||N>0)?(i[o]-=C+r,h.invert(t,o)):N>0&&(d!==a||S>0)&&(i[o]-=(d===j?-C:C)+r,h.invert(t,a)),y>i[o]&&-i[o]>N&&(i[o]=c,h=w.clone())),i[o]-c}var c,h,d,p,f,g,v,y,m,x=r.target,b=n.elements.tooltip,w=r.my,_=r.at,E=r.adjust,T=E.method.split(" "),D=T[0],S=T[1]||T[0],N=r.viewport,C=r.container,L=n.cache,M={left:0,top:0};return N.jquery&&x[0]!==t&&x[0]!==e.body&&"none"!==E.method?(p=C.offset()||M,f="static"===C.css("position"),c="fixed"===b.css("position"),g=N[0]===t?N.width():N.outerWidth(P),v=N[0]===t?N.height():N.outerHeight(P),y={left:c?0:N.scrollLeft(),top:c?0:N.scrollTop()},m=N.offset()||M,("shift"!==D||"shift"!==S)&&(h=w.clone()),M={left:"none"!==D?u(I,O,D,E.x,F,q,A,o,s):0,top:"none"!==S?u(O,I,S,E.y,B,z,R,a,l):0},h&&L.lastClass!==(d=G+"-pos-"+h.abbrev())&&b.removeClass(n.cache.lastClass).addClass(n.cache.lastClass=d),M):M},V.polys={polygon:function(t,e){var n,i,r,o={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:P},a=0,s=[],l=1,u=1,c=0,h=0;for(a=t.length;a--;)n=[parseInt(t[--a],10),parseInt(t[a+1],10)],n[0]>o.position.right&&(o.position.right=n[0]),n[0]<o.position.left&&(o.position.left=n[0]),n[1]>o.position.bottom&&(o.position.bottom=n[1]),n[1]<o.position.top&&(o.position.top=n[1]),s.push(n);if(i=o.width=Math.abs(o.position.right-o.position.left),r=o.height=Math.abs(o.position.bottom-o.position.top),"c"===e.abbrev())o.position={left:o.position.left+o.width/2,top:o.position.top+o.height/2};else{for(;i>0&&r>0&&l>0&&u>0;)for(i=Math.floor(i/2),r=Math.floor(r/2),e.x===F?l=i:e.x===q?l=o.width-i:l+=Math.floor(i/2),e.y===B?u=r:e.y===z?u=o.height-r:u+=Math.floor(r/2),a=s.length;a--&&!(2>s.length);)c=s[a][0]-o.position.left,h=s[a][1]-o.position.top,(e.x===F&&c>=l||e.x===q&&l>=c||e.x===j&&(l>c||c>o.width-l)||e.y===B&&h>=u||e.y===z&&u>=h||e.y===j&&(u>h||h>o.height-u))&&s.splice(a,1);o.position={left:s[0][0],top:s[0][1]}}return o},rect:function(t,e,n,i){return{width:Math.abs(n-t),height:Math.abs(i-e),position:{left:Math.min(t,n),top:Math.min(e,i)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(t,e,n,i,r){var o=V.polys._angles[r.abbrev()],a=0===o?0:n*Math.cos(o*Math.PI),s=i*Math.sin(o*Math.PI);return{width:2*n-Math.abs(a),height:2*i-Math.abs(s),position:{left:t+a,top:e+s},adjustable:P}},circle:function(t,e,n,i){return V.polys.ellipse(t,e,n,n,i)}},V.svg=function(t,n,r){for(var o,a,s,l,u,c,h,d,p,f,g,v=i(e),y=n[0],m=i(y.ownerSVGElement),x=1,b=1,w=!0;!y.getBBox;)y=y.parentNode;if(!y.getBBox||!y.parentNode)return P;o=m.attr("width")||m.width()||parseInt(m.css("width"),10),a=m.attr("height")||m.height()||parseInt(m.css("height"),10);var _=(parseInt(n.css("stroke-width"),10)||0)/2;switch(_&&(x+=_/o,b+=_/a),y.nodeName){case"ellipse":case"circle":f=V.polys.ellipse(y.cx.baseVal.value,y.cy.baseVal.value,(y.rx||y.r).baseVal.value+_,(y.ry||y.r).baseVal.value+_,r);break;case"line":case"polygon":case"polyline":for(p=y.points||[{x:y.x1.baseVal.value,y:y.y1.baseVal.value},{x:y.x2.baseVal.value,y:y.y2.baseVal.value}],f=[],d=-1,c=p.numberOfItems||p.length;c>++d;)h=p.getItem?p.getItem(d):p[d],f.push.apply(f,[h.x,h.y]);f=V.polys.polygon(f,r);break;default:f=y.getBoundingClientRect(),f={width:f.width,height:f.height,position:{left:f.left,top:f.top}},w=!1}return g=f.position,m=m[0],w&&(m.createSVGPoint&&(s=y.getScreenCTM(),p=m.createSVGPoint(),p.x=g.left,p.y=g.top,l=p.matrixTransform(s),g.left=l.x,g.top=l.y),m.viewBox&&(u=m.viewBox.baseVal)&&u.width&&u.height&&(x*=o/u.width,b*=a/u.height)),g.left+=v.scrollLeft(),g.top+=v.scrollTop(),f},V.imagemap=function(t,e,n){e.jquery||(e=i(e));var r,o,a,s,l,u=e.attr("shape").toLowerCase().replace("poly","polygon"),c=i('img[usemap="#'+e.parent("map").attr("name")+'"]'),h=i.trim(e.attr("coords")),d=h.replace(/,$/,"").split(",");if(!c.length)return P;if("polygon"===u)s=V.polys.polygon(d,n);else{if(!V.polys[u])return P;for(a=-1,l=d.length,o=[];l>++a;)o.push(parseInt(d[a],10));s=V.polys[u].apply(this,o.concat(n))}return r=c.offset(),r.left+=Math.ceil((c.outerWidth(P)-c.width())/2),r.top+=Math.ceil((c.outerHeight(P)-c.height())/2),s.position.left+=r.left,s.position.top+=r.top,s};var Ct,Lt='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';i.extend(T.prototype,{_scroll:function(){var e=this.qtip.elements.overlay;e&&(e[0].style.top=i(t).scrollTop()+"px")},init:function(n){var r=n.tooltip;1>i("select, object").length&&(this.bgiframe=n.elements.bgiframe=i(Lt).appendTo(r),n._bind(r,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=i("<div/>",{id:G+"-rcontainer"}).appendTo(e.body),n.elements.overlay&&n.elements.overlay.addClass("qtipmodal-ie6fix")&&(n._bind(t,["scroll","resize"],this._scroll,this._ns,this),n._bind(r,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var t,e,n=this.qtip.tooltip,i={height:n.outerHeight(P),width:n.outerWidth(P)},r=this.qtip.plugins.tip,o=this.qtip.elements.tip;e=parseInt(n.css("borderLeftWidth"),10)||0,e={left:-e,top:-e},r&&o&&(t="x"===r.corner.precedance?[A,F]:[R,B],e[t[1]]-=o[t[0]]()),this.bgiframe.css(e).css(i)},redraw:function(){if(1>this.qtip.rendered||this.drawing)return this;var t,e,n,i,r=this.qtip.tooltip,o=this.qtip.options.style,a=this.qtip.options.position.container;return this.qtip.drawing=1,o.height&&r.css(R,o.height),o.width?r.css(A,o.width):(r.css(A,"").appendTo(this.redrawContainer),e=r.width(),1>e%2&&(e+=1),n=r.css("maxWidth")||"",i=r.css("minWidth")||"",t=(n+i).indexOf("%")>-1?a.width()/100:0,n=(n.indexOf("%")>-1?t:1)*parseInt(n,10)||e,i=(i.indexOf("%")>-1?t:1)*parseInt(i,10)||0,e=n+i?Math.min(Math.max(e,i),n):e,r.css(A,Math.round(e)).appendTo(a)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([t,this.qtip.tooltip],this._ns)}}),Ct=V.ie6=function(t){return 6===rt.ie?new T(t):P},Ct.initialize="render",C.ie6={"^content|style$":function(){this.redraw()}}})}(window,document);var saveAs=saveAs||function(t){"use strict";if(!("undefined"==typeof t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},a=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u="application/octet-stream",c=4e4,h=function(t){var e=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};setTimeout(e,c)},d=function(t,e,n){e=[].concat(e);for(var i=e.length;i--;){var r=t["on"+e[i]];if("function"==typeof r)try{r.call(t,n||t)}catch(o){l(o)}}},p=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},f=function(e,l,c){c||(e=p(e));var f,g=this,v=e.type,y=v===u,m=function(){d(g,"writestart progress write writeend".split(" "))},x=function(){if((s||y&&a)&&t.FileReader){var i=new FileReader;return i.onloadend=function(){var e=s?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=t.open(e,"_blank");n||(t.location.href=e),e=void 0,g.readyState=g.DONE,m()},i.readAsDataURL(e),void(g.readyState=g.INIT)}if(f||(f=n().createObjectURL(e)),y)t.location.href=f;else{var r=t.open(f,"_blank");r||(t.location.href=f)}g.readyState=g.DONE,m(),h(f)};return g.readyState=g.INIT,r?(f=n().createObjectURL(e),void setTimeout(function(){i.href=f,i.download=l,o(i),m(),h(f),g.readyState=g.DONE})):void x()},g=f.prototype,v=function(t,e,n){return new f(t,e||t.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=p(t)),navigator.msSaveOrOpenBlob(t,e)}:(g.abort=function(){},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,v)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs});var cytoscape;!function(t){"use strict";var e=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};e.version="2.4.7",e.init=function(t){return void 0===t&&(t={}),e.is.plainObject(t)?new e.Core(t):e.is.string(t)?e.extension.apply(e.extension,arguments):void 0},e.fn={},"undefined"!=typeof module&&module.exports&&(module.exports=cytoscape),"undefined"!=typeof define&&define.amd&&define("cytoscape",function(){return cytoscape}),t&&(t.cytoscape=cytoscape)}("undefined"==typeof window?null:window),this.cytoscape=cytoscape,function(t){"use strict";var e=0,n=1,i=2,r=function(t){return this instanceof r?(this.id="Thenable/1.0.7",this.state=e,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new r(t)};r.prototype={fulfill:function(t){return o(this,n,"fulfillValue",t)},reject:function(t){return o(this,i,"rejectReason",t)},then:function(t,e){var n=this,i=new r;return n.onFulfilled.push(l(t,i,"fulfill")),n.onRejected.push(l(e,i,"reject")),a(n),i.proxy}};var o=function(t,n,i,r){return t.state===e&&(t.state=n,t[i]=r,a(t)),t},a=function(t){t.state===n?s(t,"onFulfilled",t.fulfillValue):t.state===i&&s(t,"onRejected",t.rejectReason)},s=function(t,e,n){if(0!==t[e].length){var i=t[e];t[e]=[];var r=function(){for(var t=0;t<i.length;t++)i[t](n)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(r):"function"==typeof setImmediate?setImmediate(r):setTimeout(r,0)}},l=function(t,e,n){return function(i){if("function"!=typeof t)e[n].call(e,i);else{var r;try{r=t(i)}catch(o){return void e.reject(o)}u(e,r)}}},u=function(t,e){if(t===e||t.proxy===e)return void t.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof e&&null!==e||"function"==typeof e)try{n=e.then}catch(i){return void t.reject(i)}if("function"!=typeof n)t.fulfill(e);else{var r=!1;try{n.call(e,function(n){r||(r=!0,n===e?t.reject(new TypeError("circular thenable chain")):u(t,n))},function(e){r||(r=!0,t.reject(e))})}catch(i){r||t.reject(i)}}};t.Promise="undefined"==typeof Promise?r:Promise,t.Promise.all=t.Promise.all||function(e){return new t.Promise(function(t,n){for(var i=new Array(e.length),r=0,o=function(n,o){i[n]=o,r++,r===e.length&&t(i)},a=0;a<e.length;a++)!function(t){var i=e[t],r=null!=i.then;if(r)i.then(function(e){o(t,e)},function(t){n(t)});else{var a=i;o(t,a)}}(a)})}}(cytoscape),function(t,e){"use strict";var n="string",i=typeof{},r="function";t.is={defined:function(t){return null!=t},string:function(t){return null!=t&&typeof t==n},fn:function(t){return null!=t&&typeof t===r},array:function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},plainObject:function(e){return null!=e&&typeof e===i&&!t.is.array(e)&&e.constructor===Object},object:function(t){return null!=t&&typeof t===i},number:function(t){return null!=t&&"number"==typeof t&&!isNaN(t)},integer:function(e){return t.is.number(e)&&Math.floor(e)===e},color:function(t){return null!=t&&"string"==typeof t&&""!==$.Color(t).toString()},bool:function(t){return null!=t&&typeof t==typeof!0},elementOrCollection:function(e){return t.is.element(e)||t.is.collection(e)},element:function(e){return e instanceof t.Element&&e._private.single},collection:function(e){return e instanceof t.Collection&&!e._private.single},core:function(e){return e instanceof t.Core},style:function(e){return e instanceof t.Style},stylesheet:function(e){return e instanceof t.Stylesheet},event:function(e){return e instanceof t.Event},thread:function(e){return e instanceof t.Thread},fabric:function(e){return e instanceof t.Fabric},emptyString:function(e){return!e||!(!t.is.string(e)||""!==e&&!e.match(/^\s+$/))},nonemptyString:function(e){return!(!e||!t.is.string(e)||""===e||e.match(/^\s+$/))},domElement:function(t){return"undefined"!=typeof HTMLElement&&t instanceof HTMLElement},boundingBox:function(e){return t.is.plainObject(e)&&t.is.number(e.x1)&&t.is.number(e.x2)&&t.is.number(e.y1)&&t.is.number(e.y2)},promise:function(e){return t.is.object(e)&&t.is.fn(e.then)},touch:function(){return e&&("ontouchstart"in e||e.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return navigator.vendor.match(/kde/i)},khtmlEtc:function(){return t.is.khtml()||t.is.webkit()||t.is.chromium()},trident:function(){return"undefined"!=typeof ActiveXObject||!1},windows:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Win/i)},mac:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Mac/i)},linux:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Linux/i)},unix:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/X11/i)}}}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";t.util={extend:function(){var e,n,i,r,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||t.is.fn(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(e=arguments[l]))for(n in e)i=s[n],r=e[n],s!==r&&(c&&r&&(t.is.plainObject(r)||(o=t.is.array(r)))?(o?(o=!1,a=i&&t.is.array(i)?i:[]):a=i&&t.is.plainObject(i)?i:{},s[n]=t.util.extend(c,a,r)):void 0!==r&&(s[n]=r));return s},require:function(n,i,r){var o;r=t.util.extend({msgIfNotFound:!0},r);var a=!1,s=function(t){a=!0,i(t)},l=function(t){e&&(o=e[n]),void 0!==o&&s(o),t&&t()},u=function(){a||c(h)},c=function(t){if("undefined"!=typeof module&&module.exports&&require)try{o=require(n)}catch(e){}void 0!==o&&s(o),t&&t()},h=function(){a||d(p)},d=function(t){"undefined"!=typeof define&&define.amd&&require&&require([n],function(e){o=e,void 0!==o&&s(o),t&&t()},function(e){t&&t()})},p=function(){!a&&r.msgIfNotFound&&t.util.error("Cytoscape.js tried to pull in dependency `"+n+"` but no module (i.e. CommonJS, AMD, or window) was found")};l(u)},requires:function(e,n){for(var i=[],r=[],o=function(){for(var t=0;t<e.length;t++)if(!r[t])return;n.apply(n,i)},a=0;a<e.length;a++)!function(){var n=e[a],s=a;t.util.require(n,function(t){i[s]=t,r[s]=!0,o()})}()},throttle:function(e,n,i){var r=!0,o=!0;return i===!1?r=!1:t.is.plainObject(i)&&(r="leading"in i?i.leading:r,o="trailing"in i?i.trailing:o),i=i||{},i.leading=r,i.maxWait=n,i.trailing=o,t.util.debounce(e,n,i)},now:function(){return+new Date},debounce:function(e,n,i){var r,o,a,s,l,u,c,h=0,d=!1,p=!0;if(t.is.fn(e)){if(n=Math.max(0,n)||0,i===!0){var f=!0;p=!1}else t.is.plainObject(i)&&(f=i.leading,d="maxWait"in i&&(Math.max(n,i.maxWait)||0),p="trailing"in i?i.trailing:p);var g=function(){var i=n-(t.util.now()-s);if(0>=i){o&&clearTimeout(o);var d=c;o=u=c=void 0,d&&(h=t.util.now(),a=e.apply(l,r),u||o||(r=l=null))}else u=setTimeout(g,i)},v=function(){u&&clearTimeout(u),o=u=c=void 0,(p||d!==n)&&(h=t.util.now(),a=e.apply(l,r),u||o||(r=l=null))};return function(){if(r=arguments,s=t.util.now(),l=this,c=p&&(u||!f),d===!1)var i=f&&!u;else{o||f||(h=s);var y=d-(s-h),m=0>=y;m?(o&&(o=clearTimeout(o)),h=s,a=e.apply(l,r)):o||(o=setTimeout(v,y))}return m&&u?u=clearTimeout(u):u||n===d||(u=setTimeout(g,n)),i&&(m=!0,a=e.apply(l,r)),!m||u||o||(r=l=null),a}}},error:function(t){if(!console)throw t;if(console.error)console.error.apply(console,arguments);else{if(!console.log)throw t;console.log.apply(console,arguments)}},clone:function(t){var e={};for(var n in t)e[n]=t[n];return e},copy:function(e){return null==e?e:t.is.array(e)?e.slice():t.is.plainObject(e)?t.util.clone(e):e},makeBoundingBox:function(t){if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},mapEmpty:function(t){var e=!0;if(null!=t)for(var n in t){e=!1;break}return e},pushMap:function(e){var n=t.util.getMap(e);null==n?t.util.setMap($.extend({},e,{value:[e.value]})):n.push(e.value)},setMap:function(e){for(var n,i=e.map,r=e.keys,o=r.length,a=0;o>a;a++){var n=r[a];t.is.plainObject(n)&&t.util.error("Tried to set map with object key"),a<r.length-1?(null==i[n]&&(i[n]={}),i=i[n]):i[n]=e.value}},getMap:function(e){for(var n=e.map,i=e.keys,r=i.length,o=0;r>o;o++){var a=i[o];if(t.is.plainObject(a)&&t.util.error("Tried to get map with object key"),n=n[a],null==n)return n}return n},deleteMap:function(e){for(var n=e.map,i=e.keys,r=i.length,o=e.keepChildren,a=0;r>a;a++){var s=i[a];t.is.plainObject(s)&&t.util.error("Tried to delete map with object key");var l=a===e.keys.length-1;if(l)if(o)for(var u in n)o[u]||(n[u]=void 0);else n[s]=void 0;else n=n[s]}},capitalize:function(e){return t.is.emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},trim:function(t){var e,n;for(e=0;e<t.length&&" "===t[e];e++);for(n=t.length-1;n>e&&" "===t[n];n--);return t.substring(e,n+1)},hex2tuple:function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,n,i,r=4===t.length,o=16;return r?(e=parseInt(t[1]+t[1],o),n=parseInt(t[2]+t[2],o),i=parseInt(t[3]+t[3],o)):(e=parseInt(t[1]+t[2],o),n=parseInt(t[3]+t[4],o),i=parseInt(t[5]+t[6],o)),[e,n,i]}},hsl2tuple:function(e){function n(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t}var i,r,o,a,s,l,u,c,h=new RegExp("^"+t.util.regex.hsla+"$").exec(e);if(h){if(r=parseInt(h[1]),0>r?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,o=parseFloat(h[2]),0>o||o>100)return;if(o/=100,a=parseFloat(h[3]),0>a||a>100)return;if(a/=100,s=h[4],void 0!==s&&(s=parseFloat(s),0>s||s>1))return;if(0===o)l=u=c=Math.round(255*a);else{var d=.5>a?a*(1+o):a+o-a*o,p=2*a-d;l=Math.round(255*n(p,d,r+1/3)),u=Math.round(255*n(p,d,r)),c=Math.round(255*n(p,d,r-1/3))}i=[l,u,c,s]}return i},rgb2tuple:function(e){var n,i=new RegExp("^"+t.util.regex.rgba+"$").exec(e);if(i){n=[];for(var r=[],o=1;3>=o;o++){var a=i[o];if("%"===a[a.length-1]&&(r[o]=!0),a=parseFloat(a),r[o]&&(a=a/100*255),0>a||a>255)return;n.push(Math.floor(a))}var s=r[1]||r[2]||r[3],l=r[1]&&r[2]&&r[3];if(s&&!l)return;var u=i[4];if(void 0!==u){if(u=parseFloat(u),0>u||u>1)return;n.push(u)}}return n},colorname2tuple:function(e){return t.util.colors[e.toLowerCase()]},color2tuple:function(e){return(t.is.array(e)?e:null)||t.util.colorname2tuple(e)||t.util.hex2tuple(e)||t.util.rgb2tuple(e)||t.util.hsl2tuple(e)},tuple2hex:function(t){function e(t){var e=t.toString(16);return 1===e.length&&(e="0"+e),e}var n=t[0],i=t[1],r=t[2];return"#"+e(n)+e(i)+e(r)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},memoize:function(t,e){var n=this,i={};return e||(e=function(){if(1===arguments.length)return arguments[0];for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")}),function(){var r,o=arguments,a=e.apply(n,o);return(r=i[a])||(r=i[a]=t.apply(n,o)),r}}},t.util.camel2dash=t.util.memoize(function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=i.toLowerCase(),o=i!==r;o?(e.push("-"),e.push(r)):e.push(i)}var a=e.length===t.length;return a?t:e.join("")}),t.util.dash2camel=t.util.memoize(function(t){for(var e=[],n=!1,i=0;i<t.length;i++){var r=t[i],o="-"===r;o?n=!0:(e.push(n?r.toUpperCase():r),n=!1)}return e.join("")}),t.util.regex={},t.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)",t.util.regex.rgba="rgb[a]?\\(("+t.util.regex.number+"[%]?)\\s*,\\s*("+t.util.regex.number+"[%]?)\\s*,\\s*("+t.util.regex.number+"[%]?)(?:\\s*,\\s*("+t.util.regex.number+"))?\\)",t.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+t.util.regex.number+"[%]?)\\s*,\\s*(?:"+t.util.regex.number+"[%]?)\\s*,\\s*(?:"+t.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+t.util.regex.number+"))?\\)",t.util.regex.hsla="hsl[a]?\\(("+t.util.regex.number+")\\s*,\\s*("+t.util.regex.number+"[%])\\s*,\\s*("+t.util.regex.number+"[%])(?:\\s*,\\s*("+t.util.regex.number+"))?\\)",t.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+t.util.regex.number+")\\s*,\\s*(?:"+t.util.regex.number+"[%])\\s*,\\s*(?:"+t.util.regex.number+"[%])(?:\\s*,\\s*(?:"+t.util.regex.number+"))?\\)",
t.util.regex.hex3="\\#[0-9a-fA-F]{3}",t.util.regex.hex6="\\#[0-9a-fA-F]{6}";var n=e?e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame:null;n=n||function(t){t&&setTimeout(t,1e3/60)},t.util.requestAnimationFrame=function(t){n(t)}}(cytoscape,"undefined"==typeof window?null:window),function(t){"use strict";t.math={},t.math.signum=function(t){return t>0?1:0>t?-1:0},t.math.distance=function(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},t.math.qbezierAt=function(t,e,n,i){return(1-i)*(1-i)*t+2*(1-i)*i*e+i*i*n},t.math.qbezierPtAt=function(e,n,i,r){return{x:t.math.qbezierAt(e.x,n.x,i.x,r),y:t.math.qbezierAt(e.y,n.y,i.y,r)}},t.math.boundingBoxesIntersect=function(t,e){return!(t.x1>e.x2)&&(!(e.x1>t.x2)&&(!(t.x2<e.x1)&&(!(e.x2<t.x1)&&(!(t.y2<e.y1)&&(!(e.y2<t.y1)&&(!(t.y1>e.y2)&&!(e.y1>t.y2)))))))},t.math.inBoundingBox=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},t.math.pointInBoundingBox=function(t,e){return this.inBoundingBox(t,e.x,e.y)},t.math.roundRectangleIntersectLine=function(t,e,n,i,r,o,a){var s,l=this.getRoundRectangleRadius(r,o),u=r/2,c=o/2,h=n-u+l-a,d=i-c-a,p=n+u-l+a,f=d;if(s=this.finiteLinesIntersect(t,e,n,i,h,d,p,f,!1),s.length>0)return s;var g=n+u+a,v=i-c+l-a,y=g,m=i+c-l+a;if(s=this.finiteLinesIntersect(t,e,n,i,g,v,y,m,!1),s.length>0)return s;var x=n-u+l-a,b=i+c+a,w=n+u-l+a,_=b;if(s=this.finiteLinesIntersect(t,e,n,i,x,b,w,_,!1),s.length>0)return s;var E=n-u-a,T=i-c+l-a,D=E,S=i+c-l+a;if(s=this.finiteLinesIntersect(t,e,n,i,E,T,D,S,!1),s.length>0)return s;var N,C=n-u+l,L=i-c+l;if(N=this.intersectLineCircle(t,e,n,i,C,L,l+a),N.length>0&&N[0]<=C&&N[1]<=L)return[N[0],N[1]];var M=n+u-l,P=i-c+l;if(N=this.intersectLineCircle(t,e,n,i,M,P,l+a),N.length>0&&N[0]>=M&&N[1]<=P)return[N[0],N[1]];var k=n+u-l,I=i+c-l;if(N=this.intersectLineCircle(t,e,n,i,k,I,l+a),N.length>0&&N[0]>=k&&N[1]>=I)return[N[0],N[1]];var O=n-u+l,A=i+c-l;return N=this.intersectLineCircle(t,e,n,i,O,A,l+a),N.length>0&&N[0]<=O&&N[1]>=A?[N[0],N[1]]:[]},t.math.roundRectangleIntersectBox=function(t,e,n,i,r,o,a,s,l){var u=this.getRoundRectangleRadius(r,o),c=a-r/2-l,h=s-o/2+u-l,d=a+r/2+l,p=s+o/2-u+l,f=a-r/2+u-l,g=s-o/2-l,v=a+r/2-u+l,y=s+o/2+l,m=Math.min(t,n),x=Math.max(t,n),b=Math.min(e,i),w=Math.max(e,i);return!(c>x)&&(!(m>d)&&(!(g>w)&&(!(b>y)&&(c>=m&&x>=c&&h>=b&&w>=h||(d>=m&&x>=d&&h>=b&&w>=h||(d>=m&&x>=d&&p>=b&&w>=p||(c>=m&&x>=c&&p>=b&&w>=p||(m>=c&&d>=m&&b>=h&&p>=b||(x>=c&&d>=x&&b>=h&&p>=b||(x>=c&&d>=x&&w>=h&&p>=w||(m>=c&&d>=m&&w>=h&&p>=w||(f>=m&&x>=f&&g>=b&&w>=g||(v>=m&&x>=v&&g>=b&&w>=g||(v>=m&&x>=v&&y>=b&&w>=y||(f>=m&&x>=f&&y>=b&&w>=y||(m>=f&&v>=m&&b>=g&&y>=b||(x>=f&&v>=x&&b>=g&&y>=b||(x>=f&&v>=x&&w>=g&&y>=w||(m>=f&&v>=m&&w>=g&&y>=w||(!!this.boxIntersectEllipse(m,b,x,w,l,2*u,2*u,f+l,h+l)||(!!this.boxIntersectEllipse(m,b,x,w,l,2*u,2*u,v-l,h+l)||(!!this.boxIntersectEllipse(m,b,x,w,l,2*u,2*u,v-l,p-l)||!!this.boxIntersectEllipse(m,b,x,w,l,2*u,2*u,f+l,p-l)))))))))))))))))))))))},t.math.checkInBoundingCircle=function(t,e,n,i,r,o,a,s){return t=(t-a)/(r+i),e=(e-s)/(o+i),n>=t*t+e*e},t.math.boxInBezierVicinity=function(t,e,n,i,r,o,a,s,l,u,c){var h=.25*r+.5*a+.25*l,d=.25*o+.5*s+.25*u,p=Math.min(t,n)-c,f=Math.min(e,i)-c,g=Math.max(t,n)+c,v=Math.max(e,i)+c;if(r>=p&&g>=r&&o>=f&&v>=o)return 1;if(l>=p&&g>=l&&u>=f&&v>=u)return 1;if(h>=p&&g>=h&&d>=f&&v>=d)return 1;if(a>=p&&g>=a&&s>=f&&v>=s)return 1;var y=Math.min(r,h,l),m=Math.min(o,d,u),x=Math.max(r,h,l),b=Math.max(o,d,u);return y>g||p>x||m>v||f>b?0:1},t.math.checkBezierInBox=function(e,n,i,r,o,a,s,l,u,c,h){function d(h){var d=t.math.qbezierAt(o,s,u,h),p=t.math.qbezierAt(a,l,c,h);return d>=e&&i>=d&&p>=n&&r>=p}for(var p=0;1>=p;p+=.25)if(!d(p))return!1;return!0},t.math.checkStraightEdgeInBox=function(t,e,n,i,r,o,a,s,l){return r>=t&&n>=r&&a>=t&&n>=a&&o>=e&&i>=o&&s>=e&&i>=s},t.math.checkStraightEdgeCrossesBox=function(t,e,n,i,r,o,a,s,l){var u,c,h=Math.min(t,n)-l,d=Math.min(e,i)-l,p=Math.max(t,n)+l,f=Math.max(e,i)+l,g=a-r,v=r,y=s-o,m=o;if(Math.abs(g)<1e-4)return r>=h&&p>=r&&Math.min(o,s)<=d&&Math.max(o,s)>=f;var x=(h-v)/g;if(x>0&&1>=x&&(u=y*x+m,u>=d&&f>=u))return!0;var b=(p-v)/g;if(b>0&&1>=b&&(u=y*b+m,u>=d&&f>=u))return!0;var w=(d-m)/y;if(w>0&&1>=w&&(c=g*w+v,c>=h&&p>=c))return!0;var _=(f-m)/y;return _>0&&1>=_&&(c=g*_+v,c>=h&&p>=c)},t.math.checkBezierCrossesBox=function(t,e,n,i,r,o,a,s,l,u,c){var h=Math.min(t,n)-c,d=Math.min(e,i)-c,p=Math.max(t,n)+c,f=Math.max(e,i)+c;if(r>=h&&p>=r&&o>=d&&f>=o)return!0;if(l>=h&&p>=l&&u>=d&&f>=u)return!0;var g=r-2*a+l,v=-2*r+2*a,y=r,m=[];if(Math.abs(g)<1e-4){var x=(h-r)/v,b=(p-r)/v;m.push(x,b)}else{var w,_,E=v*v-4*g*(y-h);if(E>0){var T=Math.sqrt(E);w=(-v+T)/(2*g),_=(-v-T)/(2*g),m.push(w,_)}var D,S,N=v*v-4*g*(y-p);if(N>0){var T=Math.sqrt(N);D=(-v+T)/(2*g),S=(-v-T)/(2*g),m.push(D,S)}}m.sort(function(t,e){return t-e});var C=o-2*s+u,L=-2*o+2*s,M=o,P=[];if(Math.abs(C)<1e-4){var k=(d-o)/L,I=(f-o)/L;P.push(k,I)}else{var O,A,R=L*L-4*C*(M-d);if(R>0){var T=Math.sqrt(R);O=(-L+T)/(2*C),A=(-L-T)/(2*C),P.push(O,A)}var B,F,z=L*L-4*C*(M-f);if(z>0){var T=Math.sqrt(z);B=(-L+T)/(2*C),F=(-L-T)/(2*C),P.push(B,F)}}P.sort(function(t,e){return t-e});for(var q=0;q<m.length;q+=2)for(var j=1;j<P.length;j+=2)if(m[q]<P[j]&&P[j]>=0&&m[q]<=1&&m[q+1]>P[j-1]&&P[j-1]<=1&&m[q+1]>=0)return!0;return!1},t.math.inLineVicinity=function(t,e,n,i,r,o,a){var s=a,l=Math.min(n,r),u=Math.max(n,r),c=Math.min(i,o),h=Math.max(i,o);return t>=l-s&&u+s>=t&&e>=c-s&&h+s>=e},t.math.inBezierVicinity=function(t,e,n,i,r,o,a,s,l){var u={x1:Math.min(n,a,r),x2:Math.max(n,a,r),y1:Math.min(i,s,o),y2:Math.max(i,s,o)};return!(t<u.x1||t>u.x2||e<u.y1||e>u.y2)},t.math.solveCubic=function(t,e,n,i,r){e/=t,n/=t,i/=t;var o,a,s,l,u,c,h,d;return a=(3*n-e*e)/9,s=-(27*i)+e*(9*n-2*e*e),s/=54,o=a*a*a+s*s,r[1]=0,h=e/3,o>0?(u=s+Math.sqrt(o),u=0>u?-Math.pow(-u,1/3):Math.pow(u,1/3),c=s-Math.sqrt(o),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),r[0]=-h+u+c,h+=(u+c)/2,r[4]=r[2]=-h,h=Math.sqrt(3)*(-c+u)/2,r[3]=h,void(r[5]=-h)):(r[5]=r[3]=0,0===o?(d=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),r[0]=-h+2*d,void(r[4]=r[2]=-(d+h))):(a=-a,l=a*a*a,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(a),r[0]=-h+d*Math.cos(l/3),r[2]=-h+d*Math.cos((l+2*Math.PI)/3),void(r[4]=-h+d*Math.cos((l+4*Math.PI)/3))))},t.math.sqDistanceToQuadraticBezier=function(t,e,n,i,r,o,a,s){var l=1*n*n-4*n*r+2*n*a+4*r*r-4*r*a+a*a+i*i-4*i*o+2*i*s+4*o*o-4*o*s+s*s,u=9*n*r-3*n*n-3*n*a-6*r*r+3*r*a+9*i*o-3*i*i-3*i*s-6*o*o+3*o*s,c=3*n*n-6*n*r+n*a-n*t+2*r*r+2*r*t-a*t+3*i*i-6*i*o+i*s-i*e+2*o*o+2*o*e-s*e,h=1*n*r-n*n+n*t-r*t+i*o-i*i+i*e-o*e,d=[];this.solveCubic(l,u,c,h,d);for(var p=1e-7,f=[],g=0;6>g;g+=2)Math.abs(d[g+1])<p&&d[g]>=0&&d[g]<=1&&f.push(d[g]);f.push(1),f.push(0);for(var v,y,m,x,b=-1,w=0;w<f.length;w++)y=Math.pow(1-f[w],2)*n+2*(1-f[w])*f[w]*r+f[w]*f[w]*a,m=Math.pow(1-f[w],2)*i+2*(1-f[w])*f[w]*o+f[w]*f[w]*s,x=Math.pow(y-t,2)+Math.pow(m-e,2),b>=0?b>x&&(b=x,v=f[w]):(b=x,v=f[w]);return b},t.math.sqDistanceToFiniteLine=function(t,e,n,i,r,o){var a=[t-n,e-i],s=[r-n,o-i],l=s[0]*s[0]+s[1]*s[1],u=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/l;return 0>c?u:h>l?(t-r)*(t-r)+(e-o)*(e-o):u-h},t.math.pointInsidePolygon=function(t,e,n,i,r,o,a,s,l){var u=new Array(n.length),c=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1]));s[0]<0?c+=Math.PI/2:c=-c-Math.PI/2;for(var h=Math.cos(-c),d=Math.sin(-c),p=0;p<u.length/2;p++)u[2*p]=o/2*(n[2*p]*h-n[2*p+1]*d),u[2*p+1]=a/2*(n[2*p+1]*h+n[2*p]*d),u[2*p]+=i,u[2*p+1]+=r;var f;if(l>0){var g=this.expandPolygon(u,-l);f=this.joinLines(g)}else f=u;for(var v,y,m,x,b,w=0,_=0,p=0;p<f.length/2;p++)if(v=f[2*p],y=f[2*p+1],p+1<f.length/2?(m=f[2*(p+1)],x=f[2*(p+1)+1]):(m=f[2*(p+1-f.length/2)],x=f[2*(p+1-f.length/2)+1]),v==t&&m==t);else{if(!(v>=t&&t>=m||t>=v&&m>=t))continue;b=(t-v)/(m-v)*(x-y)+y,b>e&&w++,e>b&&_++}return w%2!==0},t.math.joinLines=function(t){for(var e,n,i,r,o,a,s,l,u=new Array(t.length/2),c=0;c<t.length/4;c++){e=t[4*c],n=t[4*c+1],i=t[4*c+2],r=t[4*c+3],c<t.length/4-1?(o=t[4*(c+1)],a=t[4*(c+1)+1],s=t[4*(c+1)+2],l=t[4*(c+1)+3]):(o=t[0],a=t[1],s=t[2],l=t[3]);var h=this.finiteLinesIntersect(e,n,i,r,o,a,s,l,!0);u[2*c]=h[0],u[2*c+1]=h[1]}return u},t.math.expandPolygon=function(t,e){for(var n,i,r,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){n=t[2*s],i=t[2*s+1],s<t.length/2-1?(r=t[2*(s+1)],o=t[2*(s+1)+1]):(r=t[0],o=t[1]);var l=o-i,u=-(r-n),c=Math.sqrt(l*l+u*u),h=l/c,d=u/c;a[4*s]=n+h*e,a[4*s+1]=i+d*e,a[4*s+2]=r+h*e,a[4*s+3]=o+d*e}return a},t.math.intersectLineEllipse=function(t,e,n,i,r,o){var a=n-t,s=i-e;a/=r,s/=o;var l=Math.sqrt(a*a+s*s),u=l-1;if(0>u)return[];var c=u/l;return[(n-t)*c+t,(i-e)*c+e]},t.math.dotProduct=function(t,e){if(2!=t.length||2!=e.length)throw"dot product: arguments are not vectors";return t[0]*e[0]+t[1]*e[1]},t.math.intersectLineCircle=function(t,e,n,i,r,o,a){var s=[n-t,i-e],l=[r,o],u=[t-r,e-o],c=s[0]*s[0]+s[1]*s[1],h=2*(u[0]*s[0]+u[1]*s[1]),l=u[0]*u[0]+u[1]*u[1]-a*a,d=h*h-4*c*l;if(0>d)return[];var p=(-h+Math.sqrt(d))/(2*c),f=(-h-Math.sqrt(d))/(2*c),g=Math.min(p,f),v=Math.max(p,f),y=[];if(g>=0&&1>=g&&y.push(g),v>=0&&1>=v&&y.push(v),0===y.length)return[];var m=y[0]*s[0]+t,x=y[0]*s[1]+e;if(y.length>1){if(y[0]==y[1])return[m,x];var b=y[1]*s[0]+t,w=y[1]*s[1]+e;return[m,x,b,w]}return[m,x]},t.math.findCircleNearPoint=function(t,e,n,i,r){var o=i-t,a=r-e,s=Math.sqrt(o*o+a*a),l=o/s,u=a/s;return[t+l*n,e+u*n]},t.math.findMaxSqDistanceToOrigin=function(t){for(var e,n=1e-6,i=0;i<t.length/2;i++)e=t[2*i]*t[2*i]+t[2*i+1]*t[2*i+1],e>n&&(n=e);return n},t.math.finiteLinesIntersect=function(t,e,n,i,r,o,a,s,l){var u=(a-r)*(e-o)-(s-o)*(t-r),c=(n-t)*(e-o)-(i-e)*(t-r),h=(s-o)*(n-t)-(a-r)*(i-e);if(0!==h){var d=u/h,p=c/h;return d>=0&&1>=d&&p>=0&&1>=p?[t+d*(n-t),e+d*(i-e)]:l?[t+d*(n-t),e+d*(i-e)]:[]}return 0===u||0===c?[t,n,a].sort()[1]===a?[a,s]:[t,n,r].sort()[1]===r?[r,o]:[r,a,n].sort()[1]===n?[n,i]:[]:[]},t.math.boxIntersectEllipse=function(t,e,n,i,r,o,a,s,l){if(t>n){var u=t;t=n,n=u}if(e>i){var c=e;e=i,i=c}var h=[s-o/2-r,l],d=[s+o/2+r,l],p=[s,l-a/2-r],f=[s,l+a/2+r];return!(n<h[0])&&(!(t>d[0])&&(!(e>f[1])&&(!(i<p[1])&&(t<=d[0]&&d[0]<=n&&e<=d[1]&&d[1]<=i||(t<=h[0]&&h[0]<=n&&e<=h[1]&&h[1]<=i||(t<=p[0]&&p[0]<=n&&e<=p[1]&&p[1]<=i||(t<=f[0]&&f[0]<=n&&e<=f[1]&&f[1]<=i||(t=(t-s)/(o/2+r),n=(n-s)/(o/2+r),e=(e-l)/(a/2+r),i=(i-l)/(a/2+r),1>=t*t+e*e||(1>=n*n+e*e||(1>=n*n+i*i||1>=t*t+i*i))))))))))},t.math.boxIntersectPolygon=function(e,n,i,r,o,a,s,l,u,c,h){if(e>i){var d=e;e=i,i=d}if(n>r){var p=n;n=r,r=p}var f=new Array(o.length),g=Math.asin(c[1]/Math.sqrt(c[0]*c[0]+c[1]*c[1]));c[0]<0?g+=Math.PI/2:g=-g-Math.PI/2;for(var v=Math.cos(-g),y=Math.sin(-g),m=0;m<f.length/2;m++)f[2*m]=a/2*(o[2*m]*v-o[2*m+1]*y),f[2*m+1]=s/2*(o[2*m+1]*v+o[2*m]*y),f[2*m]+=l,f[2*m+1]+=u;for(var x=f[0],b=f[0],w=f[1],_=f[1],m=1;m<f.length/2;m++)f[2*m]>b&&(b=f[2*m]),f[2*m]<x&&(x=f[2*m]),f[2*m+1]>_&&(_=f[2*m+1]),f[2*m+1]<w&&(w=f[2*m+1]);if(x-h>i)return!1;if(e>b+h)return!1;if(w-h>r)return!1;if(n>_+h)return!1;var E;if(h>0){var T=t.math.expandPolygon(f,-h);E=t.math.joinLines(T)}else E=f;for(var m=0;m<f.length/2;m++)if(e<=f[2*m]&&f[2*m]<=i&&n<=f[2*m+1]&&f[2*m+1]<=r)return!0;for(var m=0;m<E.length/2;m++){var D,S,N=E[2*m],C=E[2*m+1];if(m<E.length/2-1?(D=E[2*(m+1)],S=E[2*(m+1)+1]):(D=E[0],S=E[1]),t.math.finiteLinesIntersect(N,C,D,S,e,n,i,n,!1).length>0)return!0;if(t.math.finiteLinesIntersect(N,C,D,S,e,r,i,r,!1).length>0)return!0;if(t.math.finiteLinesIntersect(N,C,D,S,e,n,e,r,!1).length>0)return!0;if(t.math.finiteLinesIntersect(N,C,D,S,i,n,i,r,!1).length>0)return!0}return!1},t.math.polygonIntersectLine=function(e,n,i,r,o,a,s,l){for(var u,c=[],h=new Array(i.length),d=0;d<h.length/2;d++)h[2*d]=i[2*d]*a+r,h[2*d+1]=i[2*d+1]*s+o;var p;if(l>0){var f=t.math.expandPolygon(h,-l);p=t.math.joinLines(f)}else p=h;for(var g,v,y,m,d=0;d<p.length/2;d++)g=p[2*d],v=p[2*d+1],d<p.length/2-1?(y=p[2*(d+1)],m=p[2*(d+1)+1]):(y=p[0],m=p[1]),u=this.finiteLinesIntersect(e,n,r,o,g,v,y,m),0!==u.length&&c.push(u[0],u[1]);return c},t.math.shortenIntersection=function(t,e,n){var i=[t[0]-e[0],t[1]-e[1]],r=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=(r-n)/r;return 0>o&&(o=1e-5),[e[0]+o*i[0],e[1]+o*i[1]]},t.math.generateUnitNgonPointsFitToSquare=function(e,n){var i=t.math.generateUnitNgonPoints(e,n);return i=t.math.fitPolygonToSquare(i)},t.math.fitPolygonToSquare=function(t){for(var e,n,i=t.length/2,r=1/0,o=1/0,a=-(1/0),s=-(1/0),l=0;i>l;l++)e=t[2*l],n=t[2*l+1],r=Math.min(r,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var u=2/(a-r),c=2/(s-o),l=0;i>l;l++)e=t[2*l]=t[2*l]*u,n=t[2*l+1]=t[2*l+1]*c,r=Math.min(r,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(-1>o)for(var l=0;i>l;l++)n=t[2*l+1]=t[2*l+1]+(-1-o);return t},t.math.generateUnitNgonPoints=function(t,e){var n=1/t*2*Math.PI,i=t%2===0?Math.PI/2+n/2:Math.PI/2;i+=e;for(var r,o,a,s=new Array(2*t),l=0;t>l;l++)r=l*n+i,o=s[2*l]=Math.cos(r),a=s[2*l+1]=Math.sin(-r);return s},t.math.getRoundRectangleRadius=function(t,e){return Math.min(t/4,e/4,8)}}(cytoscape),function(t){"use strict";function e(e,n,i){var r={};switch(r[n]=i,e){case"core":case"collection":t.fn[e](r)}if("layout"===e){for(var a=i.prototype,s=[],l=0;l<s.length;l++){var u=s[l];a[u]=a[u]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this}),a.stop||(a.stop=function(){var t=this.options;return t&&t.animate&&t.eles.stop(),this}),a.on=t.define.on({layout:!0}),a.one=t.define.on({layout:!0,unbindSelfOnTrigger:!0}),a.once=t.define.on({layout:!0,unbindAllBindersOnTrigger:!0}),a.off=t.define.off({layout:!0}),a.trigger=t.define.trigger({layout:!0}),t.define.eventAliasesOn(a)}return t.util.setMap({map:o,keys:[e,n],value:i})}function n(e,n){return t.util.getMap({map:o,keys:[e,n]})}function i(e,n,i,r,o){return t.util.setMap({map:a,keys:[e,n,i,r],value:o})}function r(e,n,i,r){return t.util.getMap({map:a,keys:[e,n,i,r]})}var o={};t.extensions=o;var a={};t.modules=a,t.extension=function(){return 2==arguments.length?n.apply(this,arguments):3==arguments.length?e.apply(this,arguments):4==arguments.length?r.apply(this,arguments):5==arguments.length?i.apply(this,arguments):void t.util.error("Invalid extension access syntax")}}(cytoscape),function(t,e){"use strict";var n=function(t){var e=t[0]._cyreg=t[0]._cyreg||{};return e};e.registerJquery=function(t){t&&(t.fn.cytoscape||(t.fn.cytoscape=function(i){var r=t(this);if("get"===i)return n(r).cy;if(e.is.fn(i)){var o=i,a=n(r).cy;if(a&&a.isReady())a.trigger("ready",[],o);else{var s=n(r),l=s.readies=s.readies||[];l.push(o)}}else if(e.is.plainObject(i))return r.each(function(){var e=t.extend({},i,{container:t(this)[0]});cytoscape(e)})},t.cytoscape=cytoscape,null==t.fn.cy&&null==t.cy&&(t.fn.cy=t.fn.cytoscape,t.cy=t.cytoscape)))},e.registerJquery(t),e.util.require("jquery",function(t){e.registerJquery(t)})}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(t){"use strict";function e(){return!1}function n(){return!0}t.Event=function(i,r){return this instanceof t.Event?(i&&i.type?(this.originalEvent=i,this.type=i.type,this.isDefaultPrevented=i.defaultPrevented?n:e):this.type=i,r&&(this.type=void 0!==r.type?r.type:this.type,this.cy=r.cy,this.cyTarget=r.cyTarget,this.cyPosition=r.cyPosition,this.cyRenderedPosition=r.cyRenderedPosition,this.namespace=r.namespace,this.layout=r.layout,this.data=r.data,this.message=r.message),void(this.timeStamp=i&&i.timeStamp||+new Date)):new t.Event(i,r)},t.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=n;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n,this.stopPropagation()},isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e}}(cytoscape),function(t){"use strict";t.define={data:function(e){var n={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(t){},canSet:function(t){return!0}};return e=t.util.extend({},n,e),function(n,i){var r=e,o=this,a=void 0!==o.length,s=a?o:[o],l=a?o[0]:o;if(t.is.string(n)){if(r.allowGetting&&void 0===i){var u;return l&&(u=l._private[r.field][n]),u}if(r.allowSetting&&void 0!==i){var c=!r.immutableKeys[n];if(c){for(var h=0,d=s.length;d>h;h++)r.canSet(s[h])&&(s[h]._private[r.field][n]=i);r.updateStyle&&o.updateStyle(),r.onSet(o),r.settingTriggersEvent&&o[r.triggerFnName](r.settingEvent)}}}else if(r.allowSetting&&t.is.plainObject(n)){var p,f,g=n;for(p in g){f=g[p];var c=!r.immutableKeys[p];if(c)for(var h=0,d=s.length;d>h;h++)r.canSet(s[h])&&(s[h]._private[r.field][p]=f)}r.updateStyle&&o.updateStyle(),r.onSet(o),r.settingTriggersEvent&&o[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&t.is.fn(n)){var v=n;o.bind(r.bindingEvent,v)}else if(r.allowGetting&&void 0===n){var u;return l&&(u=l._private[r.field]),u}return o}},removeData:function(e){var n={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=t.util.extend({},n,e),function(n){var i=e,r=this,o=void 0!==r.length,a=o?r:[r];if(t.is.string(n)){for(var s=n.split(/\s+/),l=s.length,u=0;l>u;u++){var c=s[u];if(!t.is.emptyString(c)){var h=!i.immutableKeys[c];if(h)for(var d=0,p=a.length;p>d;d++)a[d]._private[i.field][c]=void 0}}i.triggerEvent&&r[i.triggerFnName](i.event)}else if(void 0===n){for(var d=0,p=a.length;p>d;d++){var f=a[d]._private[i.field];for(var c in f){var g=!i.immutableKeys[c];g&&(f[c]=void 0)}}i.triggerEvent&&r[i.triggerFnName](i.event)}return r}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(e){var n={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return e=t.util.extend({},n,e),function(n,i,r,o){var a=this,s=void 0!==a.length,l=s?a:[a],u=t.is.string(n),c=e;if(t.is.plainObject(i)?(o=r,r=i,i=void 0):(t.is.fn(i)||i===!1)&&(o=i,r=void 0,i=void 0),(t.is.fn(r)||r===!1)&&(o=r,r=void 0),!t.is.fn(o)&&o!==!1&&u)return a;if(u){var h={};h[n]=o,n=h}for(var d in n)if(o=n[d],o===!1&&(o=t.define.event.falseCallback),t.is.fn(o)){d=d.split(/\s+/);for(var p=0;p<d.length;p++){var f=d[p];if(!t.is.emptyString(f)){var g=f.match(t.define.event.regex);if(g)for(var v=g[1],y=g[2]?g[2]:void 0,m={callback:o,data:r,delegated:!!i,selector:i,selObj:new t.Selector(i),type:v,namespace:y,unbindSelfOnTrigger:c.unbindSelfOnTrigger,unbindAllBindersOnTrigger:c.unbindAllBindersOnTrigger,binders:l},x=0;x<l.length;x++){var b=l[x]._private;b.listeners=b.listeners||[],b.listeners.push(m)}}}}return a}},eventAliasesOn:function(e){var n=e;n.addListener=n.listen=n.bind=n.on,n.removeListener=n.unlisten=n.unbind=n.off,n.emit=n.trigger,n.pon=n.promiseOn=function(e,n){var i=this,r=Array.prototype.slice.call(arguments,0);return new t.Promise(function(t,e){var n=function(e){i.off.apply(i,a),t(e)},o=r.concat([n]),a=o.concat([]);i.on.apply(i,o)})}},off:function(e){var n={};return e=t.util.extend({},n,e),function(e,n,i){var r=this,o=void 0!==r.length,a=o?r:[r],s=t.is.string(e);if(0===arguments.length){for(var l=0;l<a.length;l++)a[l]._private.listeners=[];return r}if((t.is.fn(n)||n===!1)&&(i=n,n=void 0),s){var u={};u[e]=i,e=u}for(var c in e){i=e[c],i===!1&&(i=t.define.event.falseCallback),c=c.split(/\s+/);for(var h=0;h<c.length;h++){var d=c[h];if(!t.is.emptyString(d)){var p=d.match(t.define.event.optionalTypeRegex);if(p)for(var f=p[1]?p[1]:void 0,g=p[2]?p[2]:void 0,l=0;l<a.length;l++)for(var v=a[l]._private.listeners=a[l]._private.listeners||[],y=0;y<v.length;y++){var m=v[y],x=!g||g===m.namespace,b=!f||m.type===f,w=!i||i===m.callback,_=x&&b&&w;_&&(v.splice(y,1),y--)}}}}return r}},trigger:function(e){var n={};return e=t.util.extend({},n,e),function(n,i,r){var o=this,a=void 0!==o.length,s=a?o:[o],l=t.is.string(n),u=t.is.plainObject(n),c=t.is.event(n),h=this._private.cy||(t.is.core(this)?this:null),d=!!h&&h.hasCompoundNodes();if(l){var p=n.split(/\s+/);n=[];for(var f=0;f<p.length;f++){var g=p[f];if(!t.is.emptyString(g)){var v=g.match(t.define.event.regex),y=v[1],m=v[2]?v[2]:void 0;n.push({type:y,namespace:m})}}}else if(u){var x=n;n=[x]}i?t.is.array(i)||(i=[i]):i=[];for(var f=0;f<n.length;f++)for(var b=n[f],w=0;w<s.length;w++){var g,_=s[w],E=_._private.listeners=_._private.listeners||[],T=t.is.element(_),D=T||e.layout;if(c?(g=b,g.cyTarget=g.cyTarget||_,g.cy=g.cy||h):g=new t.Event(b,{cyTarget:_,cy:h,namespace:b.namespace}),b.layout&&(g.layout=b.layout),e.layout&&(g.layout=_),g.cyPosition){var S=g.cyPosition,N=h.zoom(),C=h.pan();g.cyRenderedPosition={x:S.x*N+C.x,y:S.y*N+C.y}}r&&(E=[{namespace:g.namespace,type:g.type,callback:r}]);for(var L=0;L<E.length;L++){var M=E[L],P=!M.namespace||M.namespace===g.namespace,k=M.type===g.type,I=!M.delegated||_!==g.cyTarget&&t.is.element(g.cyTarget)&&M.selObj.matches(g.cyTarget),O=P&&k&&I;if(O){var A=[g];if(A=A.concat(i),g.data=M.data?M.data:void 0,(M.unbindSelfOnTrigger||M.unbindAllBindersOnTrigger)&&(E.splice(L,1),L--),M.unbindAllBindersOnTrigger)for(var R=M.binders,B=0;B<R.length;B++){var F=R[B];if(F&&F!==_)for(var z=F._private.listeners,q=0;q<z.length;q++){var j=z[q];j===M&&(z.splice(q,1),q--)}}var X=M.delegated?g.cyTarget:_,Y=M.callback.apply(X,A);(Y===!1||g.isPropagationStopped())&&(D=!1,Y===!1&&(g.stopPropagation(),g.preventDefault()))}}if(D){var V=d?_._private.parent:null,G=null!=V&&0!==V.length;G?(V=V[0],V.trigger(g)):h.trigger(g)}}return o}},animated:function(e){var n={};return e=t.util.extend({},n,e),function(){var t=this,e=void 0!==t.length,n=e?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return!1;var r=n[0];return r?r._private.animation.current.length>0:void 0}},clearQueue:function(e){var n={};return e=t.util.extend({},n,e),function(){var t=this,e=void 0!==t.length,n=e?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var r=0;r<n.length;r++){var o=n[r];o._private.animation.queue=[]}return this}},delay:function(e){var n={};return e=t.util.extend({},n,e),function(t,e){var n=this._private.cy||this;return n.styleEnabled()?(this.animate({delay:t},{duration:t,complete:e}),this):this}},animate:function(e){var n={};return e=t.util.extend({},n,e),function(t,e){var n=this,i=void 0!==n.length,r=i?n:[n],o=this._private.cy||this,a=!i,s=!a;if(!o.styleEnabled())return this;var l,u=+new Date,c=o.style();switch(void 0===e&&(e={}),void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}var h=!0;if(t)for(var d in t){h=!1;break}if(h)return this;if(s&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),t.renderedPosition&&s){var p=t.renderedPosition,f=o.pan(),g=o.zoom();t.position={x:(p.x-f.x)/g,y:(p.y-f.y)/g}}if(t.panBy&&a){var v=t.panBy,y=o.pan();t.pan={x:y.x+v.x,y:y.y+v.y}}var m=t.center||t.centre;if(m&&a){var x=o.getCenterPan(m.eles,t.zoom);x&&(t.pan=x)}if(t.fit&&a){var b=t.fit,w=o.getFitViewport(b.eles||b.boundingBox,b.padding);w&&(t.pan=w.pan,t.zoom=w.zoom)}for(var d=0;d<r.length;d++){var _=r[d];l=_.animated()&&(void 0===e.queue||e.queue)?_._private.animation.queue:_._private.animation.current,l.push({properties:t,duration:e.duration,params:e,callTime:u})}return s&&o.addToAnimationPool(this),this}},stop:function(e){var n={};return e=t.util.extend({},n,e),function(t,e){var n=this,i=void 0!==n.length,r=i?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<r.length;a++){for(var s=r[a],l=s._private.animation.current,u=0;u<l.length;u++){var c=l[u];e&&(c.duration=0)}t&&(s._private.animation.queue=[]),e||(s._private.animation.current=[])}return o.notify({collection:this,type:"draw"}),this}}}}(cytoscape),function(t){"use strict";t.fn.selector=function(e,n){for(var i in e){var r=e[i];t.Selector.prototype[i]=r}},t.Selector=function(e,n){if(!(this instanceof t.Selector))return new t.Selector(e,n);void 0===n&&void 0!==e&&(n=e,e=void 0);var i=this;if(i._private={selectorText:null,invalid:!0},!n||t.is.string(n)&&n.match(/^\s*$/))null==e?i.length=0:(i[0]=a(),i[0].group=e,i.length=1);else if(t.is.element(n)){var r=new t.Collection(i.cy(),[n]);i[0]=a(),i[0].collection=r,i.length=1}else if(t.is.collection(n))i[0]=a(),i[0].collection=n,i.length=1;else if(t.is.fn(n))i[0]=a(),i[0].filter=n,i.length=1;else{if(!t.is.string(n))return void t.util.error("A selector must be created from a string; found "+n);var o=null,a=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},s={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:t.util.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};s.variable="(?:[\\w-]|(?:\\\\"+s.metaChar+"))+",s.value=s.string+"|"+s.number,s.className=s.variable,s.id=s.variable;for(var l=function(t){return t.replace(new RegExp("\\\\("+s.metaChar+")","g"),function(t,e,n,i){return e})},u=s.comparatorOp.split("|"),c=0;c<u.length;c++){var h=u[c];s.comparatorOp+="|@"+h}for(var u=s.comparatorOp.split("|"),c=0;c<u.length;c++){var h=u[c];h.indexOf("!")>=0||"="!==h&&(s.comparatorOp+="|\\!"+h)}var d={group:{query:!0,regex:"(node|edge|\\*)",populate:function(t){this.group="*"==t?t:t+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(t){this.colonSelectors.push(t)}},id:{query:!0,regex:"\\#("+s.id+")",populate:function(t){this.ids.push(l(t))}},className:{query:!0,regex:"\\.("+s.className+")",populate:function(t){this.classes.push(l(t))}},dataExists:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*\\]",populate:function(t){this.data.push({field:l(t)})}},dataCompare:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*("+s.comparatorOp+")\\s*("+s.value+")\\s*\\]",populate:function(t,e,n){var i=null!=new RegExp("^"+s.string+"$").exec(n);n=i?n.substring(1,n.length-1):parseFloat(n),this.data.push({field:l(t),operator:e,value:n})}},dataBool:{query:!0,regex:"\\[\\s*("+s.boolOp+")\\s*("+s.variable+")\\s*\\]",populate:function(t,e){this.data.push({field:l(e),operator:t})}},metaCompare:{query:!0,regex:"\\[\\[\\s*("+s.meta+")\\s*("+s.comparatorOp+")\\s*("+s.number+")\\s*\\]\\]",populate:function(t,e,n){this.meta.push({field:l(t),operator:e,value:parseFloat(n)})}},nextQuery:{separator:!0,regex:s.separator,populate:function(){i[++c]=a(),o=null}},child:{separator:!0,regex:s.child,populate:function(){var t=a();t.parent=this,t.subject=o,i[c]=t}},descendant:{separator:!0,regex:s.descendant,populate:function(){var t=a();t.ancestor=this,t.subject=o,i[c]=t}},subject:{modifier:!0,regex:s.subject,populate:function(){return null!=o&&this.subject!=this?(t.util.error("Redefinition of subject in selector `"+n+"`"),!1):(o=this,void(this.subject=this))}}},p=0;for(var f in d)d[p]=d[f],d[p].name=f,p++;d.length=p,i._private.selectorText=n;var g=n,c=0,v=function(e){for(var n,i,r,o=0;o<d.length;o++){var a=d[o],s=a.name;if(!t.is.fn(e)||e(s,a)){var l=g.match(new RegExp("^"+a.regex));if(null!=l){i=l,n=a,r=s;var u=l[0];g=g.substring(u.length);break}}}return{expr:n,match:i,name:r}},y=function(){var t=g.match(/^\s+/);if(t){var e=t[0];g=g.substring(e.length)}};for(i[0]=a(),y();;){var m=v();if(null==m.expr)return void t.util.error("The selector `"+n+"`is invalid");for(var x=[],p=1;p<m.match.length;p++)x.push(m.match[p]);var b=m.expr.populate.apply(i[c],x);if(b===!1)return;if(g.match(/^\s*$/))break}for(i.length=c+1,p=0;p<i.length;p++){var w=i[p];if(null!=w.subject){for(;w.subject!=w;)if(null!=w.parent){var _=w.parent,E=w;E.parent=null,_.child=E,w=_}else{if(null==w.ancestor){t.util.error("When adjusting references for the selector `"+w+"`, neither parent nor ancestor was found");break}var T=w.ancestor,D=w;D.ancestor=null,T.descendant=D,w=T}i[p]=w.subject}}if(null!=e)for(var p=0;p<i.length;p++){if(null!=i[p].group&&i[p].group!=e)return void t.util.error("Group `"+i[p].group+"` conflicts with implicit group `"+e+"` in selector `"+n+"`");i[p].group=e}}i._private.invalid=!1},t.selfn=t.Selector.prototype,t.selfn.size=function(){return this.length},t.selfn.eq=function(t){return this[t]},t.selfn.find=function(){};var e=function(n,i){if(null!=n.group&&"*"!=n.group&&n.group!=i._private.group)return!1;for(var r=i.cy(),o=!0,a=0;a<n.colonSelectors.length;a++){var s=n.colonSelectors[a];switch(s){case":selected":o=i.selected();break;case":unselected":o=!i.selected();break;case":selectable":o=i.selectable();break;case":unselectable":o=!i.selectable();break;case":locked":o=i.locked();break;case":unlocked":o=!i.locked();break;case":visible":o=i.visible();break;case":hidden":o=!i.visible();break;case":transparent":o=i.transparent();break;case":grabbed":o=i.grabbed();break;case":free":o=!i.grabbed();break;case":removed":o=i.removed();break;case":inside":o=!i.removed();break;case":grabbable":o=i.grabbable();break;case":ungrabbable":o=!i.grabbable();break;case":animated":o=i.animated();break;case":unanimated":o=!i.animated();break;case":parent":o=i.isNode()&&i.children().nonempty();break;case":child":case":nonorphan":o=i.isNode()&&i.parent().nonempty();break;case":orphan":o=i.isNode()&&i.parent().empty();break;case":loop":o=i.isEdge()&&i.data("source")===i.data("target");break;case":simple":o=i.isEdge()&&i.data("source")!==i.data("target");break;case":active":o=i.active();break;case":inactive":o=!i.active();break;case":touch":o=t.is.touch();break;case":backgrounding":o=i.backgrounding();break;case":nonbackgrounding":o=!i.backgrounding()}if(!o)break}if(!o)return!1;for(var l=!0,a=0;a<n.ids.length;a++){var u=n.ids[a],c=i._private.data.id;if(l=l&&u==c,!l)break}if(!l)return!1;for(var h=!0,a=0;a<n.classes.length;a++){var d=n.classes[a];if(h=h&&i.hasClass(d),!h)break}if(!h)return!1;var p=function(e){for(var i=!0,r=0;r<n[e.name].length;r++){var o,a=n[e.name][r],s=a.operator,l=a.value,u=a.field;if(null!=s&&null!=l){var c=e.fieldValue(u),h=t.is.string(c)||t.is.number(c)?""+c:"",d=""+l,p=!1;s.indexOf("@")>=0&&(h=h.toLowerCase(),d=d.toLowerCase(),s=s.replace("@",""),p=!0);var f=!1,g=!1;switch(s.indexOf("!")>=0&&(s=s.replace("!",""),f=!0),p&&(l=d.toLowerCase(),c=h.toLowerCase()),s){case"*=":o=h.search(d)>=0;break;case"$=":o=null!=new RegExp(d+"$").exec(h);break;case"^=":o=null!=new RegExp("^"+d).exec(h);break;case"=":o=c===l;break;case"!=":o=c!==l;break;case">":o=f?l>=c:c>l,g=!0;break;case">=":o=f?l>c:c>=l,g=!0;break;case"<":o=f?c>=l:l>c,g=!0;break;case"<=":o=f?c>l:l>=c,g=!0;break;default:o=!1}}else if(null!=s)switch(s){case"?":o=e.fieldTruthy(u);break;case"!":o=!e.fieldTruthy(u);break;case"^":o=e.fieldUndefined(u)}else o=!e.fieldUndefined(u);if(f&&!g&&(o=!o,g=!0),!o){i=!1;break}}return i},f=p({name:"data",fieldValue:function(t){return i._private.data[t]},fieldRef:function(t){return"element._private.data."+t},fieldUndefined:function(t){return void 0===i._private.data[t]},fieldTruthy:function(t){return!!i._private.data[t]}});if(!f)return!1;var g=p({name:"meta",fieldValue:function(t){return i[t]()},fieldRef:function(t){return"element."+t+"()"},fieldUndefined:function(t){return null==i[t]()},fieldTruthy:function(t){return!!i[t]()}});if(!g)return!1;if(null!=n.collection){var v=null!=n.collection._private.ids[i.id()];if(!v)return!1}if(null!=n.filter&&0===i.collection().filter(n.filter).size())return!1;var y=function(t,n){if(null!=t){var i=!1;if(!r.hasCompoundNodes())return!1;n=n();for(var o=0;o<n.length;o++)if(e(t,n[o])){i=!0;break}return i}return!0};return!!(y(n.parent,function(){return i.parent()})&&y(n.ancestor,function(){return i.parents()})&&y(n.child,function(){return i.children()})&&y(n.descendant,function(){return i.descendants()}))};t.selfn.filter=function(n){var i=this,r=n.cy();if(i._private.invalid)return new t.Collection(r);var o=function(t,n){for(var r=0;r<i.length;r++){
var o=i[r];if(e(o,n))return!0}return!1};null==i._private.selectorText&&(o=function(){return!0});var a=n.filter(o);return a},t.selfn.matches=function(t){var n=this;if(n._private.invalid)return!1;for(var i=0;i<n.length;i++){var r=n[i];if(e(r,t))return!0}return!1},t.selfn.toString=t.selfn.selector=function(){for(var e="",n=function(e,n){return t.is.string(e)?n?'"'+e+'"':e:""},i=function(t){var e="";t.subject===t&&(e+="$");var o=n(t.group);e+=o.substring(0,o.length-1);for(var a=0;a<t.data.length;a++){var s=t.data[a];e+=s.value?"["+s.field+n(s.operator)+n(s.value,!0)+"]":"["+n(s.operator)+s.field+"]"}for(var a=0;a<t.meta.length;a++){var l=t.meta[a];e+="[["+l.field+n(l.operator)+n(l.value,!0)+"]]"}for(var a=0;a<t.colonSelectors.length;a++){var u=t.colonSelectors[r];e+=u}for(var a=0;a<t.ids.length;a++){var u="#"+t.ids[r];e+=u}for(var a=0;a<t.classes.length;a++){var u="."+t.classes[r];e+=u}return null!=t.parent&&(e=i(t.parent)+" > "+e),null!=t.ancestor&&(e=i(t.ancestor)+" "+e),null!=t.child&&(e+=" > "+i(t.child)),null!=t.descendant&&(e+=" "+i(t.descendant)),e},r=0;r<this.length;r++){var o=this[r];e+=i(o),this.length>1&&r<this.length-1&&(e+=", ")}return e}}(cytoscape),function(t){"use strict";t.Style=function(e){return this instanceof t.Style?t.is.core(e)?(this._private={cy:e,coreStyle:{},newStyle:!0},this.length=0,void this.addDefaultStylesheet()):void t.util.error("A style must have a core reference"):new t.Style(e)},t.style=t.Style,t.styfn=t.Style.prototype,t.fn.style=function(e,n){for(var i in e){var r=e[i];t.Style.prototype=r}},function(){var e=t.util.regex.number,n=t.util.regex.rgbaNoBackRefs,i=t.util.regex.hslaNoBackRefs,r=t.util.regex.hex3,o=t.util.regex.hex6,a=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(t){return"^"+t+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+e+"|\\w+|"+n+"|"+i+"|"+r+"|"+o+")\\s*\\,\\s*("+e+"|\\w+|"+n+"|"+i+"|"+r+"|"+o+")\\)$"};t.style.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},autoSize:{number:!0,min:0,enums:["auto"]},number:{number:!0},size:{number:!0,min:0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad"},textRotation:{enums:["none","autorotate"]}};var l=t.style.types,u=t.style.properties=[{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"content",type:l.text},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size},{name:"text-border-style",type:l.borderStyle},{name:"text-background-shape",type:l.textBackgroundShape},{name:"text-transform",type:l.textTransform},{name:"text-wrap",type:l.textWrap},{name:"text-max-width",type:l.size},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"min-zoomed-font-size",type:l.size},{name:"edge-text-rotation",type:l.textRotation},{name:"display",type:l.display},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"shadow-blur",type:l.size},{name:"shadow-color",type:l.color},{name:"shadow-opacity",type:l.zeroOneNumber},{name:"shadow-offset-x",type:l.number},{name:"shadow-offset-y",type:l.number},{name:"text-shadow-blur",type:l.size},{name:"text-shadow-color",type:l.color},{name:"text-shadow-opacity",type:l.zeroOneNumber},{name:"text-shadow-offset-x",type:l.number},{name:"text-shadow-offset-y",type:l.number},{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"height",type:l.autoSize},{name:"width",type:l.autoSize},{name:"shape",type:l.nodeShape},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.borderStyle},{name:"background-image",type:l.url},{name:"background-image-opacity",type:l.zeroOneNumber},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"padding-left",type:l.size},{name:"padding-right",type:l.size},{name:"padding-top",type:l.size},{name:"padding-bottom",type:l.size},{name:"position",type:l.position},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"control-point-step-size",type:l.size},{name:"control-point-distance",type:l.number},{name:"control-point-weight",type:l.zeroOneNumber},{name:"curve-style",type:l.curveStyle},{name:"haystack-radius",type:l.zeroOneNumber},{name:"source-arrow-shape",type:l.arrowShape},{name:"target-arrow-shape",type:l.arrowShape},{name:"mid-source-arrow-shape",type:l.arrowShape},{name:"mid-target-arrow-shape",type:l.arrowShape},{name:"source-arrow-color",type:l.color},{name:"target-arrow-color",type:l.color},{name:"mid-source-arrow-color",type:l.color},{name:"mid-target-arrow-color",type:l.color},{name:"source-arrow-fill",type:l.arrowFill},{name:"target-arrow-fill",type:l.arrowFill},{name:"mid-source-arrow-fill",type:l.arrowFill},{name:"mid-target-arrow-fill",type:l.arrowFill},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}];t.style.pieBackgroundN=16,u.push({name:"pie-size",type:l.bgSize});for(var c=1;c<=t.style.pieBackgroundN;c++)u.push({name:"pie-"+c+"-background-color",type:l.color}),u.push({name:"pie-"+c+"-background-size",type:l.percent}),u.push({name:"pie-"+c+"-background-opacity",type:l.zeroOneNumber});for(var c=0;c<u.length;c++){var h=u[c];u[h.name]=h}}(),t.styfn.addDefaultStylesheet=function(){var t="Helvetica",e="normal",n="normal",i="#000",r="none",o=16,a=9999;this.selector("node, edge").css({"text-valign":"top","text-halign":"center",color:i,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":r,"text-wrap":"none","text-max-width":a,"text-background-color":"#000","text-background-opacity":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":t,"font-style":e,"font-weight":n,"font-size":o,"min-zoomed-font-size":0,"edge-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","compound-sizing-wrt-labels":"include","pie-size":"100%","pie-1-background-color":"black","pie-2-background-color":"black","pie-3-background-color":"black","pie-4-background-color":"black","pie-5-background-color":"black","pie-6-background-color":"black","pie-7-background-color":"black","pie-8-background-color":"black","pie-9-background-color":"black","pie-10-background-color":"black","pie-11-background-color":"black","pie-12-background-color":"black","pie-13-background-color":"black","pie-14-background-color":"black","pie-15-background-color":"black","pie-16-background-color":"black","pie-1-background-size":"0%","pie-2-background-size":"0%","pie-3-background-size":"0%","pie-4-background-size":"0%","pie-5-background-size":"0%","pie-6-background-size":"0%","pie-7-background-size":"0%","pie-8-background-size":"0%","pie-9-background-size":"0%","pie-10-background-size":"0%","pie-11-background-size":"0%","pie-12-background-size":"0%","pie-13-background-size":"0%","pie-14-background-size":"0%","pie-15-background-size":"0%","pie-16-background-size":"0%","pie-1-background-opacity":1,"pie-2-background-opacity":1,"pie-3-background-opacity":1,"pie-4-background-opacity":1,"pie-5-background-opacity":1,"pie-6-background-opacity":1,"pie-7-background-opacity":1,"pie-8-background-opacity":1,"pie-9-background-opacity":1,"pie-10-background-opacity":1,"pie-11-background-opacity":1,"pie-12-background-opacity":1,"pie-13-background-opacity":1,"pie-14-background-opacity":1,"pie-15-background-opacity":1,"pie-16-background-opacity":1,"source-arrow-shape":"none","mid-source-arrow-shape":"none","target-arrow-shape":"none","mid-target-arrow-shape":"none","source-arrow-color":"#ddd","mid-source-arrow-color":"#ddd","target-arrow-color":"#ddd","mid-target-arrow-color":"#ddd","source-arrow-fill":"filled","mid-source-arrow-fill":"filled","target-arrow-fill":"filled","mid-target-arrow-fill":"filled","line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weight":.5,"curve-style":"bezier","haystack-radius":.8}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},t.styfn.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},t.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},t.styfn.core=function(){return this._private.coreStyle},t.styfn.parse=function(e,n,i,r){var o,a=[e,n,i,r].join("$"),s=this.propCache=this.propCache||{};return(o=s[a])||(o=s[a]=this.parseImpl(e,n,i,r)),t.util.copy(o)},t.styfn.parseImpl=function(e,n,i,r){e=t.util.camel2dash(e);var o=t.style.properties[e],a=n,s=t.style.types;if(!o)return null;if(void 0===n||null===n)return null;var l=t.is.string(n);l&&(n=t.util.trim(n));var u=o.type;if(!u)return null;if(i&&(""===n||null===n))return{name:e,value:n,bypass:!0,deleteBypass:!0};var c=e.match(/pie-(\d+)-background-size/);if(t.is.fn(n))return{name:e,value:n,strValue:"fn",mapped:s.fn,bypass:i,hasPie:c};var h,d,p,f,g,v;if(!l||r);else{if((h=new RegExp(s.data.regex).exec(n))||(p=new RegExp(s.layoutData.regex).exec(n))||(g=new RegExp(s.scratch.regex).exec(n))){if(i)return!1;var y;return y=h?s.data:p?s.layoutData:s.scratch,h=h||p||g,{name:e,value:h,strValue:""+n,mapped:y,field:h[1],bypass:i,hasPie:c}}if((d=new RegExp(s.mapData.regex).exec(n))||(f=new RegExp(s.mapLayoutData.regex).exec(n))||(v=new RegExp(s.mapScratch.regex).exec(n))){if(i)return!1;var y;if(y=d?s.mapData:f?s.mapLayoutData:s.mapScratch,d=d||f||v,!u.color&&!u.number)return!1;var m=this.parse(e,d[4]);if(!m||m.mapped)return!1;var x=this.parse(e,d[5]);if(!x||x.mapped)return!1;if(m.value===x.value)return!1;if(u.color){var b=m.value,w=x.value,_=!(b[0]!==w[0]||b[1]!==w[1]||b[2]!==w[2]||b[3]!==w[3]&&(null!=b[3]&&1!==b[3]||null!=w[3]&&1!==w[3]));if(_)return!1}return{name:e,value:d,strValue:""+n,mapped:y,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:m.value,valueMax:x.value,bypass:i,hasPie:c}}}if(u.number){var E,T="px";if(u.units&&(E=u.units),u.implicitUnits&&(T=u.implicitUnits),!u.unitless)if(l){var D="px|em"+(u.allowPercent?"|\\%":"");E&&(D=E);var S=n.match("^("+t.util.regex.number+")("+D+")?$");S&&(n=S[1],E=S[2]||T)}else(!E||u.implicitUnits)&&(E=T);if(n=parseFloat(n),isNaN(n)&&void 0===u.enums)return null;if(isNaN(n)&&void 0!==u.enums){n=a;for(var N=0;N<u.enums.length;N++){var C=u.enums[N];if(C===n)return{name:e,value:n,strValue:""+n,bypass:i}}return null}if(u.integer&&!t.is.integer(n))return null;if(void 0!==u.min&&n<u.min||void 0!==u.max&&n>u.max)return null;var L={name:e,value:n,strValue:""+n+(E?E:""),units:E,bypass:i,hasPie:c&&null!=n&&0!==n&&""!==n};return u.unitless||"px"!==E&&"em"!==E||(L.pxValue="px"!==E&&E?this.getEmSizeInPixels()*n:n),("ms"===E||"s"===E)&&(L.msValue="ms"===E?n:1e3*n),L}if(u.propList){var M=[],P=""+n;if("none"===P);else{for(var k=P.split(","),N=0;N<k.length;N++){var I=t.util.trim(k[N]);t.style.properties[I]&&M.push(I)}if(0===M.length)return null}return{name:e,value:M,strValue:0===M.length?"none":M.join(", "),bypass:i}}if(u.color){var O=t.util.color2tuple(n);return O?{name:e,value:O,strValue:""+n,bypass:i}:null}if(u.enums){for(var N=0;N<u.enums.length;N++){var C=u.enums[N];if(C===n)return{name:e,value:n,strValue:""+n,bypass:i}}return null}if(u.regex){var A=new RegExp(u.regex),R=A.exec(n);return R?{name:e,value:R,strValue:""+n,bypass:i}:null}return u.string?{name:e,value:n,strValue:""+n,bypass:i}:null},t.styfn.selector=function(e){var n="core"===e?null:new t.Selector(e),i=this.length++;return this[i]={selector:n,properties:[],mappedProperties:[],index:i},this},t.styfn.css=function(){var e=arguments;switch(e.length){case 1:for(var n=e[0],i=0;i<t.style.properties.length;i++){var r=t.style.properties[i],o=n[r.name];void 0===o&&(o=n[t.util.dash2camel(r.name)]),void 0!==o&&this.cssRule(r.name,o)}break;case 2:this.cssRule(e[0],e[1])}return this},t.styfn.style=t.styfn.css,t.styfn.cssRule=function(t,e){var n=this.parse(t,e);if(n){var i=this.length-1;this[i].properties.push(n),this[i].properties[n.name]=n,n.hasPie&&(this._private.hasPie=!0),n.mapped&&this[i].mappedProperties.push(n);var r=!this[i].selector;r&&(this._private.coreStyle[n.name]=n)}return this}}(cytoscape),function(t){"use strict";t.styfn.apply=function(t){var e=this;e._private.newStyle&&(this._private.contextStyles={},this._private.propDiffs={});for(var n=0;n<t.length;n++){var i=t[n],r=e.getContextMeta(i),o=e.getContextStyle(r),a=e.applyContextStyle(r,o,i);e.updateTransitions(i,a.diffProps),e.updateStyleHints(i)}e._private.newStyle=!1},t.styfn.getPropertiesDiff=function(t,e){var n=this,i=n._private.propDiffs=n._private.propDiffs||{},r=t+"-"+e,o=i[r];if(o)return o;for(var a=[],s={},l=0;l<n.length;l++){var u=n[l],c="t"===t[l],h="t"===e[l],d=c!==h,p=u.mappedProperties.length>0;if(d||p){var f;d&&p?f=u.properties:d?f=u.properties:p&&(f=u.mappedProperties);for(var g=0;g<f.length;g++){for(var v=f[g],y=v.name,m=!1,x=l+1;x<n.length;x++){var b=n[x],w="t"===e[x];if(w&&(m=null!=b.properties[v.name]))break}s[y]||m||(s[y]=!0,a.push(y))}}}return i[r]=a,a},t.styfn.getContextMeta=function(t){var e,n=this,i="",r=t._private.styleCxtKey||"";n._private.newStyle&&(r="");for(var o=0;o<n.length;o++){var a=n[o],s=a.selector&&a.selector.matches(t);i+=s?"t":"f"}return e=n.getPropertiesDiff(r,i),t._private.styleCxtKey=i,{key:i,diffPropNames:e}},t.styfn.getContextStyle=function(t){var e=t.key,n=this,i=this._private.contextStyles=this._private.contextStyles||{};if(i[e])return i[e];for(var r={_private:{key:e}},o=0;o<n.length;o++){var a=n[o],s="t"===e[o];if(s)for(var l=0;l<a.properties.length;l++){var u=a.properties[l],c=r[u.name]=u;c.context=a}}return i[e]=r,r},t.styfn.applyContextStyle=function(t,e,n){for(var i=this,r=t.diffPropNames,o={},a=0;a<r.length;a++){var s=r[a],l=e[s],u=n._private.style[s];if(l&&u!==l){var c=o[s]={prev:u};i.applyParsedProperty(n,l),c.next=n._private.style[s],c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:o}},t.styfn.updateStyleHints=function(e){var n=e._private,i=this,r=n.style,o=!1;if("nodes"===n.group&&i._private.hasPie)for(var a=1;a<=t.style.pieBackgroundN;a++){var s=n.style["pie-"+a+"-background-size"].value;if(s>0){o=!0;break}}n.hasPie=o;var l=r["text-transform"].strValue,u=r.content.strValue,c=r["font-style"].strValue,s=r["font-size"].pxValue+"px",h=r["font-family"].strValue,d=r["font-weight"].strValue,p=r["text-valign"].strValue,f=r["text-valign"].strValue,g=r["text-outline-width"].pxValue,v=r["text-wrap"].strValue,y=r["text-max-width"].pxValue;n.labelKey=c+"$"+s+"$"+h+"$"+d+"$"+u+"$"+l+"$"+p+"$"+f+"$"+g+"$"+v+"$"+y,n.fontKey=c+"$"+d+"$"+s+"$"+h;var m=r.width.pxValue,x=r.height.pxValue,b=r["border-width"].pxValue;if(n.boundingBoxKey=m+"$"+x+"$"+b,"edges"===e._private.group){var w=r["control-point-step-size"].pxValue,_=r["control-point-distance"]?r["control-point-distance"].pxValue:void 0,E=r["control-point-weight"].value,T=r["curve-style"].strValue;n.boundingBoxKey+="$"+w+"$"+_+"$"+E+"$"+T}n.styleKey=Date.now()},t.styfn.applyParsedProperty=function(e,n){var i,r,o=n,a=e._private.style,s=t.style.types,l=t.style.properties[o.name].type,u=o.bypass,c=a[o.name],h=c&&c.bypass,d=e._private;if(("height"===n.name||"width"===n.name)&&e.isNode()){if("auto"===n.value&&!e.isParent())return!1;"auto"!==n.value&&e.isParent()&&(o=n=this.parse(n.name,"auto",u))}if(u&&o.deleteBypass){var p=a[o.name];return!p||!(!p.bypass||!p.bypassed)&&(a[o.name]=p.bypassed,!0)}var f=function(){t.util.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+e.id()+"` for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case s.mapData:case s.mapLayoutData:case s.mapScratch:var i,g=o.mapped===s.mapLayoutData,v=o.mapped===s.mapScratch,y=o.field.split(".");i=v||g?d.scratch:d.data;for(var m=0;m<y.length&&i;m++){var x=y[m];i=i[x]}var b;if(b=t.is.number(i)?(i-o.fieldMin)/(o.fieldMax-o.fieldMin):0,0>b?b=0:b>1&&(b=1),l.color){var w=o.valueMin[0],_=o.valueMax[0],E=o.valueMin[1],T=o.valueMax[1],D=o.valueMin[2],S=o.valueMax[2],N=null==o.valueMin[3]?1:o.valueMin[3],C=null==o.valueMax[3]?1:o.valueMax[3],L=[Math.round(w+(_-w)*b),Math.round(E+(T-E)*b),Math.round(D+(S-D)*b),Math.round(N+(C-N)*b)];r={bypass:o.bypass,name:o.name,value:L,strValue:"rgb("+L[0]+", "+L[1]+", "+L[2]+")"}}else{if(!l.number)return!1;var M=o.valueMin+(o.valueMax-o.valueMin)*b;r=this.parse(o.name,M,o.bypass,!0)}r||(r=this.parse(o.name,c.strValue,o.bypass,!0)),r||f(),r.mapping=o,o=r;break;case s.data:case s.layoutData:case s.scratch:var i,g=o.mapped===s.layoutData,v=o.mapped===s.scratch,y=o.field.split(".");if(i=v||g?d.scratch:d.data)for(var m=0;m<y.length;m++){var x=y[m];i=i[x]}if(r=this.parse(o.name,i,o.bypass,!0),!r){var P=c?c.strValue:"";r=this.parse(o.name,P,o.bypass,!0)}r||f(),r.mapping=o,o=r;break;case s.fn:var k=o.value,I=k(e);r=this.parse(o.name,I,o.bypass,!0),r.mapping=o,o=r;break;case void 0:break;default:return!1}return u?(o.bypassed=h?c.bypassed:c,a[o.name]=o):h?c.bypassed=o:a[o.name]=o,!0},t.styfn.update=function(){var t=this._private.cy,e=t.elements();e.updateStyle()},t.styfn.updateMappers=function(e){for(var n=0;n<e.length;n++){for(var i=e[n],r=i._private.style,o=0;o<t.style.properties.length;o++){var a=t.style.properties[o],s=r[a.name];if(s&&s.mapping){var l=s.mapping;this.applyParsedProperty(i,l)}}this.updateStyleHints(i)}},t.styfn.updateTransitions=function(e,n,i){var r=this,o=e._private.style,a=o["transition-property"].value,s=o["transition-duration"].msValue,l=o["transition-delay"].msValue,u={};if(a.length>0&&s>0){for(var c=!1,h=0;h<a.length;h++){var d=a[h],p=o[d],f=n[d];if(f){var g,v=f.prev,y=v,m=null!=f.next?f.next:p,x=!1,b=1e-6;y&&(t.is.number(y.pxValue)&&t.is.number(m.pxValue)?(x=m.pxValue-y.pxValue,g=y.pxValue+b*x):t.is.number(y.value)&&t.is.number(m.value)?(x=m.value-y.value,g=y.value+b*x):t.is.array(y.value)&&t.is.array(m.value)&&(x=y.value[0]!==m.value[0]||y.value[1]!==m.value[1]||y.value[2]!==m.value[2],g=y.strValue),x&&(u[d]=m.strValue,this.applyBypass(e,d,g),c=!0))}}if(!c)return;e._private.transitioning=!0,e.stop(),l>0&&e.delay(l),e.animate({css:u},{duration:s,queue:!1,complete:function(){i||r.removeBypasses(e,a),e._private.transitioning=!1}})}else e._private.transitioning&&(e.stop(),this.removeBypasses(e,a),e._private.transitioning=!1)}}(cytoscape),function(t){"use strict";t.styfn.applyBypass=function(e,n,i,r){var o=[],a=!0;if("*"===n||"**"===n){if(void 0!==i)for(var s=0;s<t.style.properties.length;s++){var l=t.style.properties[s],n=l.name,u=this.parse(n,i,!0);u&&o.push(u)}}else if(t.is.string(n)){var u=this.parse(n,i,!0);u&&o.push(u)}else{if(!t.is.plainObject(n))return!1;var c=n;r=i;for(var s=0;s<t.style.properties.length;s++){var l=t.style.properties[s],n=l.name,i=c[n];if(void 0===i&&(i=c[t.util.dash2camel(n)]),void 0!==i){var u=this.parse(n,i,!0);u&&o.push(u)}}}if(0===o.length)return!1;for(var h=!1,s=0;s<e.length;s++){for(var d,p=e[s],f=p._private.style,g={},v=0;v<o.length;v++){var l=o[v];if(r){var y=f[l.name];d=g[l.name]={prev:y}}h=this.applyParsedProperty(p,l)||h,r&&(d.next=f[l.name])}r&&this.updateTransitions(p,g,a)}return h},t.styfn.overrideBypass=function(e,n,i){for(var r=0;r<e.length;r++){var o=e[r],a=o._private.style[t.util.camel2dash(n)];a.bypass?(a.value=i,a.pxValue=i):this.applyBypass(o,n,i)}},t.styfn.removeAllBypasses=function(e,n){for(var i=!0,r=0;r<e.length;r++){for(var o=e[r],a={},s=o._private.style,l=0;l<t.style.properties.length;l++){var u=t.style.properties[l],c=u.name,h="",d=this.parse(c,h,!0),p=s[u.name],f=a[u.name]={prev:p};this.applyParsedProperty(o,d),f.next=s[u.name]}n&&this.updateTransitions(o,a,i)}},t.styfn.removeBypasses=function(e,n,i){for(var r=!0,o=0;o<e.length;o++){for(var a=e[o],s={},l=a._private.style,u=0;u<n.length;u++){var c=n[u],h=t.style.properties[c],d="",p=this.parse(c,d,!0),f=l[h.name],g=s[h.name]={prev:f};this.applyParsedProperty(a,p),g.next=l[h.name]}i&&this.updateTransitions(a,s,r)}}}(cytoscape),function(t,e){"use strict";t.styfn.getEmSizeInPixels=function(){var t=this._private.cy,n=t.container();if(e&&n&&e.getComputedStyle){var i=e.getComputedStyle(n).getPropertyValue("font-size"),r=parseFloat(i);return r}return 1},t.styfn.containerCss=function(t){var n=this._private.cy,i=n.container();return e&&i&&e.getComputedStyle?e.getComputedStyle(i).getPropertyValue(t):void 0},t.styfn.containerProperty=function(t){var e=this.containerCss(t),n=this.parse(t,e);return n},t.styfn.containerPropertyAsString=function(t){var e=this.containerProperty(t);return e?e.strValue:void 0}}(cytoscape,"undefined"==typeof window?null:window),function(t){"use strict";t.styfn.getRenderedStyle=function(e){var e=e[0];if(e){for(var n={},i=e._private.style,r=this._private.cy,o=r.zoom(),a=0;a<t.style.properties.length;a++){var s=t.style.properties[a],l=i[s.name];if(l){var u=l.unitless?l.strValue:l.pxValue*o+"px";n[s.name]=u,n[t.util.dash2camel(s.name)]=u}}return n}},t.styfn.getRawStyle=function(e){var e=e[0];if(e){for(var n={},i=e._private.style,r=0;r<t.style.properties.length;r++){var o=t.style.properties[r],a=i[o.name];a&&(n[o.name]=a.strValue,n[t.util.dash2camel(o.name)]=a.strValue)}return n}},t.styfn.getValueStyle=function(e){var n,i={},r=t.is.element(e);if(n=r?e._private.style:e)for(var o=0;o<t.style.properties.length;o++){var a=t.style.properties[o],s=n[a.name]||n[t.util.dash2camel(a.name)];void 0!==s&&(s=t.is.plainObject(s)?this.parse(a.name,s.strValue):this.parse(a.name,s)),s&&(i[a.name]=s,i[t.util.dash2camel(a.name)]=s)}return i},t.styfn.getPropsList=function(e){var n=[],i=e,r=t.style.properties;if(i)for(var o in i){var a=i[o],s=r[o]||r[t.util.camel2dash(o)],l=this.parse(s.name,a);n.push(l)}return n}}(cytoscape),function(t){"use strict";t.style.applyFromJson=function(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=i.selector,o=i.style||i.css;t.selector(r);for(var a in o){var s=o[a];t.css(a,s)}}return t},t.style.fromJson=function(e,n){var i=new t.Style(e);return t.style.applyFromJson(i,n),i},t.styfn.fromJson=function(e){var n=this;return n.resetToDefault(),t.style.applyFromJson(n,e),n},t.styfn.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],i=n.selector,r=n.properties,o={},a=0;a<r.length;a++){var s=r[a];o[s.name]=s.strValue}t.push({selector:i?i.toString():"core",style:o})}return t}}(cytoscape),function(t){"use strict";t.style.applyFromString=function(e,n){function i(){l=l.length>o.length?l.substr(o.length):""}function r(){a=a.length>s.length?a.substr(s.length):""}var o,a,s,l=""+n;for(l=l.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var u=l.match(/^\s*$/);if(u)break;var c=l.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){t.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+l);break}o=c[0];var h=c[1];if("core"!==h){var d=new t.Selector(h);if(d._private.invalid){t.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),i();continue}}var p=c[2],f=!1;a=p;for(var g=[];;){var u=a.match(/^\s*$/);if(u)break;var v=a.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!v){t.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),f=!0;break}s=v[0];var y=v[1],m=v[2],x=t.style.properties[y];if(x){var b=e.parse(y,m);b?(g.push({name:y,val:m}),r()):(t.util.error("Skipping property: Invalid property definition in: "+s),r())}else t.util.error("Skipping property: Invalid property name in: "+s),r()}if(f){i();break}e.selector(h);for(var w=0;w<g.length;w++){var x=g[w];e.css(x.name,x.val)}i()}return e},t.style.fromString=function(e,n){var i=new t.Style(e);return t.style.applyFromString(i,n),i},t.styfn.fromString=function(e){var n=this;return n.resetToDefault(),t.style.applyFromString(n,e),n}}(cytoscape),function(t){"use strict";t.stylesheet=t.Stylesheet=function(){return this instanceof t.Stylesheet?void(this.length=0):new t.Stylesheet},t.sheetfn=t.Stylesheet.prototype,t.sheetfn.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this},t.sheetfn.css=function(e,n){var i=this.length-1;if(t.is.string(e))this[i].properties.push({name:e,value:n});else if(t.is.plainObject(e))for(var r=e,o=0;o<t.style.properties.length;o++){var a=t.style.properties[o],s=r[a.name];if(void 0===s&&(s=r[t.util.dash2camel(a.name)]),void 0!==s){var e=a.name,n=s;this[i].properties.push({name:e,value:n})}}return this},t.sheetfn.style=t.sheetfn.css,t.sheetfn.generateStyle=function(e){for(var n=new t.Style(e),i=0;i<this.length;i++){var r=this[i],o=r.selector,a=r.properties;n.selector(o);for(var s=0;s<a.length;s++){var l=a[s];n.css(l.name,l.value)}}return n}}(cytoscape),function(t,e){"use strict";t.Thread=function(e){return this instanceof t.Thread?(this._private={requires:[],files:[],queue:null,pass:[]},void(e&&this.run(e))):new t.Thread(e)},t.thread=t.Thread,t.thdfn=t.Thread.prototype,t.fn.thread=function(e,n){for(var i in e){var r=e[i];t.Thread.prototype[i]=r}};var n=function(e){var n=t.is.fn(e)?e.toString():'JSON.parse("'+JSON.stringify(e)+'")';return n},i=function(e){var r,a;t.is.object(e)&&e.fn?(r=o(e.fn,e.name),a=e.name,e=e.fn):t.is.fn(e)?(r=e.toString(),a=e.name):t.is.string(e)?r=e:t.is.object(e)&&(r=e.proto?"":e.name+" = {};",a=e.name,e=e.obj),r+="\n";var s=function(t,e){if(t.prototype){var n=!1;for(var o in t.prototype){n=!0;break}n&&(r+=i({name:e,obj:t,proto:!0},t))}};if(e.prototype&&null!=a)for(var l in e.prototype){var u="",c=e.prototype[l],h=n(c),d=a+".prototype."+l;u+=d+" = "+h+";\n",u&&(r+=u),s(c,d)}if(!t.is.string(e))for(var l in e){var p="";if(e.hasOwnProperty(l)){var c=e[l],h=n(c),d=a+'["'+l+'"]';p+=d+" = "+h+";\n"}p&&(r+=p),s(c,d)}return r},r=function(e){return t.is.string(e)&&e.match(/\.js$/)};t.fn.thread({require:function(e,n){return r(e)?(this._private.files.push(e),this):(n&&(t.is.fn(e)?(n=n||e.name,e={name:n,fn:e}):e={name:n,obj:e}),this._private.requires.push(e),this)},pass:function(t){return this._private.pass.push(t),this},run:function(n,r){var o=this,a=this._private;if(r=r||a.pass.shift(),a.stopped)return void t.util.error("Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.");if(a.running)return a.queue=a.queue.then(function(){return o.run(n,r)});var s=null!=e,l="undefined"!=typeof module;o.trigger("run");var u=new t.Promise(function(u,c){a.running=!0;var h=a.ran,d=t.is.string(n)?n:n.toString(),p="\n"+a.requires.map(function(t){return i(t)}).concat(a.files.map(function(t){if(s){var n=function(t){return t.match(/^\.\//)||t.match(/^\.\./)?e.location.origin+e.location.pathname+t:t.match(/^\//)?e.location.origin+"/"+t:t};return'importScripts("'+n(t)+'");'}return l?'eval( require("fs").readFileSync("'+t+'", { encoding: "utf8" }) );':void 0})).concat(["( function(){","var ret = ("+d+")("+JSON.stringify(r)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(a.requires=[],a.files=[],s){var f,g;if(!h){var v=p+"";p=["function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),
p+=v,f=new Blob([p],{type:"application/javascript"}),g=e.URL.createObjectURL(f)}var y=a.webworker=a.webworker||new Worker(g);h&&y.postMessage({$$eval:p});var m;y.addEventListener("message",m=function(e){var n=t.is.object(e)&&t.is.object(e.data);n&&"$$resolve"in e.data?(y.removeEventListener("message",m),u(e.data.$$resolve)):n&&"$$reject"in e.data?(y.removeEventListener("message",m),c(e.data.$$reject)):o.trigger(new t.Event(e,{type:"message",message:e.data}))},!1),h||y.postMessage("$$start")}else if(l){var m,x=require("path"),b=require("child_process"),w=a.child=a.child||b.fork(x.join(__dirname,"thread-node-fork"));w.on("message",m=function(e){t.is.object(e)&&"$$resolve"in e?(w.removeListener("message",m),u(e.$$resolve)):t.is.object(e)&&"$$reject"in e?(w.removeListener("message",m),c(e.$$reject)):o.trigger(new t.Event({},{type:"message",message:e}))}),w.send({$$eval:p})}else t.error("Tried to create thread but no underlying tech found!")}).then(function(t){return a.running=!1,a.ran=!0,o.trigger("ran"),t});return null==a.queue&&(a.queue=u),u},message:function(t){var e=this._private;return e.webworker&&e.webworker.postMessage(t),e.child&&e.child.send(t),this},stop:function(){var t=this._private;return t.webworker&&t.webworker.terminate(),t.child&&t.child.kill(),t.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var o=function(t,e){var n=t.toString();return n=n.replace(/function.*\(/,"function "+e+"(")},a=function(t){return t=t||{},function(e,n){var i=o(e,"_$_$_"+t.name);return this.require(i),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+t.name+"( _$_$_"+t.name+(arguments.length>1?", "+JSON.stringify(n):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};t.fn.thread({reduce:a({name:"reduce"}),reduceRight:a({name:"reduceRight"}),map:a({name:"map"})});var s=t.thdfn;s.promise=s.run,s.terminate=s.halt=s.stop,s.include=s.require,t.worker=t.Worker=t.Thread,t.fn.thread({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger()}),t.define.eventAliasesOn(t.thdfn)}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";t.Fabric=function(e){if(!(this instanceof t.Fabric))return new t.Fabric(e);this._private={pass:[]};var n=4;t.is.number(e),e="undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency?navigator.hardwareConcurrency:"undefined"!=typeof module?require("os").cpus().length:n;for(var i=0;e>i;i++)this[i]=t.Thread();this.length=e},t.fabric=t.Fabric,t.fabfn=t.Fabric.prototype,t.fn.fabric=function(e,n){for(var i in e){var r=e[i];t.Fabric.prototype[i]=r}},t.fn.fabric({require:function(t,e){for(var n=0;n<this.length;n++){var i=this[n];i.require(t,e)}return this},random:function(){var t=Math.round((this.length-1)*Math.random()),e=this[t];return e},run:function(t){var e=this._private.pass.shift();return this.random().pass(e).run(t)},message:function(t){return this.random().message(t)},broadcast:function(t){for(var e=0;e<this.length;e++){var n=this[e];n.message(t)}return this},stop:function(){for(var t=0;t<this.length;t++){var e=this[t];e.stop()}return this},pass:function(e){var n=this._private.pass;return t.is.array(e)?n.push(e):t.util.error("Only arrays or collections may be used with fabric.pass()"),this},spreadSize:function(){var t=Math.ceil(this._private.pass[0].length/this.length);return t=Math.max(1,t)},spread:function(e){for(var n=this,i=n._private,r=n.spreadSize(),o=i.pass.shift().concat([]),a=[],s=0;s<this.length;s++){var l=this[s],u=o.splice(0,r),c=l.pass(u).run(e);a.push(c);var h=0===o.length;if(h)break}return t.Promise.all(a).then(function(t){for(var e=[],n=0,i=0;i<t.length;i++)for(var r=t[i],o=0;o<r.length;o++){var a=r[o];e[n++]=a}return e})},map:function(t){var e=this;return e.require(t,"_$_$_fabmap"),e.spread(function(t){var e=[],n=resolve;resolve=function(t){e.push(t)};for(var i=0;i<t.length;i++){var r=e.length,o=_$_$_fabmap(t[i]),a=r===e.length;a&&e.push(o)}return resolve=n,e})},filter:function(t){var e=this._private,n=e.pass[0];return this.map(t).then(function(t){for(var e=[],i=0;i<n.length;i++){var r=n[i],o=t[i];o&&e.push(r)}return e})},sort:function(t){var e=this,n=this._private.pass[0].length,i=this.spreadSize();return t=t||function(t,e){return e>t?-1:t>e?1:0},e.require(t,"_$_$_cmp"),e.spread(function(t){var e=t.sort(_$_$_cmp);resolve(e)}).then(function(e){for(var r=function(i,r,o){r=Math.min(r,n),o=Math.min(o,n);for(var a=i,s=r,l=[],u=a;o>u;u++){var c=e[i],h=e[r];s>i&&(r>=o||t(c,h)<=0)?(l.push(c),i++):(l.push(h),r++)}for(var u=0;u<l.length;u++){var d=a+u;e[d]=l[u]}},o=i;n>o;o*=2)for(var a=0;n>a;a+=2*o)r(a,a+o,a+2*o);return e})}});var n=function(t){return t=t||{},function(e,n){var i=this._private.pass.shift();return this.random().pass(i)[t.threadFn](e,n)}};t.fn.fabric({randomMap:n({threadFn:"map"}),reduce:n({threadFn:"reduce"}),reduceRight:n({threadFn:"reduceRight"})});var i=t.fabfn;i.promise=i.run,i.terminate=i.halt=i.stop,i.include=i.require,t.fn.fabric({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger()}),t.define.eventAliasesOn(t.fabfn)}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";var n={},i=t.util.copy(n);t.defaults=function(e){n=t.util.extend({},i,e)},t.fn.core=function(e,n){for(var i in e){var r=e[i];t.Core.prototype[i]=r}},t.Core=function(i){if(!(this instanceof t.Core))return new t.Core(i);var r=this;i=t.util.extend({},n,i);var o=i.container,a=o?o._cyreg:null;if(a=a||{},a&&a.cy){if(o)for(;o.firstChild;)o.removeChild(o.firstChild);a.cy.notify({type:"destroy"}),a={}}var s=a.readies=a.readies||[];o&&(o._cyreg=a),a.cy=r;var l=void 0!==e&&void 0!==o&&!i.headless,u=i;u.layout=t.util.extend({name:l?"grid":"null"},u.layout),u.renderer=t.util.extend({name:l?"canvas":"null"},u.renderer);var c=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},h=this._private={container:u.container,ready:!1,initrender:!1,options:u,elements:[],id2index:{},listeners:[],onRenders:[],aniEles:t.Collection(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:c(!0,u.zoomingEnabled),userZoomingEnabled:c(!0,u.userZoomingEnabled),panningEnabled:c(!0,u.panningEnabled),userPanningEnabled:c(!0,u.userPanningEnabled),boxSelectionEnabled:c(!1,u.boxSelectionEnabled),autolock:c(!1,u.autolock,u.autolockNodes),autoungrabify:c(!1,u.autoungrabify,u.autoungrabifyNodes),autounselectify:c(!1,u.autounselectify),styleEnabled:void 0===u.styleEnabled?l:u.styleEnabled,zoom:t.is.number(u.zoom)?u.zoom:1,pan:{x:t.is.plainObject(u.pan)&&t.is.number(u.pan.x)?u.pan.x:0,y:t.is.plainObject(u.pan)&&t.is.number(u.pan.y)?u.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},d=u.selectionType;h.selectionType=void 0===d||"additive"!==d&&"single"!==d?"single":d,t.is.number(u.minZoom)&&t.is.number(u.maxZoom)&&u.minZoom<u.maxZoom?(h.minZoom=u.minZoom,h.maxZoom=u.maxZoom):t.is.number(u.minZoom)&&void 0===u.maxZoom?h.minZoom=u.minZoom:t.is.number(u.maxZoom)&&void 0===u.minZoom&&(h.maxZoom=u.maxZoom);var p=function(e){for(var n=!1,i=0;i<f.length;i++){var r=f[i];if(t.is.promise(r)){n=!0;break}}return n?t.Promise.all(f).then(e):void e(f)},f=[u.style,u.elements];p(function(e){var n=e[0],i=e[1];h.styleEnabled&&r.setStyle(n),r.initRenderer(t.util.extend({hideEdgesOnViewport:u.hideEdgesOnViewport,hideLabelsOnViewport:u.hideLabelsOnViewport,textureOnViewport:u.textureOnViewport,wheelSensitivity:t.is.number(u.wheelSensitivity)&&u.wheelSensitivity>0?u.wheelSensitivity:1,motionBlur:void 0===u.motionBlur||u.motionBlur,motionBlurOpacity:void 0===u.motionBlurOpacity?.05:u.motionBlurOpacity,pixelRatio:t.is.number(u.pixelRatio)&&u.pixelRatio>0?u.pixelRatio:"auto"===u.pixelRatio?void 0:1,desktopTapThreshold:void 0===u.desktopTapThreshold?4:u.desktopTapThreshold,touchTapThreshold:void 0===u.touchTapThreshold?8:u.touchTapThreshold},u.renderer)),u.initrender&&(r.on("initrender",u.initrender),r.on("initrender",function(){r._private.initrender=!0})),r.load(i,function(){r.startAnimationLoop(),r._private.ready=!0,t.is.fn(u.ready)&&r.on("ready",u.ready);for(var e=0;e<s.length;e++){var n=s[e];r.on("ready",n)}a&&(a.readies=[]),r.trigger("ready")},u.done)})},t.corefn=t.Core.prototype,t.fn.core({isReady:function(){return this._private.ready},ready:function(t){this.isReady()?this.trigger("ready",[],t):this.on("ready",t)},initrender:function(){return this._private.initrender},destroy:function(){this.notify({type:"destroy"});var t=this.container(),e=t.parentNode;if(e)try{e.removeChild(t)}catch(n){}return this},getElementById:function(e){var n=this._private.id2index[e];return void 0!==n?this._private.elements[n]:new t.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){for(var e=this._private.elements,n=this._private.id2index,i=0;i<t.length;i++){var r=t[i],o=r._private.data.id,a=n[o],s=void 0!==a;s||(a=e.length,e.push(r),n[o]=a,r._private.index=a)}return this},removeFromPool:function(t){for(var e=this._private.elements,n=this._private.id2index,i=0;i<t.length;i++){var r=t[i],o=r._private.data.id,a=n[o],s=void 0!==a;if(s){this._private.id2index[o]=void 0,e.splice(a,1);for(var l=a;l<e.length;l++){var u=e[l]._private.data.id;n[u]--,e[l]._private.index--}}}},container:function(){return this._private.container},options:function(){return t.util.copy(this._private.options)},json:function(t){var e={},n=this;return e.elements={},n.elements().each(function(t,n){var i=n.group();e.elements[i]||(e.elements[i]=[]),e.elements[i].push(n.json())}),this._private.styleEnabled&&(e.style=n.style().json()),e.zoomingEnabled=n._private.zoomingEnabled,e.userZoomingEnabled=n._private.userZoomingEnabled,e.zoom=n._private.zoom,e.minZoom=n._private.minZoom,e.maxZoom=n._private.maxZoom,e.panningEnabled=n._private.panningEnabled,e.userPanningEnabled=n._private.userPanningEnabled,e.pan=n._private.pan,e.boxSelectionEnabled=n._private.boxSelectionEnabled,e.layout=n._private.options.layout,e.renderer=n._private.options.renderer,e.hideEdgesOnViewport=n._private.options.hideEdgesOnViewport,e.hideLabelsOnViewport=n._private.options.hideLabelsOnViewport,e.textureOnViewport=n._private.options.textureOnViewport,e.wheelSensitivity=n._private.options.wheelSensitivity,e.motionBlur=n._private.options.motionBlur,e},defer:function(t){var e=this,n=e._private,i=n.deferredExecQueue;i.push(t),n.deferredTimeout||(n.deferredTimeout=setTimeout(function(){for(;i.length>0;)i.shift()();n.deferredTimeout=null},0))}})}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";function n(t){var e=!document||"interactive"!==document.readyState&&"complete"!==document.readyState?n:t;setTimeout(e,9,t)}t.fn.core({add:function(e){var n,i=this;if(t.is.elementOrCollection(e)){var r=e;if(r._private.cy===i)n=r.restore();else{for(var o=[],a=0;a<r.length;a++){var s=r[a];o.push(s.json())}n=new t.Collection(i,o)}}else if(t.is.array(e)){var o=e;n=new t.Collection(i,o)}else if(t.is.plainObject(e)&&(t.is.array(e.nodes)||t.is.array(e.edges))){for(var l=e,o=[],u=["nodes","edges"],a=0,c=u.length;c>a;a++){var h=u[a],d=l[h];if(t.is.array(d))for(var p=0,f=d.length;f>p;p++){var g=d[p];g.group=h,o.push(g)}}n=new t.Collection(i,o)}else{var g=e;n=new t.Element(i,g).collection()}return n},remove:function(e){if(t.is.elementOrCollection(e))e=e;else if(t.is.string(e)){var n=e;e=this.$(n)}return e.remove()},load:function(i,r,o){function a(){s.one("layoutready",function(t){s.notifications(!0),s.trigger(t),s.notify({type:"load",collection:s.elements()}),s.one("load",r),s.trigger("load")}).one("layoutstop",function(){s.one("done",o),s.trigger("done")});var e=t.util.extend({},s._private.options.layout);e.eles=s.$(),s.layout(e)}var s=this;s.notifications(!1);var l=s.elements();return l.length>0&&l.remove(),null!=i&&(t.is.plainObject(i)||t.is.array(i))&&s.add(i),e?n(a):a(),this}})}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";t.fn.core({animated:t.define.animated(),clearQueue:t.define.clearQueue(),delay:t.define.delay(),animate:t.define.animate(),stop:t.define.stop(),addToAnimationPool:function(t){var e=this;e.styleEnabled()&&e._private.aniEles.merge(t)},startAnimationLoop:function(){function n(){t.util.requestAnimationFrame(function(t){i(t),n()})}function i(e){function n(n,i){var l=n._private.animation.current,u=n._private.animation.queue,c=!1;if(0===l.length){var h=u.length>0?u.shift():null;h&&(h.callTime=e,l.push(h))}for(var d=[],p=l.length-1;p>=0;p--){var f=l[p];f.started||(r(n,f),s=!0),o(n,f,e,i),f.done&&(d.push(f),l.splice(p,1)),c=!0}for(var p=0;p<d.length;p++){var f=d[p],g=f.params.complete;t.is.fn(g)&&g.apply(n,[e])}return i||0!==l.length||0!==u.length||a.push(n),c}e=+new Date;for(var i=l._private.aniEles,a=[],s=!1,u=0;u<i.length;u++){var c=i[u];n(c)}var h=n(l,!0);if(i.length>0||h){var d;if(i.length>0){var p=i.updateCompoundBounds();d=p.length>0?i.add(p):i}l.notify({type:s?"style":"draw",collection:d})}i.unmerge(a)}function r(e,n){var i=t.is.core(e),r=!i,o=e,a=l._private.style;if(r)var s=o._private.position,u={x:s.x,y:s.y},c=a.getValueStyle(o);if(i)var h=l._private.pan,d={x:h.x,y:h.y},p=l._private.zoom;n.started=!0,n.startTime=Date.now(),n.startPosition=u,n.startStyle=c,n.startPan=d,n.startZoom=p}function o(e,n,i,r){var o,u=l._private.style,c=n.properties,h=n.params,d=n.startTime,p=!r;if(o=0===n.duration?1:Math.min(1,(i-d)/n.duration),0>o?o=0:o>1&&(o=1),null==c.delay){var f=n.startPosition,g=c.position,v=e._private.position;g&&p&&(a(f.x,g.x)&&(v.x=s(f.x,g.x,o)),a(f.y,g.y)&&(v.y=s(f.y,g.y,o)));var y=n.startPan,m=c.pan,x=e._private.pan,b=null!=m&&r;b&&(a(y.x,m.x)&&(x.x=s(y.x,m.x,o)),a(y.y,m.y)&&(x.y=s(y.y,m.y,o)),e.trigger("pan"));var w=n.startZoom,_=c.zoom,E=null!=_&&r;E&&(a(w,_)&&(e._private.zoom=s(w,_,o)),e.trigger("zoom")),(b||E)&&e.trigger("viewport");var T=c.style||c.css;if(T&&p)for(var D=0;D<T.length;D++){var S=T[D].name,N=T[D],C=N,L=n.startStyle[S],M=s(L,C,o);u.overrideBypass(e,S,M)}}return t.is.fn(h.step)&&h.step.apply(e,[i]),o>=1&&(n.done=!0),o}function a(e,n){return null!=e&&null!=n&&(!(!t.is.number(e)||!t.is.number(n))||!(!e||!n))}function s(e,n,i){0>i?i=0:i>1&&(i=1);var r,o;if(r=null!=e.pxValue||null!=e.value?null!=e.pxValue?e.pxValue:e.value:e,o=null!=n.pxValue||null!=n.value?null!=n.pxValue?n.pxValue:n.value:n,t.is.number(r)&&t.is.number(o))return r+(o-r)*i;if(t.is.number(r[0])&&t.is.number(o[0])){var a=r,s=o,l=function(t,e){var n=e-t,r=t;return Math.round(i*n+r)},u=l(a[0],s[0]),c=l(a[1],s[1]),h=l(a[2],s[2]);return[u,c,h]}}var l=this;l.styleEnabled()&&e&&n()}})}(cytoscape,"undefined"==typeof window?null:window),function(t){"use strict";t.fn.core({data:t.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:t.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:t.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:t.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(t){"use strict";t.fn.core({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),once:t.define.on({unbindAllBindersOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger()}),t.define.eventAliasesOn(t.corefn)}(cytoscape),function(t){"use strict";t.fn.core({png:function(t){var e=this._private.renderer;return t=t||{},e.png(t)},jpg:function(t){var e=this._private.renderer;return t=t||{},t.bg=t.bg||"#fff",e.jpg(t)}}),t.corefn.jpeg=t.corefn.jpg}(cytoscape),function(t){"use strict";t.fn.core({layout:function(e){var n;return null==e&&(e=t.util.extend({},this._private.options.layout),e.eles=this.$()),n=this.initLayout(e),n.run(),this},makeLayout:function(t){return this.initLayout(t)},initLayout:function(e){if(null==e)return void t.util.error("Layout options must be specified to make a layout");if(null==e.name)return void t.util.error("A `name` must be specified to make a layout");var n=e.name,i=t.extension("layout",n);if(null==i)return void t.util.error("Can not apply layout: No such layout `"+n+"` found; did you include its JS file?");e.eles=null!=e.eles?e.eles:this.$(),t.is.string(e.eles)&&(e.eles=this.$(e.eles));var r=new i(t.util.extend({},e,{cy:this}));return t.is.plainObject(r._private)||(r._private={}),r._private.cy=this,r._private.listeners=[],r}}),t.corefn.createLayout=t.corefn.makeLayout}(cytoscape),function(t){"use strict";t.fn.core({notify:function(t){if(this._private.batchingNotify){var e=this._private.batchNotifyEles,n=this._private.batchNotifyTypes;if(t.collection)for(var i=0;i<t.collection.length;i++){var r=t.collection[i];e.ids[r._private.id]||e.push(r)}return void(n.ids[t.type]||n.push(t.type))}if(this._private.notificationsEnabled){var o=this.renderer();o.notify(t)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:void(e.notificationsEnabled=!!t)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},startBatch:function(){var t=this._private;return t.batchingStyle=t.batchingNotify=!0,t.batchStyleEles=[],t.batchNotifyEles=[],t.batchNotifyTypes=[],t.batchStyleEles.ids={},t.batchNotifyEles.ids={},t.batchNotifyTypes.ids={},this},endBatch:function(){var e=this._private;return e.batchingStyle=!1,new t.Collection(this,e.batchStyleEles).updateStyle(),e.batchingNotify=!1,this.notify({type:e.batchNotifyTypes,collection:e.batchNotifyEles}),this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n in t){var i=t[n],r=e.getElementById(n);r.data(i)}})}})}(cytoscape),function(t){"use strict";t.fn.core({renderTo:function(t,e,n,i){var r=this._private.renderer;return r.renderTo(t,e,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(e){var n=this,i=t.extension("renderer",e.name);return null==i?void t.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",e.name):void(this._private.renderer=new i(t.util.extend({},e,{cy:n,style:n._private.style})))},triggerOnRender:function(){for(var t=this._private.onRenders,e=0;e<t.length;e++){var n=t[e];n()}return this},onRender:function(t){return this._private.onRenders.push(t),this},offRender:function(t){var e=this._private.onRenders;if(null==t)return this._private.onRenders=[],this;for(var n=0;n<e.length;n++){var i=e[n];if(t===i){e.splice(n,1);break}}return this}})}(cytoscape),function(t){"use strict";t.fn.core({collection:function(e){return t.is.string(e)?this.$(e):t.is.elementOrCollection(e)?e.collection():t.is.array(e)?new t.Collection(this,e):new t.Collection(this)},nodes:function(t){var e=this.$(function(){return this.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(){return this.isEdge()});return t?e.filter(t):e},$:function(e){var n=new t.Collection(this,this._private.elements);return e?n.filter(e):n}}),t.corefn.elements=t.corefn.filter=t.corefn.$}(cytoscape),function(t){"use strict";t.fn.core({style:function(t){if(t){var e=this.setStyle(t);e.update()}return this._private.style},setStyle:function(e){var n=this._private;return n.style=t.is.stylesheet(e)?e.generateStyle(this):t.is.array(e)?t.style.fromJson(this,e):t.is.string(e)?t.style.fromString(this,e):new t.Style(this),n.style}})}(cytoscape),function(t){"use strict";t.fn.core({autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var e,n,i,r,o,a=arguments,s=this._private.pan;switch(a.length){case 0:return s;case 1:if(t.is.string(a[0]))return e=a[0],s[e];if(t.is.plainObject(a[0])){if(!this._private.panningEnabled)return this;i=a[0],r=i.x,o=i.y,t.is.number(r)&&(s.x=r),t.is.number(o)&&(s.y=o),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[0],n=a[1],"x"!==e&&"y"!==e||!t.is.number(n)||(s[e]=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(e){var n,i,r,o,a,s=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:t.is.plainObject(s[0])&&(r=s[0],o=r.x,a=r.y,t.is.number(o)&&(l.x+=o),t.is.number(a)&&(l.y+=a),this.trigger("pan viewport"));break;case 2:n=s[0],i=s[1],"x"!==n&&"y"!==n||!t.is.number(i)||(l[n]+=i),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(e,n){if(t.is.number(e)&&void 0===n&&(n=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var i;if(t.is.string(e)){var r=e;e=this.$(r)}else if(t.is.boundingBox(e)){var o=e;i={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},i.w=i.x2-i.x1,i.h=i.y2-i.y1}else t.is.elementOrCollection(e)||(e=this.elements());i=i||e.boundingBox();var a,s=this.width(),l=this.height();if(n=t.is.number(n)?n:0,!isNaN(s)&&!isNaN(l)&&s>0&&l>0&&!isNaN(i.w)&&!isNaN(i.h)&&i.w>0&&i.h>0){a=Math.min((s-2*n)/i.w,(l-2*n)/i.h),a=a>this._private.maxZoom?this._private.maxZoom:a,a=a<this._private.minZoom?this._private.minZoom:a;var u={x:(s-a*(i.x1+i.x2))/2,y:(l-a*(i.y1+i.y2))/2};return{zoom:a,pan:u}}}},minZoom:function(e){return void 0===e?this._private.minZoom:(t.is.number(e)&&(this._private.minZoom=e),this)},maxZoom:function(e){return void 0===e?this._private.maxZoom:(t.is.number(e)&&(this._private.maxZoom=e),this)},zoom:function(e){var n,i;if(void 0===e)return this._private.zoom;if(t.is.number(e))i=e;else if(t.is.plainObject(e)){if(i=e.level,e.position){var r=e.position,o=this._private.pan,a=this._private.zoom;n={x:r.x*a+o.x,y:r.y*a+o.y}}else e.renderedPosition&&(n=e.renderedPosition);if(n&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!t.is.number(i)||n&&(!t.is.number(n.x)||!t.is.number(n.y)))return this;if(i=i>this._private.maxZoom?this._private.maxZoom:i,i=i<this._private.minZoom?this._private.minZoom:i,n){var s=this._private.pan,l=this._private.zoom,u=i,c={x:-u/l*(n.x-s.x)+n.x,y:-u/l*(n.y-s.y)+n.y};this._private.zoom=i,this._private.pan=c;var h=s.x!==c.x||s.y!==c.y;this.trigger(" zoom "+(h?" pan ":"")+" viewport ")}else this._private.zoom=i,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(e){var n=this._private,i=!0,r=!0,o=[],a=!1,s=!1;if(!e)return this;if(t.is.number(e.zoom)||(i=!1),t.is.plainObject(e.pan)||(r=!1),!i&&!r)return this;if(i){var l=e.zoom;l<n.minZoom||l>n.maxZoom||!n.zoomingEnabled?a=!0:(n.zoom=l,o.push("zoom"))}if(r&&(!a||!e.cancelOnFailedZoom)&&n.panningEnabled){var u=e.pan;t.is.number(u.x)&&(n.pan.x=u.x,s=!1),t.is.number(u.y)&&(n.pan.y=u.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.trigger(o.join(" ")),this.notify({type:"viewport"})),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(e,n){if(this._private.panningEnabled){if(t.is.string(e)){var i=e;e=this.elements(i)}else t.is.elementOrCollection(e)||(e=this.elements());var r=e.boundingBox(),o=this.width(),a=this.height();n=void 0===n?this._private.zoom:n;var s={x:(o-n*(r.x1+r.x2))/2,y:(a-n*(r.y1+r.y2))/2};return s}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},width:function(){var t=this._private.container;return t?t.clientWidth:1},height:function(){var t=this._private.container;return t?t.clientHeight:1},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}}),t.corefn.centre=t.corefn.center,t.corefn.autolockNodes=t.corefn.autolock,t.corefn.autoungrabifyNodes=t.corefn.autoungrabify}(cytoscape),function(t){"use strict";t.fn.collection=t.fn.eles=function(e,n){for(var i in e){var r=e[i];t.Collection.prototype[i]=r}};var e={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(e,n,i){var r=t.is.element(n)?n._private:n,o=r.group,a=null!=i?i:this.prefix[o]+this.id[o];if(e.getElementById(a).empty())this.id[o]++;else for(;!e.getElementById(a).empty();)a=this.prefix[o]+ ++this.id[o];return a}};t.Element=function(e,n,i){if(!(this instanceof t.Element))return new t.Element(e,n,i);var r=this;if(i=!(void 0!==i&&!i),void 0===e||void 0===n||!t.is.core(e))return void t.util.error("An element must have a core reference and parameters set");if("nodes"!==n.group&&"edges"!==n.group)return void t.util.error("An element must be of type `nodes` or `edges`; you specified `"+n.group+"`");if(this.length=1,this[0]=this,this._private={cy:e,single:!0,data:n.data||{},position:n.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:n.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!n.selected,selectable:void 0===n.selectable||!!n.selectable,locked:!!n.locked,grabbed:!1,grabbable:void 0===n.grabbable||!!n.grabbable,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:n.scratch||{},edges:[],children:[]},n.renderedPosition){var o=n.renderedPosition,a=e.pan(),s=e.zoom();this._private.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}if(t.is.string(n.classes))for(var l=n.classes.split(/\s+/),u=0,c=l.length;c>u;u++){var h=l[u];h&&""!==h&&(r._private.classes[h]=!0)}n.css&&e.style().applyBypass(this,n.css),(void 0===i||i)&&this.restore()},t.Collection=function(n,i,r){if(!(this instanceof t.Collection))return new t.Collection(n,i);if(void 0===n||!t.is.core(n))return void t.util.error("A collection must have a reference to the core");var o={},a={},s=!1;if(i){if(i.length>0&&t.is.plainObject(i[0])&&!t.is.element(i[0])){s=!0;for(var l=[],u={},c=0,h=i.length;h>c;c++){var d=i[c];null==d.data&&(d.data={});var p=d.data;if(null==p.id)p.id=e.generate(n,d);else if(0!==n.getElementById(p.id).length||u[p.id])continue;var f=new t.Element(n,d,(!1));l.push(f),u[p.id]=!0}i=l}}else i=[];this.length=0;for(var c=0,h=i.length;h>c;c++){var g=i[c];if(g){var v=g._private.data.id;(!r||r.unique&&!o[v])&&(o[v]=g,a[v]=this.length,this[this.length]=g,this.length++)}}this._private={cy:n,ids:o,indexes:a},s&&this.restore()},t.elefn=t.elesfn=t.Element.prototype=t.Collection.prototype,t.elesfn.cy=function(){return this._private.cy},t.elesfn.element=function(){return this[0]},t.elesfn.collection=function(){return t.is.collection(this)?this:new t.Collection(this._private.cy,[this])},t.elesfn.unique=function(){return new t.Collection(this._private.cy,this,{unique:!0})},t.elesfn.getElementById=function(e){var n=this._private.cy,i=this._private.ids[e];return i?i:t.Collection(n)},t.elesfn.json=function(){var e=this.element();if(null!=e){var n=e._private,i=t.util.copy({data:n.data,position:n.position,group:n.group,bypass:n.bypass,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbed:n.grabbed,grabbable:n.grabbable,classes:""}),r=[];for(var o in n.classes)n.classes[o]&&r.push(o);for(var a=0;a<r.length;a++){var o=r[a];i.classes+=o+(a<r.length-1?" ":"")}return i}},t.elesfn.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e],i=n.json();t.push(i)}return t},t.elesfn.clone=function(){for(var e=this.cy(),n=[],i=0;i<this.length;i++){var r=this[i],o=r.json(),a=new t.Element(e,o,(!1));n.push(a)}return new t.Collection(e,n)},t.elesfn.copy=t.elesfn.clone,t.elesfn.restore=function(n){var i=this,r=[],o=i.cy();void 0===n&&(n=!0);for(var a=[],s=[],l=[],u=0,c=0,h=0,d=i.length;d>h;h++){var p=i[h];p.isNode()?(s.push(p),u++):(l.push(p),c++)}a=s.concat(l);for(var h=0,d=a.length;d>h;h++){var p=a[h];if(p.removed()){var f=p._private,g=f.data;if(void 0===g.id)g.id=e.generate(o,p);else if(t.is.number(g.id))g.id=""+g.id;else{if(t.is.emptyString(g.id)||!t.is.string(g.id)){t.util.error("Can not create element with invalid string ID `"+g.id+"`");continue}if(0!==o.getElementById(g.id).length){t.util.error("Can not create second element with ID `"+g.id+"`");continue}}var v=g.id;if(p.isEdge()){for(var y=p,m=["source","target"],x=m.length,b=!1,w=0;x>w;w++){var _=m[w],E=g[_];t.is.number(E)&&(E=g[_]=""+g[_]),null==E||""===E?(t.util.error("Can not create edge `"+v+"` with unspecified "+_),b=!0):o.getElementById(E).empty()&&(t.util.error("Can not create edge `"+v+"` with nonexistant "+_+" `"+E+"`"),b=!0)}if(b)continue;var T=o.getElementById(g.source),D=o.getElementById(g.target);T._private.edges.push(y),D._private.edges.push(y),y._private.source=T,y._private.target=D}f.ids={},f.ids[v]=p,f.removed=!1,o.addToPool(p),r.push(p)}}for(var h=0;u>h;h++){var S=a[h],g=S._private.data;t.is.number(g.parent)&&(g.parent=""+g.parent);var N=g.parent,C=null!=N;if(C){var L=o.getElementById(N);if(L.empty())g.parent=void 0;else{for(var M=!1,P=L;!P.empty();){if(S.same(P)){M=!0,g.parent=void 0;break}P=P.parent()}M||(L[0]._private.children.push(S),S._private.parent=L[0],o._private.hasCompoundNodes=!0)}}}if(r=new t.Collection(o,r),r.length>0){var k=r.add(r.connectedNodes()).add(r.parent());k.updateStyle(n),n?r.rtrigger("add"):r.trigger("add")}return i},t.elesfn.removed=function(){var t=this[0];return t&&t._private.removed},t.elesfn.inside=function(){var t=this[0];return t&&!t._private.removed},t.elesfn.remove=function(e){function n(t){for(var e=t._private.edges,n=0;n<e.length;n++)r(e[n])}function i(t){for(var e=t._private.children,n=0;n<e.length;n++)r(e[n])}function r(t){var e=c[t.id()];e||(c[t.id()]=!0,t.isNode()?(u.push(t),n(t),i(t)):u.unshift(t))}function o(t,e){for(var n=t._private.edges,i=0;i<n.length;i++){var r=n[i];if(e===r){n.splice(i,1);break}}}function a(t,e){e=e[0],t=t[0];for(var n=t._private.children,i=0;i<n.length;i++)if(n[i][0]===e[0]){n.splice(i,1);break}}var s=this,l=[],u=[],c={},h=s._private.cy;void 0===e&&(e=!0);for(var d=0,p=s.length;p>d;d++){var f=s[d];r(f)}for(var d=0;d<u.length;d++){var f=u[d];if(f._private.removed=!0,h.removeFromPool(f),l.push(f),f.isEdge()){var g=f.source()[0],v=f.target()[0];o(g,f),o(v,f)}else{var y=f.parent();0!==y.length&&a(y,f)}}var m=h._private.elements;h._private.hasCompoundNodes=!1;for(var d=0;d<m.length;d++){var f=m[d];if(f.isParent()){h._private.hasCompoundNodes=!0;break}}var x=new t.Collection(this.cy(),l);x.size()>0&&(e&&this.cy().notify({type:"remove",collection:x}),x.trigger("remove"));for(var b={},d=0;d<u.length;d++){var f=u[d],w="nodes"===f._private.group,_=f._private.data.parent;if(w&&void 0!==_&&!b[_]){b[_]=!0;var y=h.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle();
}}return this},t.elesfn.move=function(t){var e=this._private.cy;if(void 0!==t.source||void 0!==t.target){var n=t.source,i=t.target,r=e.getElementById(n).length>0,o=e.getElementById(i).length>0;if(r||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var l=a[s];"edges"===l.group&&(r&&(l.data.source=n),o&&(l.data.target=i))}return e.add(a)}}else if(void 0!==t.parent){var u=t.parent,c=null===u||e.getElementById(u).length>0;if(c){var a=this.jsons(),h=this.descendants(),d=h.merge(h.add(this).connectedEdges());this.remove();for(var s=0;s<this.length;s++){var l=a[s];"nodes"===l.group&&(l.data.parent=null===u?void 0:u)}}return e.add(a).merge(d.restore())}return this}}(cytoscape),function(t){"use strict";t.fn.eles({stdBreadthFirstSearch:function(e){return e=t.util.extend({},e,{std:!0}),this.breadthFirstSearch(e)},breadthFirstSearch:function(e,n,i){var r,o,a;t.is.plainObject(e)&&!t.is.elementOrCollection(e)&&(r=e,e=r.roots,n=r.visit,i=r.directed,o=r.std,a=r.thisArg),i=2!==arguments.length||t.is.fn(n)?i:n,n=t.is.fn(n)?n:function(){};for(var s,l=this._private.cy,u=t.is.string(e)?this.filter(e):e,c=[],h=[],d={},p={},f={},g=0,v=this.nodes(),y=this.edges(),m=0;m<u.length;m++)u[m].isNode()&&(c.unshift(u[m]),f[u[m].id()]=!0,h.push(u[m]),p[u[m].id()]=0);for(;0!==c.length;){var x,u=c.shift(),b=p[u.id()],w=d[u.id()],_=null==w?void 0:w.connectedNodes().not(u)[0];if(x=o?n.call(a,u,w,_,g++,b):n.call(u,g++,b,u,w,_),x===!0){s=u;break}if(x===!1)break;for(var E=u.connectedEdges(i?function(){return this.data("source")===u.id()}:void 0).intersect(y),m=0;m<E.length;m++){var T=E[m],D=T.connectedNodes(function(){return this.id()!==u.id()}).intersect(v);0===D.length||f[D.id()]||(D=D[0],c.push(D),f[D.id()]=!0,p[D.id()]=p[u.id()]+1,h.push(D),d[D.id()]=T)}}for(var S=[],m=0;m<h.length;m++){var N=h[m],C=d[N.id()];C&&S.push(C),S.push(N)}return{path:new t.Collection(l,S,{unique:!0}),found:new t.Collection(l,s,{unique:!0})}},stdDepthFirstSearch:function(e){return e=t.util.extend({},e,{std:!0}),this.depthFirstSearch(e)},depthFirstSearch:function(e,n,i){var r,o,a;t.is.plainObject(e)&&!t.is.elementOrCollection(e)&&(r=e,e=r.roots,n=r.visit,i=r.directed,o=r.std,a=r.thisArg),i=2!==arguments.length||t.is.fn(n)?i:n,n=t.is.fn(n)?n:function(){};for(var s,l=this._private.cy,u=t.is.string(e)?this.filter(e):e,c=[],h=[],d={},p={},f={},g=0,v=this.edges(),y=this.nodes(),m=0;m<u.length;m++)u[m].isNode()&&(c.push(u[m]),h.push(u[m]),p[u[m].id()]=0);for(;0!==c.length;){var u=c.pop();if(!f[u.id()]){f[u.id()]=!0;var x,b=p[u.id()],w=d[u.id()],_=null==w?void 0:w.connectedNodes().not(u)[0];if(x=o?n.call(a,u,w,_,g++,b):n.call(u,g++,b,u,w,_),x===!0){s=u;break}if(x===!1)break;for(var E=u.connectedEdges(i?function(){return this.data("source")===u.id()}:void 0).intersect(v),m=0;m<E.length;m++){var T=E[m],D=T.connectedNodes(function(){return this.id()!==u.id()}).intersect(y);0===D.length||f[D.id()]||(D=D[0],c.push(D),p[D.id()]=p[u.id()]+1,h.push(D),d[D.id()]=T)}}}for(var S=[],m=0;m<h.length;m++){var N=h[m],C=d[N.id()];C&&S.push(C),S.push(N)}return{path:new t.Collection(l,S,{unique:!0}),found:new t.Collection(l,s,{unique:!0})}},kruskal:function(e){function n(t){for(var e=0;e<r.length;e++){var n=r[e];if(n.anySame(t))return{eles:n,index:e}}}e=t.is.fn(e)?e:function(){return 1};for(var i=new t.Collection(this._private.cy,[]),r=[],o=this.nodes(),a=0;a<o.length;a++)r.push(o[a].collection());for(var s=this.edges(),l=s.toArray().sort(function(t,n){var i=e.call(t,t),r=e.call(n,n);return i-r}),a=0;a<l.length;a++){var u=l[a],c=u.source()[0],h=u.target()[0],d=n(c),p=n(h);d.index!==p.index&&(i=i.add(u),r[d.index]=d.eles.add(p.eles),r.splice(p.index,1))}return o.add(i)},dijkstra:function(e,n,i){var r;t.is.plainObject(e)&&!t.is.elementOrCollection(e)&&(r=e,e=r.root,n=r.weight,i=r.directed);var o=this._private.cy;n=t.is.fn(n)?n:function(){return 1};for(var a=t.is.string(e)?this.filter(e)[0]:e[0],s={},l={},u={},c=this.edges().filter(function(){return!this.isLoop()}),h=this.nodes(),d=[],p=0;p<h.length;p++)s[h[p].id()]=h[p].same(a)?0:1/0,d.push(h[p]);var f=function(t){return s[t.id()]};d=new t.Collection(o,d);for(var g=t.Minheap(o,d,f),v=function(t,e){for(var r,o=(i?t.edgesTo(e):t.edgesWith(e)).intersect(c),a=1/0,s=0;s<o.length;s++){var l=o[s],u=n.apply(l,[l]);(a>u||!r)&&(a=u,r=l)}return{edge:r,dist:a}};g.size()>0;){var y=g.pop(),m=y.value,x=y.id,b=o.getElementById(x);if(u[x]=m,m===Math.Infinite)break;for(var w=b.neighborhood().intersect(h),p=0;p<w.length;p++){var _=w[p],E=_.id(),T=v(b,_),D=m+T.dist;D<g.getValueById(E)&&(g.edit(E,D),l[E]={node:b,edge:T.edge})}}return{distanceTo:function(e){var n=t.is.string(e)?h.filter(e)[0]:e[0];return u[n.id()]},pathTo:function(e){var n=t.is.string(e)?h.filter(e)[0]:e[0],i=[],r=n;if(n.length>0)for(i.unshift(n);l[r.id()];){var a=l[r.id()];i.unshift(a.edge),i.unshift(a.node),r=a.node}return new t.Collection(o,i)}}}}),t.elesfn.bfs=t.elesfn.breadthFirstSearch,t.elesfn.dfs=t.elesfn.depthFirstSearch,t.elesfn.stdBfs=t.elesfn.stdBreadthFirstSearch,t.elesfn.stdDfs=t.elesfn.stdDepthFirstSearch}(cytoscape),function(t){"use strict";t.fn.eles({aStar:function(e){e=e||{};var n=function(t,e,i,o){if(t==e)return o.push(r.getElementById(e)),o;if(e in i){var a=i[e],s=p[e];return o.push(r.getElementById(e)),o.push(r.getElementById(s)),n(t,a,i,o)}},i=function(t,e){if(0!==t.length){for(var n=0,i=e[t[0]],r=1;r<t.length;r++){var o=e[t[r]];i>o&&(i=o,n=r)}return n}},r=this._private.cy;if(null!=e&&null!=e.root){var o=t.is.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null!=e.goal){var a=t.is.string(e.goal)?this.filter(e.goal)[0]:e.goal[0];if(null!=e.heuristic&&t.is.fn(e.heuristic))var s=e.heuristic;else var s=function(){return 0};if(null!=e.weight&&t.is.fn(e.weight))var l=e.weight;else var l=function(t){return 1};if(null!=e.directed)var u=e.directed;else var u=!1;var c=[],h=[o.id()],d={},p={},f={},g={};f[o.id()]=0,g[o.id()]=s(o);for(var v=this.edges().stdFilter(function(t){return!t.isLoop()}),y=this.nodes(),m=0;h.length>0;){var x=i(h,g),b=r.getElementById(h[x]);if(m++,b.id()==a.id()){var w=n(o.id(),a.id(),d,[]);return w.reverse(),{found:!0,distance:f[b.id()],path:new t.Collection(r,w),steps:m}}c.push(b.id()),h.splice(x,1);var _=b.connectedEdges();u&&(_=_.stdFilter(function(t){return t.data("source")===b.id()})),_=_.intersect(v);for(var E=0;E<_.length;E++){var T=_[E],D=T.connectedNodes().stdFilter(function(t){return t.id()!==b.id()}).intersect(y);if(-1==c.indexOf(D.id())){var S=f[b.id()]+l.apply(T,[T]);-1!=h.indexOf(D.id())?S<f[D.id()]&&(f[D.id()]=S,g[D.id()]=S+s(D),d[D.id()]=b.id()):(f[D.id()]=S,g[D.id()]=S+s(D),h.push(D.id()),d[D.id()]=b.id(),p[D.id()]=T.id())}}}return{found:!1,distance:void 0,path:void 0,steps:m}}}},floydWarshall:function(e){e=e||{};var n=this._private.cy;if(null!=e.weight&&t.is.fn(e.weight))var i=e.weight;else var i=function(t){return 1};if(null!=e.directed)var r=e.directed;else var r=!1;for(var o=this.edges().stdFilter(function(t){return!t.isLoop()}),a=this.nodes(),s=a.length,l={},u=0;s>u;u++)l[a[u].id()]=u;for(var c=[],u=0;s>u;u++){for(var h=new Array(s),d=0;s>d;d++)h[d]=u==d?0:1/0;c.push(h)}var p=[],f=[],g=function(t){for(var e=0;s>e;e++){for(var n=new Array(s),i=0;s>i;i++)n[i]=void 0;t.push(n)}};g(p),g(f);for(var u=0;u<o.length;u++){var v=l[o[u].source().id()],y=l[o[u].target().id()],m=i.apply(o[u],[o[u]]);c[v][y]>m&&(c[v][y]=m,p[v][y]=y,f[v][y]=o[u])}if(!r)for(var u=0;u<o.length;u++){var v=l[o[u].target().id()],y=l[o[u].source().id()],m=i.apply(o[u],[o[u]]);c[v][y]>m&&(c[v][y]=m,p[v][y]=y,f[v][y]=o[u])}for(var x=0;s>x;x++)for(var u=0;s>u;u++)for(var d=0;s>d;d++)c[u][x]+c[x][d]<c[u][d]&&(c[u][d]=c[u][x]+c[x][d],p[u][d]=p[u][x]);for(var b=[],u=0;s>u;u++)b.push(a[u].id());var w={distance:function(e,i){if(t.is.string(e))var r=n.filter(e)[0].id();else var r=e.id();if(t.is.string(i))var o=n.filter(i)[0].id();else var o=i.id();return c[l[r]][l[o]]},path:function(e,i){var r=function(t,e,i,r,o){if(t===e)return n.getElementById(r[t]);if(void 0!==i[t][e]){for(var a=[n.getElementById(r[t])],s=t;t!==e;){s=t,t=i[t][e];var l=o[s][t];a.push(l),a.push(n.getElementById(r[t]))}return a}};if(t.is.string(e))var o=n.filter(e)[0].id();else var o=e.id();if(t.is.string(i))var a=n.filter(i)[0].id();else var a=i.id();var s=r(l[o],l[a],p,b,f);return new t.Collection(n,s)}};return w},bellmanFord:function(e){if(e=e||{},null!=e.weight&&t.is.fn(e.weight))var n=e.weight;else var n=function(t){return 1};if(null!=e.directed)var i=e.directed;else var i=!1;if(null==e.root)return void t.util.error("options.root required");if(t.is.string(e.root))var r=this.filter(e.root)[0];else var r=e.root[0];for(var o=this._private.cy,a=this.edges().stdFilter(function(t){return!t.isLoop()}),s=this.nodes(),l=s.length,u={},c=0;l>c;c++)u[s[c].id()]=c;for(var h=[],d=[],p=[],c=0;l>c;c++)h[c]=s[c].id()===r.id()?0:1/0,d[c]=void 0;for(var f=!1,c=1;l>c;c++){f=!1;for(var g=0;g<a.length;g++){var v=u[a[g].source().id()],y=u[a[g].target().id()],m=n.apply(a[g],[a[g]]),x=h[v]+m;if(x<h[y]&&(h[y]=x,d[y]=v,p[y]=a[g],f=!0),!i){var x=h[y]+m;x<h[v]&&(h[v]=x,d[v]=y,p[v]=a[g],f=!0)}}if(!f)break}if(f)for(var g=0;g<a.length;g++){var v=u[a[g].source().id()],y=u[a[g].target().id()],m=n.apply(a[g],[a[g]]);if(h[v]+m<h[y])return t.util.error("Error: graph contains a negative weigth cycle!"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var b=[],c=0;l>c;c++)b.push(s[c].id());var w={distanceTo:function(e){if(t.is.string(e))var n=o.filter(e)[0].id();else var n=e.id();return h[u[n]]},pathTo:function(e){var n=function(t,e,n,i,r,a){for(;;){if(r.push(o.getElementById(i[n])),r.push(a[n]),e===n)return r;var s=t[n];if("undefined"==typeof s)return;n=s}};if(t.is.string(e))var i=o.filter(e)[0].id();else var i=e.id();var a=[],s=n(d,u[r.id()],u[i],b,a,p);return null!=s&&s.reverse(),new t.Collection(o,s)},hasNegativeWeightCycle:!1};return w},kargerStein:function(e){e=e||{};var n=function(t,e,n){for(var i=n[t],r=i[1],o=i[2],a=e[r],s=e[o],l=n.filter(function(t){return(e[t[1]]!==a||e[t[2]]!==s)&&(e[t[1]]!==s||e[t[2]]!==a)}),u=0;u<l.length;u++){var c=l[u];c[1]===s?(l[u]=c.slice(0),l[u][1]=a):c[2]===s&&(l[u]=c.slice(0),l[u][2]=a)}for(var u=0;u<e.length;u++)e[u]===s&&(e[u]=a);return l},i=function(t,e,r,o){if(o>=r)return e;var a=Math.floor(Math.random()*e.length),s=n(a,t,e);return i(t,s,r-1,o)},r=this._private.cy,o=this.edges().stdFilter(function(t){return!t.isLoop()}),a=this.nodes(),s=a.length,l=o.length,u=Math.ceil(Math.pow(Math.log(s)/Math.LN2,2)),c=Math.floor(s/Math.sqrt(2));if(2>s)return void t.util.error("At least 2 nodes are required for KargerSteing algorithm!");for(var h={},d=0;s>d;d++)h[a[d].id()]=d;for(var p=[],d=0;l>d;d++){var f=o[d];p.push([d,h[f.source().id()],h[f.target().id()]])}for(var g,v=1/0,y=[],d=0;s>d;d++)y.push(d);for(var m=0;u>=m;m++){var x=y.slice(0),b=i(x,p,s,c),w=x.slice(0),_=i(x,b,c,2),E=i(w,b,c,2);_.length<=E.length&&_.length<v?(v=_.length,g=[_,x]):E.length<=_.length&&E.length<v&&(v=E.length,g=[E,w])}for(var T=g[0].map(function(t){return o[t[0]]}),D=[],S=[],N=g[1][0],d=0;d<g[1].length;d++){var C=g[1][d];C===N?D.push(a[d]):S.push(a[d])}var L={cut:new t.Collection(r,T),partition1:new t.Collection(r,D),partition2:new t.Collection(r,S)};return L},pageRank:function(e){e=e||{};var n=function(t){for(var e=t.length,n=0,i=0;e>i;i++)n+=t[i];for(var i=0;e>i;i++)t[i]=t[i]/n};if(null!=e&&null!=e.dampingfactor)var i=e.dampingFactor;else var i=.8;if(null!=e&&null!=e.precision)var r=e.precision;else var r=1e-6;if(null!=e&&null!=e.iterations)var o=e.iterations;else var o=200;if(null!=e&&null!=e.weight&&t.is.fn(e.weight))var a=e.weight;else var a=function(t){return 1};for(var s=this._private.cy,l=this.edges().stdFilter(function(t){return!t.isLoop()}),u=this.nodes(),c=u.length,h=l.length,d={},p=0;c>p;p++)d[u[p].id()]=p;for(var f=[],g=[],v=(1-i)/c,p=0;c>p;p++){for(var y=[],m=0;c>m;m++)y.push(0);f.push(y),g.push(0)}for(var p=0;h>p;p++){var x=l[p],b=d[x.source().id()],w=d[x.target().id()],_=a.apply(x,[x]);f[w][b]+=_,g[b]+=_}for(var E=1/c+v,m=0;c>m;m++)if(0===g[m])for(var p=0;c>p;p++)f[p][m]=E;else for(var p=0;c>p;p++)f[p][m]=f[p][m]/g[m]+v;for(var T,D=[],S=[],p=0;c>p;p++)D.push(1),S.push(0);for(var N=0;o>N;N++){for(var C=S.slice(0),p=0;c>p;p++)for(var m=0;c>m;m++)C[p]+=f[p][m]*D[m];n(C),T=D,D=C;for(var L=0,p=0;c>p;p++)L+=Math.pow(T[p]-D[p],2);if(r>L)break}var M={rank:function(e){if(t.is.string(e))var n=s.filter(e)[0].id();else var n=e.id();return D[d[n]]}};return M},degreeCentralityNormalized:function(e){if(e=e||{},null!=e.directed)var n=e.directed;else var n=!1;var i=this.nodes(),r=i.length;if(n){for(var o={},a={},s=0,l=0,u=0;r>u;u++){var c=i[u],h=this.degreeCentrality(t.util.extend({},e,{root:c}));s<h.indegree&&(s=h.indegree),l<h.outdegree&&(l=h.outdegree),o[c.id()]=h.indegree,a[c.id()]=h.outdegree}return{indegree:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return o[e]/s},outdegree:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return a[e]/l}}}for(var d={},p=0,u=0;r>u;u++){var c=i[u],h=this.degreeCentrality(t.util.extend({},e,{root:c}));p<h.degree&&(p=h.degree),d[c.id()]=h.degree}return{degree:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return d[e]/p}}},degreeCentrality:function(e){e=e||{};var n=this;if(null!=e&&null!=e.root){var i=t.is.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null!=e.weight&&t.is.fn(e.weight))var r=e.weight;else var r=function(t){return 1};if(null!=e.directed)var o=e.directed;else var o=!1;if(null!=e.alpha&&t.is.number(e.alpha))var a=e.alpha;else a=0;if(o){for(var s=i.connectedEdges('edge[target = "'+i.id()+'"]').intersection(n),l=i.connectedEdges('edge[source = "'+i.id()+'"]').intersection(n),u=s.length,c=l.length,h=0,d=0,p=0;p<s.length;p++){var f=s[p];h+=r.apply(f,[f])}for(var p=0;p<l.length;p++){var f=l[p];d+=r.apply(f,[f])}return{indegree:Math.pow(u,1-a)*Math.pow(h,a),outdegree:Math.pow(c,1-a)*Math.pow(d,a)}}for(var g=i.connectedEdges().intersection(n),v=g.length,y=0,p=0;p<g.length;p++){var f=g[p];y+=r.apply(f,[f])}return{degree:Math.pow(v,1-a)*Math.pow(y,a)}}},closenessCentralityNormalized:function(e){e=e||{};var n=e.harmonic;void 0===n&&(n=!0);for(var i={},r=0,o=this.nodes(),a=this.floydWarshall({weight:e.weight,directed:e.directed}),s=0;s<o.length;s++){for(var l=0,u=0;u<o.length;u++)if(s!=u){var c=a.distance(o[s],o[u]);l+=n?1/c:c}n||(l=1/l),l>r&&(r=l),i[o[s].id()]=l}return{closeness:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return i[e]/r}}},closenessCentrality:function(e){if(e=e||{},null==e.root)return void t.util.error("options.root required");if(t.is.string(e.root))var n=this.filter(e.root)[0];else var n=e.root[0];if(null!=e.weight&&t.is.fn(e.weight))var i=e.weight;else var i=function(){return 1};if(null!=e.directed&&t.is.bool(e.directed))var r=e.directed;else var r=!1;var o=e.harmonic;void 0===o&&(o=!0);for(var a=this.dijkstra({root:n,weight:i,directed:r}),s=0,l=this.nodes(),u=0;u<l.length;u++)if(l[u].id()!=n.id()){var c=a.distanceTo(l[u]);s+=o?1/c:c}return o?s:1/s},betweennessCentrality:function(e){if(e=e||{},null!=e.weight&&t.is.fn(e.weight))var n=e.weight,i=!0;else var i=!1;if(null!=e.directed&&t.is.bool(e.directed))var r=e.directed;else var r=!1;for(var o=function(t,e){t.unshift(e);for(var n=0;g[t[n]]<g[t[n+1]]&&n<t.length-1;n++){var i=t[n];t[n]=t[n+1],t[n+1]=i}},a=this._private.cy,s=this.nodes(),l={},u={},c=0;c<s.length;c++)l[s[c].id()]=r?s[c].outgoers("node"):s[c].openNeighborhood("node");for(var c=0;c<s.length;c++)u[s[c].id()]=0;for(var h=0;h<s.length;h++){for(var d=[],p={},f={},g={},v=[],c=0;c<s.length;c++)p[s[c].id()]=[],f[s[c].id()]=0,g[s[c].id()]=Number.POSITIVE_INFINITY;for(f[s[h].id()]=1,g[s[h].id()]=0,v.unshift(s[h].id());v.length>0;){var y=v.pop();d.push(y),l[y].forEach(i?function(t){if(a.$("#"+y).edgesTo(t).length>0)var e=a.$("#"+y).edgesTo(t)[0];else var e=t.edgesTo("#"+y)[0];var i=n.apply(e,[e]);g[t.id()]>g[y]+i&&(g[t.id()]=g[y]+i,v.indexOf(t.id())<0?o(v,t.id()):(v.splice(v.indexOf(t.id()),1),o(v,t.id())),f[t.id()]=0,p[t.id()]=[]),g[t.id()]==g[y]+i&&(f[t.id()]=f[t.id()]+f[y],p[t.id()].push(y))}:function(t){g[t.id()]==Number.POSITIVE_INFINITY&&(v.unshift(t.id()),g[t.id()]=g[y]+1),g[t.id()]==g[y]+1&&(f[t.id()]=f[t.id()]+f[y],p[t.id()].push(y))})}for(var m={},c=0;c<s.length;c++)m[s[c].id()]=0;for(;d.length>0;){var x=d.pop();p[x].forEach(function(t){m[t]=m[t]+f[t]/f[x]*(1+m[x]),x!=s[h].id()&&(u[x]=u[x]+m[x])})}}var b=0;for(var w in u)b<u[w]&&(b=u[w]);var _={betweenness:function(e){if(t.is.string(e))var e=a.filter(e)[0].id();else var e=e.id();return u[e]},betweennessNormalized:function(e){if(t.is.string(e))var e=a.filter(e)[0].id();else var e=e.id();return u[e]/b}};return _.betweennessNormalised=_.betweennessNormalized,_}}),t.elesfn.dc=t.elesfn.degreeCentrality,t.elesfn.dcn=t.elesfn.degreeCentralityNormalised=t.elesfn.degreeCentralityNormalized,t.elesfn.cc=t.elesfn.closenessCentrality,t.elesfn.ccn=t.elesfn.closenessCentralityNormalised=t.elesfn.closenessCentralityNormalized,t.elesfn.bc=t.elesfn.betweennessCentrality}(cytoscape),function(t){"use strict";t.fn.eles({animated:t.define.animated(),clearQueue:t.define.clearQueue(),delay:t.define.delay(),animate:t.define.animate(),stop:t.define.stop()})}(cytoscape),function(t){"use strict";t.fn.eles({addClass:function(e){e=e.split(/\s+/);for(var n=this,i=[],r=0;r<e.length;r++){var o=e[r];if(!t.is.emptyString(o))for(var a=0;a<n.length;a++){var s=n[a],l=s._private.classes[o];s._private.classes[o]=!0,l||i.push(s)}}return i.length>0&&new t.Collection(this._private.cy,i).updateStyle().trigger("class"),n},hasClass:function(t){var e=this[0];return!(null==e||!e._private.classes[t])},toggleClass:function(e,n){for(var i=e.split(/\s+/),r=this,o=[],a=0,s=r.length;s>a;a++)for(var l=r[a],u=0;u<i.length;u++){var c=i[u];if(!t.is.emptyString(c)){var h=l._private.classes[c],d=n||void 0===n&&!h;d?(l._private.classes[c]=!0,h||o.push(l)):(l._private.classes[c]=!1,h&&o.push(l))}}return o.length>0&&new t.Collection(this._private.cy,o).updateStyle().trigger("class"),r},removeClass:function(e){e=e.split(/\s+/);for(var n=this,i=[],r=0;r<n.length;r++)for(var o=n[r],a=0;a<e.length;a++){var s=e[a];if(s&&""!==s){var l=o._private.classes[s];o._private.classes[s]=void 0,l&&i.push(o)}}return i.length>0&&new t.Collection(n._private.cy,i).updateStyle(),n.trigger("class"),n},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}})}(cytoscape),function(t){"use strict";t.fn.eles({allAre:function(t){return this.filter(t).length===this.length},is:function(t){return this.filter(t).length>0},some:function(t,e){for(var n=0;n<this.length;n++){var i=e?t.apply(e,[this[n],n,this]):t(this[n],n,this);if(i)return!0}return!1},every:function(t,e){for(var n=0;n<this.length;n++){var i=e?t.apply(e,[this[n],n,this]):t(this[n],n,this);if(!i)return!1}return!0},same:function(t){return t=this.cy().collection(t),this.length===t.length&&this.intersect(t).length===this.length},anySame:function(t){return t=this.cy().collection(t),this.intersect(t).length>0},allAreNeighbors:function(t){return t=this.cy().collection(t),this.neighborhood().intersect(t).length===t.length}}),t.elesfn.allAreNeighbours=t.elesfn.allAreNeighbors}(cytoscape),function(t){"use strict";t.fn.eles({parent:function(e){for(var n=[],i=this._private.cy,r=0;r<this.length;r++){var o=this[r],a=i.getElementById(o._private.data.parent);a.size()>0&&n.push(a)}return new t.Collection(i,n,{unique:!0}).filter(e)},parents:function(e){for(var n=[],i=this.parent();i.nonempty();){for(var r=0;r<i.length;r++){var o=i[r];n.push(o)}i=i.parent()}return new t.Collection(this.cy(),n,{unique:!0}).filter(e)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var i=this[n],r=i.parents();e=e||r,e=e.intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().empty()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().nonempty()}).filter(t)},children:function(e){for(var n=[],i=0;i<this.length;i++){var r=this[i];n=n.concat(r._private.children)}return new t.Collection(this.cy(),n,{unique:!0}).filter(e)},siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];return t?0!==t._private.children.length:void 0},isChild:function(){var t=this[0];return t?void 0!==t._private.data.parent&&0!==t.parent().length:void 0},descendants:function(e){function n(t){for(var e=0;e<t.length;e++){var r=t[e];i.push(r),r.children().nonempty()&&n(r.children())}}var i=[];return n(this.children()),new t.Collection(this.cy(),i,{unique:!0}).filter(e)}}),t.elesfn.ancestors=t.elesfn.parents}(cytoscape),function(t){"use strict";var e=1,n=0;t.fn.eles({data:t.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:t.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:t.define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:t.define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:t.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:t.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];return t?t._private.data.id:void 0},position:t.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){var e=t.updateCompoundBounds();e.rtrigger("position")},canSet:function(t){return!t.locked()}}),silentPosition:t.define.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){t.updateCompoundBounds()},canSet:function(t){return!t.locked()}}),positions:function(e,n){if(t.is.plainObject(e))this.position(e);else if(t.is.fn(e)){for(var i=e,r=0;r<this.length;r++){var o=this[r],e=i.apply(o,[r,o]);if(e&&!o.locked()){var a=o._private.position;a.x=e.x,a.y=e.y}}var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;n?l.trigger("position"):l.rtrigger("position")}return this},silentPositions:function(t){return this.positions(t,!0)},updateCompoundBounds:function(){function e(t){var e=t.children(),n=t._private.style,r="include"===n["compound-sizing-wrt-labels"].value,o=e.boundingBox({includeLabels:r,includeEdges:!0}),a={top:n["padding-top"].pxValue,bottom:n["padding-bottom"].pxValue,left:n["padding-left"].pxValue,right:n["padding-right"].pxValue},s=t._private.position,l=!1;"auto"===n.width.value&&(t._private.autoWidth=o.w+a.left+a.right,s.x=(o.x1+o.x2-a.left+a.right)/2,l=!0),"auto"===n.height.value&&(t._private.autoHeight=o.h+a.top+a.bottom,s.y=(o.y1+o.y2-a.top+a.bottom)/2,l=!0),l&&i.push(t)}var n=this.cy();if(!n.styleEnabled()||!n.hasCompoundNodes())return n.collection();for(var i=[],r=this.parent();r.nonempty();){for(var o=0;o<r.length;o++){var a=r[o];e(a)}r=r.parent()}return new t.Collection(n,i)},renderedPosition:function(e,n){var i=this[0],r=this.cy(),o=r.zoom(),a=r.pan(),s=t.is.plainObject(e)?e:void 0,l=void 0!==s||void 0!==n&&t.is.string(e);if(i&&i.isNode()){if(!l){var u=i._private.position;return s={x:u.x*o+a.x,y:u.y*o+a.y},void 0===e?s:s[e]}for(var c=0;c<this.length;c++){var i=this[c];void 0!==n?i._private.position[e]=(n-a[e])/o:void 0!==s&&(i._private.position={x:(s.x-a.x)/o,y:(s.y-a.y)/o})}this.rtrigger("position")}else if(!l)return;return this},relativePosition:function(e,n){var i=this[0],r=this.cy(),o=t.is.plainObject(e)?e:void 0,a=void 0!==o||void 0!==n&&t.is.string(e),s=r.hasCompoundNodes();if(i&&i.isNode()){if(!a){var l=i._private.position,u=s?i.parent():null,c=u&&u.length>0,h=c;c&&(u=u[0]);var d=h?u._private.position:{x:0,y:0};return o={x:l.x-d.x,y:l.y-d.y},void 0===e?o:o[e]}for(var p=0;p<this.length;p++){var i=this[p],u=s?i.parent():null,c=u&&u.length>0,h=c;c&&(u=u[0]);var d=h?u._private.position:{x:0,y:0};void 0!==n?i._private.position[e]=n+d[e]:void 0!==o&&(i._private.position={x:o.x+d.x,y:o.y+d.y})}this.rtrigger("position")}else if(!a)return;return this},width:function(){var t=this[0],e=t._private.cy,n=e._private.styleEnabled;if(t){if(n){var i=t._private.style.width;return"auto"===i.strValue?t._private.autoWidth:i.pxValue}return 1}},outerWidth:function(){var t=this[0],i=t._private.cy,r=i._private.styleEnabled;if(t){if(r){var o=t._private.style,a="auto"===o.width.strValue?t._private.autoWidth:o.width.pxValue,s=o["border-width"]?o["border-width"].pxValue*e+n:0;return a+s}return 1}},renderedWidth:function(){var t=this[0];if(t){var e=t.width();return e*this.cy().zoom()}},renderedOuterWidth:function(){var t=this[0];if(t){var e=t.outerWidth();return e*this.cy().zoom()}},height:function(){var t=this[0],e=t._private.cy,n=e._private.styleEnabled;if(t&&"nodes"===t._private.group){if(n){var i=t._private.style.height;return"auto"===i.strValue?t._private.autoHeight:i.pxValue}return 1}},outerHeight:function(){var t=this[0],i=t._private.cy,r=i._private.styleEnabled;if(t&&"nodes"===t._private.group){if(!r)return 1;var o=t._private.style,a="auto"===o.height.strValue?t._private.autoHeight:o.height.pxValue,s=o["border-width"]?o["border-width"].pxValue*e+n:0;return a+s}},renderedHeight:function(){var t=this[0];if(t&&"nodes"===t._private.group){var e=t.height();return e*this.cy().zoom()}},renderedOuterHeight:function(){var t=this[0];if(t&&"nodes"===t._private.group){var e=t.outerHeight();return e*this.cy().zoom()}},renderedBoundingBox:function(t){var e=this.boundingBox(t),n=this.cy(),i=n.zoom(),r=n.pan(),o=e.x1*i+r.x,a=e.x2*i+r.x,s=e.y1*i+r.y,l=e.y2*i+r.y;return{x1:o,x2:a,y1:s,y2:l,w:a-o,h:l-s}},boundingBox:function(t){var e=this,n=e._private.cy,i=n._private,r=i.styleEnabled;t=t||{};var o=void 0===t.includeNodes||t.includeNodes,a=void 0===t.includeEdges||t.includeEdges,s=void 0===t.includeLabels||t.includeLabels;r&&i.renderer.recalculateRenderedStyle(this);for(var l=1/0,u=-(1/0),c=1/0,h=-(1/0),d=0;d<e.length;d++){var p,f,g,v,y,m,x=e[d],b=x._private,w=b.style,_=r?b.style.display.value:"element",E="nodes"===b.group,T=!1;if("none"!==_){if(E&&o){T=!0;var D=b.position;y=D.x,m=D.y;var S=x.outerWidth(),N=S/2,C=x.outerHeight(),L=C/2;p=y-N,f=y+N,g=m-L,v=m+L,l=l>p?p:l,u=f>u?f:u,c=c>g?g:c,h=v>h?v:h}else if(x.isEdge()&&a){T=!0;var M=b.source,P=M._private,k=P.position,I=b.target,O=I._private,A=O.position,R=b.rstyle||{},S=0,B=0;if(r&&(S=w.width.pxValue,B=S/2),p=k.x,f=A.x,g=k.y,v=A.y,p>f){var F=p;p=f,f=F}if(g>v){var F=g;g=v,v=F}if(p-=B,f+=B,g-=B,v+=B,l=l>p?p:l,u=f>u?f:u,c=c>g?g:c,h=v>h?v:h,r)for(var z=R.bezierPts||[],q=0;q<z.length;q++){var j=z[q];p=j.x-B,f=j.x+B,g=j.y-B,v=j.y+B,l=l>p?p:l,u=f>u?f:u,c=c>g?g:c,h=v>h?v:h}if(r&&"haystack"===w["curve-style"].strValue){var X=b.rscratch.haystackPts;if(p=X[0],g=X[1],f=X[2],v=X[3],p>f){var F=p;p=f,f=F}if(g>v){var F=g;g=v,v=F}l=l>p?p:l,u=f>u?f:u,c=c>g?g:c,h=v>h?v:h}}if(r){var w=x._private.style,R=x._private.rstyle,Y=w.content.strValue,V=w["font-size"],G=w["text-halign"],U=w["text-valign"],W=R.labelWidth,H=R.labelHeight,$=R.labelX,Z=R.labelY;if(T&&s&&Y&&V&&null!=H&&null!=W&&null!=$&&null!=Z&&G&&U){var K,Q,J,tt,et=H,nt=W;if(x.isEdge())K=$-nt/2,Q=$+nt/2,J=Z-et/2,tt=Z+et/2;else{switch(G.value){case"left":K=$-nt,Q=$;break;case"center":K=$-nt/2,Q=$+nt/2;break;case"right":K=$,Q=$+nt}switch(U.value){case"top":J=Z-et,tt=Z;break;case"center":J=Z-et/2,tt=Z+et/2;break;case"bottom":J=Z,tt=Z+et}}l=l>K?K:l,u=Q>u?Q:u,c=c>J?J:c,h=tt>h?tt:h}}}}var it=function(t){return t===1/0||t===-(1/0)?0:t};return l=it(l),u=it(u),c=it(c),h=it(h),{x1:l,x2:u,y1:c,y2:h,w:u-l,h:h-c}}});var i=t.elesfn;i.attr=i.data,i.removeAttr=i.removeData,i.modelPosition=i.point=i.position,i.modelPositions=i.points=i.positions,i.renderedPoint=i.renderedPosition,i.relativePoint=i.relativePosition,i.boundingbox=i.boundingBox,i.renderedBoundingbox=i.renderedBoundingBox}(cytoscape),function(t){"use strict";function e(t){return function(e){var n=this;if(void 0===e&&(e=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var i=0,r=n[0],o=r._private.edges,a=0;a<o.length;a++){var s=o[a];(e||!s.isLoop())&&(i+=t(r,s))}return i}}}function n(t,e){return function(n){for(var i,r=this.nodes(),o=0;o<r.length;o++){var a=r[o],s=a[t](n);void 0===s||void 0!==i&&!e(s,i)||(i=s)}return i}}t.fn.eles({degree:e(function(t,e){return e.source().same(e.target())?2:1}),indegree:e(function(t,e){return e.target().same(t)?1:0}),outdegree:e(function(t,e){return e.source().same(t)?1:0})}),t.fn.eles({minDegree:n("degree",function(t,e){return e>t}),maxDegree:n("degree",function(t,e){return t>e}),minIndegree:n("indegree",function(t,e){return e>t}),maxIndegree:n("indegree",function(t,e){return t>e}),minOutdegree:n("outdegree",function(t,e){return e>t}),maxOutdegree:n("outdegree",function(t,e){return t>e})}),t.fn.eles({totalDegree:function(t){for(var e=0,n=this.nodes(),i=0;i<n.length;i++)e+=n[i].degree(t);return e}})}(cytoscape),function(t){"use strict";t.fn.eles({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),once:t.define.on({unbindAllBindersOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger(),rtrigger:function(t,e){return 0!==this.length?(this.cy().notify({type:t,collection:this}),this.trigger(t,e),this):void 0}}),t.define.eventAliasesOn(t.elesfn)}(cytoscape),function(t){"use strict";t.fn.eles({nodes:function(t){return this.filter(function(t,e){return e.isNode()}).filter(t)},edges:function(t){return this.filter(function(t,e){return e.isEdge()}).filter(t)},filter:function(e){var n=this._private.cy;if(t.is.fn(e)){for(var i=[],r=0;r<this.length;r++){var o=this[r];e.apply(o,[r,o])&&i.push(o)}return new t.Collection(n,i)}return t.is.string(e)||t.is.elementOrCollection(e)?new t.Selector(e).filter(this):void 0===e?this:new t.Collection(n)},not:function(e){var n=this._private.cy;if(e){t.is.string(e)&&(e=this.filter(e));for(var i=[],r=0;r<this.length;r++){var o=this[r],a=e._private.ids[o.id()];a||i.push(o)}return new t.Collection(n,i)}return this},absoluteComplement:function(){var t=this._private.cy;return t.elements().not(this)},intersect:function(e){var n=this._private.cy;if(t.is.string(e)){var i=e;return this.filter(i)}for(var r=[],o=this,a=e,s=this.length<e.length,l=s?a._private.ids:o._private.ids,u=s?o:a,c=0;c<u.length;c++){var h=u[c]._private.data.id,d=l[h];d&&r.push(d)}return new t.Collection(n,r)},xor:function(e){var n=this._private.cy;t.is.string(e)&&(e=n.$(e));var i=[],r=this,o=e,a=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r._private.data.id,a=e._private.ids[o];a||i.push(r)}};return a(r,o),a(o,r),new t.Collection(n,i)},diff:function(e){var n=this._private.cy;t.is.string(e)&&(e=n.$(e));var i=[],r=[],o=[],a=this,s=e,l=function(t,e,n){for(var i=0;i<t.length;i++){var r=t[i],a=r._private.data.id,s=e._private.ids[a];s?o.push(r):n.push(r)}};return l(a,s,i),l(s,a,r),{left:new t.Collection(n,i,{unique:!0}),right:new t.Collection(n,r,{unique:!0}),both:new t.Collection(n,o,{unique:!0})}},add:function(e){var n=this._private.cy;if(!e)return this;if(t.is.string(e)){var i=e;e=n.elements(i)}for(var r=[],o=0;o<this.length;o++)r.push(this[o]);for(var o=0;o<e.length;o++){var a=!this._private.ids[e[o].id()];a&&r.push(e[o])}return new t.Collection(n,r)},merge:function(e){var n=this._private,i=n.cy;if(!e)return this;if(t.is.string(e)){var r=e;e=i.elements(r)}for(var o=0;o<e.length;o++){var a=e[o],s=a.id(),l=!n.ids[s];if(l){var u=this.length++;this[u]=a,n.ids[s]=a,n.indexes[s]=u}}return this},unmergeOne:function(t){t=t[0];var e=this._private,n=t.id(),i=e.indexes[n];if(null==i)return this;
this[i]=void 0,e.ids[n]=void 0,e.indexes[n]=void 0;var r=i===this.length-1;if(this.length>1&&!r){var o=this.length-1,a=this[o];this[o]=void 0,this[i]=a,e.indexes[a.id()]=i}return this.length--,this},unmerge:function(e){var n=this._private.cy;if(!e)return this;if(t.is.string(e)){var i=e;e=n.elements(i)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},map:function(t,e){for(var n=[],i=this,r=0;r<i.length;r++){var o=i[r],a=e?t.apply(e,[o,r,i]):t(o,r,i);n.push(a)}return n},stdFilter:function(e,n){for(var i=[],r=this,o=this._private.cy,a=0;a<r.length;a++){var s=r[a],l=n?e.apply(n,[s,a,r]):e(s,a,r);l&&i.push(s)}return new t.Collection(o,i)},max:function(t,e){for(var n,i=-(1/0),r=this,o=0;o<r.length;o++){var a=r[o],s=e?t.apply(e,[a,o,r]):t(a,o,r);s>i&&(i=s,n=a)}return{value:i,ele:n}},min:function(t,e){for(var n,i=1/0,r=this,o=0;o<r.length;o++){var a=r[o],s=e?t.apply(e,[a,o,r]):t(a,o,r);i>s&&(i=s,n=a)}return{value:i,ele:n}}});var e=t.elesfn;e.u=e["|"]=e["+"]=e.union=e.or=e.add,e["\\"]=e["!"]=e["-"]=e.difference=e.relativeComplement=e.not,e.n=e["&"]=e["."]=e.and=e.intersection=e.intersect,e["^"]=e["(+)"]=e["(-)"]=e.symmetricDifference=e.symdiff=e.xor,e.fnFilter=e.filterFn=e.stdFilter,e.complement=e.abscomp=e.absoluteComplement}(cytoscape),function(t){"use strict";t.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var t=this[0];return t?t._private.group:void 0}})}(cytoscape),function(t){"use strict";t.fn.eles({each:function(e){if(t.is.fn(e))for(var n=0;n<this.length;n++){var i=this[n],r=e.apply(i,[n,i]);if(r===!1)break}return this},forEach:function(e,n){if(t.is.fn(e))for(var i=0;i<this.length;i++){var r=this[i],o=n?e.apply(n,[r,i,this]):e(r,i,this);if(o===!1)break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(e,n){var i=[],r=this.length;null==n&&(n=r),null==e&&(e=0),0>e&&(e=r+e),0>n&&(n=r+n);for(var o=e;o>=0&&n>o&&r>o;o++)i.push(this[o]);return new t.Collection(this.cy(),i)},size:function(){return this.length},eq:function(e){return this[e]||new t.Collection(this.cy())},first:function(){return this[0]||new t.Collection(this.cy())},last:function(){return this[this.length-1]||new t.Collection(this.cy())},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!t.is.fn(e))return this;var n=this.cy(),i=this.toArray().sort(e);return new t.Collection(n,i)},sortByZIndex:function(){return this.sort(t.Collection.zIndexSort)},zDepth:function(){var t=this[0];if(t){var e=t._private,n=e.group;if("nodes"===n){var i=e.data.parent?t.parents().size():0;return t.isParent()?i:Number.MAX_VALUE}var r=e.source,o=e.target,a=r.zDepth(),s=o.zDepth();return Math.max(a,s,0)}}}),t.Collection.zIndexSort=function(t,e){var n=t.cy(),i=t._private,r=e._private,o=i.style["z-index"].value-r.style["z-index"].value,a=0,s=0,l=n.hasCompoundNodes(),u="nodes"===i.group,c="edges"===i.group,h="nodes"===r.group,d="edges"===r.group;l&&(a=t.zDepth(),s=e.zDepth());var p=a-s,f=0===p;return f?u&&d?1:c&&h?-1:0===o?i.index-r.index:o:p}}(cytoscape),function(t){"use strict";t.fn.eles({layoutPositions:function(e,n,i){var r=this.nodes(),o=this.cy();if(e.trigger({type:"layoutstart",layout:e}),n.animate){for(var a=0;a<r.length;a++){var s=r[a],l=a===r.length-1,u=i.call(s,a,s),c=s.position();t.is.number(c.x)&&t.is.number(c.y)||s.silentPosition({x:0,y:0}),s.animate({position:u},{duration:n.animationDuration,step:l?function(){n.fit&&o.fit(n.eles,n.padding)}:void 0,complete:l?function(){null!=n.zoom&&o.zoom(n.zoom),n.pan&&o.pan(n.pan),n.fit&&o.fit(n.eles,n.padding),e.one("layoutstop",n.stop),e.trigger({type:"layoutstop",layout:e})}:void 0})}e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e})}else r.positions(i),n.fit&&o.fit(n.eles,n.padding),null!=n.zoom&&o.zoom(n.zoom),n.pan&&o.pan(n.pan),e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e}),e.one("layoutstop",n.stop),e.trigger({type:"layoutstop",layout:e});return this},layout:function(e){var n=this.cy();return n.layout(t.util.extend({},e,{eles:this})),this},makeLayout:function(e){var n=this.cy();return n.makeLayout(t.util.extend({},e,{eles:this}))}}),t.elesfn.createLayout=t.elesfn.makeLayout}(cytoscape),function(t){"use strict";t.fn.eles({updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e._private.batchingStyle){for(var n=e._private.batchStyleEles,i=0;i<this.length;i++){var r=this[i];n.ids[r._private.id]||n.push(r)}return this}var o=e.style();t=!(!t&&void 0!==t),o.apply(this);var a=this.updateCompoundBounds(),s=a.length>0?this.add(a):this;return t?s.rtrigger("style"):s.trigger("style"),this},updateMappers:function(t){var e=this._private.cy,n=e.style();if(t=!(!t&&void 0!==t),!e.styleEnabled())return this;n.updateMappers(this);var i=this.updateCompoundBounds(),r=i.length>0?this.add(i):this;return t?r.rtrigger("style"):r.trigger("style"),this},renderedCss:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];if(n){var i=n.cy().style().getRenderedStyle(n);return void 0===t?i:i[t]}},css:function(e,n){var i=this.cy();if(!i.styleEnabled())return this;var r=!1,o=i.style();if(t.is.plainObject(e)){var a=e;o.applyBypass(this,a,r);var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;l.rtrigger("style")}else if(t.is.string(e)){if(void 0===n){var u=this[0];return u?u._private.style[e].strValue:void 0}o.applyBypass(this,e,n,r);var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;l.rtrigger("style")}else if(void 0===e){var u=this[0];return u?o.getRawStyle(u):void 0}return this},removeCss:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=!1,i=e.style(),r=this;if(void 0===t)for(var o=0;o<r.length;o++){var a=r[o];i.removeAllBypasses(a,n)}else{t=t.split(/\s+/);for(var o=0;o<r.length;o++){var a=r[o];i.removeBypasses(a,t,n)}}var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;return l.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var t=this.cy();if(!t.styleEnabled())return!0;var e=this[0],n=t.hasCompoundNodes();if(e){var i=e._private.style;if("visible"!==i.visibility.value||"element"!==i.display.value)return!1;if("nodes"===e._private.group){if(!n)return!0;var r=e._private.data.parent?e.parents():null;if(r)for(var o=0;o<r.length;o++){var a=r[o],s=a._private.style,l=s.visibility.value,u=s.display.value;if("visible"!==l||"element"!==u)return!1}return!0}var c=e._private.source,h=e._private.target;return c.visible()&&h.visible()}},hidden:function(){var t=this[0];return t?!t.visible():void 0},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var i=n._private,r=i.style.opacity.value;if(!e)return r;var o=i.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){var s=o[a],l=s._private.style.opacity.value;r=l*r}return r}},transparent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0],n=e.cy().hasCompoundNodes();return e?n?0===e.effectiveOpacity():0===e._private.style.opacity.value:void 0},isFullAutoParent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0];if(e){var n="auto"===e._private.style.width.value,i="auto"===e._private.style.height.value;return e.isParent()&&n&&i}},backgrounding:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0];return!!e._private.backgrounding}}),t.elesfn.bypass=t.elesfn.style=t.elesfn.css,t.elesfn.renderedStyle=t.elesfn.renderedCss,t.elesfn.removeBypass=t.elesfn.removeStyle=t.elesfn.removeCss}(cytoscape),function(t){"use strict";function e(e){return function(){var n=arguments,i=[];if(2===n.length){var r=n[0],o=n[1];this.bind(e.event,r,o)}else if(1===n.length){var o=n[0];this.bind(e.event,o)}else if(0===n.length){for(var a=0;a<this.length;a++){var s=this[a],l=!e.ableField||s._private[e.ableField],u=s._private[e.field]!=e.value;if(e.overrideAble){var c=e.overrideAble(s);if(void 0!==c&&(l=c,!c))return this}l&&(s._private[e.field]=e.value,u&&i.push(s))}var h=t.Collection(this.cy(),i);h.updateStyle(),h.trigger(e.event)}return this}}function n(n){t.elesfn[n.field]=function(){var t=this[0];if(t){if(n.overrideField){var e=n.overrideField(t);if(void 0!==e)return e}return t._private[n.field]}},t.elesfn[n.on]=e({event:n.on,field:n.field,ableField:n.ableField,overrideAble:n.overrideAble,value:!0}),t.elesfn[n.off]=e({event:n.off,field:n.field,ableField:n.ableField,overrideAble:n.overrideAble,value:!1})}n({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),n({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),n({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),n({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),t.elesfn.deselect=t.elesfn.unselect,t.elesfn.grabbed=function(){var t=this[0];return t?t._private.grabbed:void 0},n({field:"active",on:"activate",off:"unactivate"}),t.elesfn.inactive=function(){var t=this[0];return t?!t._private.active:void 0}}(cytoscape),function(t){"use strict";function e(e){return function(n){for(var i=[],r=this._private.cy,o=0;o<this.length;o++){var a=this[o],s=a._private[e.attr];s&&i.push(s)}return new t.Collection(r,i,{unique:!0}).filter(n)}}function n(e){return function(n){var i=[],r=this._private.cy,o=e||{};t.is.string(n)&&(n=r.$(n));for(var a=this._private.ids,s=n._private.ids,l=0;l<n.length;l++)for(var u=n[l]._private.edges,c=0;c<u.length;c++){var h=u[c],d=h._private.data,p=a[d.source]&&s[d.target],f=s[d.source]&&a[d.target],g=p||f;if(g){if(o.thisIs){if("source"===o.thisIs&&!p)continue;if("target"===o.thisIs&&!f)continue}i.push(h)}}return new t.Collection(r,i,{unique:!0})}}function i(e){var n={codirected:!1};return e=t.util.extend({},n,e),function(n){for(var i=this._private.cy,r=[],o=this.edges(),a=e,s=0;s<o.length;s++)for(var l=o[s],u=l.source()[0],c=u.id(),h=l.target()[0],d=h.id(),p=u._private.edges,f=0;f<p.length;f++){var g=p[f],v=g._private.data,y=v.target,m=v.source,x=y===d&&m===c,b=c===y&&d===m;(a.codirected&&x||!a.codirected&&(x||b))&&r.push(g)}return new t.Collection(i,r,{unique:!0}).filter(n)}}t.fn.eles({roots:function(e){for(var n=this,i=[],r=0;r<n.length;r++){var o=n[r];if(o.isNode()){var a=o.connectedEdges(function(){return this.data("target")===o.id()&&this.data("source")!==o.id()}).length>0;a||i.push(o)}}return new t.Collection(this._private.cy,i,{unique:!0}).filter(e)},leaves:function(e){for(var n=this,i=[],r=0;r<n.length;r++){var o=n[r];if(o.isNode()){var a=o.connectedEdges(function(){return this.data("source")===o.id()&&this.data("target")!==o.id()}).length>0;a||i.push(o)}}return new t.Collection(this._private.cy,i,{unique:!0}).filter(e)},outgoers:function(e){for(var n=this,i=[],r=0;r<n.length;r++){var o=n[r],a=o.id();if(o.isNode())for(var s=o._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data.source,h=u._private.data.target;c===a&&h!==a&&(i.push(u),i.push(u.target()[0]))}}return new t.Collection(this._private.cy,i,{unique:!0}).filter(e)},successors:function(e){for(var n=this,i=[],r={};;){var o=n.outgoers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var l=o[s],u=l.id();r[u]||(r[u]=!0,i.push(l),a=!0)}if(!a)break;n=o}return new t.Collection(this._private.cy,i,{unique:!0}).filter(e)},incomers:function(e){for(var n=this,i=[],r=0;r<n.length;r++){var o=n[r],a=o.id();if(o.isNode())for(var s=o._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data.source,h=u._private.data.target;h===a&&c!==a&&(i.push(u),i.push(u.source()[0]))}}return new t.Collection(this._private.cy,i,{unique:!0}).filter(e)},predecessors:function(e){for(var n=this,i=[],r={};;){var o=n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var l=o[s],u=l.id();r[u]||(r[u]=!0,i.push(l),a=!0)}if(!a)break;n=o}return new t.Collection(this._private.cy,i,{unique:!0}).filter(e)}}),t.fn.eles({neighborhood:function(e){for(var n=[],i=this._private.cy,r=this.nodes(),o=0;o<r.length;o++)for(var a=r[o],s=a.connectedEdges(),l=0;l<s.length;l++){var u=s[l],c=u.connectedNodes().not(a);c.length>0&&n.push(c[0]),n.push(u[0])}return new t.Collection(i,n,{unique:!0}).filter(e)},closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),t.elesfn.neighbourhood=t.elesfn.neighborhood,t.elesfn.closedNeighbourhood=t.elesfn.closedNeighborhood,t.elesfn.openNeighbourhood=t.elesfn.openNeighborhood,t.fn.eles({source:function(t){var e,n=this[0];return n&&(e=n._private.source),e&&t?e.filter(t):e},target:function(t){var e,n=this[0];return n&&(e=n._private.target),e&&t?e.filter(t):e},sources:e({attr:"source"}),targets:e({attr:"target"})}),t.fn.eles({edgesWith:n(),edgesTo:n({thisIs:"source"})}),t.fn.eles({connectedEdges:function(e){for(var n=[],i=this._private.cy,r=this,o=0;o<r.length;o++){var a=r[o];if(a.isNode())for(var s=a._private.edges,l=0;l<s.length;l++){var u=s[l];n.push(u)}}return new t.Collection(i,n,{unique:!0}).filter(e)},connectedNodes:function(e){for(var n=[],i=this._private.cy,r=this,o=0;o<r.length;o++){var a=r[o];a.isEdge()&&(n.push(a.source()[0]),n.push(a.target()[0]))}return new t.Collection(i,n,{unique:!0}).filter(e)},parallelEdges:i(),codirectedEdges:i({codirected:!0})})}(cytoscape),function(t){"use strict";t.fn.eles({fit:function(){},center:function(){}})}(cytoscape),function(t){"use strict";t.Minheap=function(e,n,i){return new t.Heap(e,n,t.Heap.minHeapComparator,i)},t.Maxheap=function(e,n,i){return new t.Heap(e,n,t.Heap.maxHeapComparator,i)},t.Heap=function(e,n,i,r){if("undefined"!=typeof i&&"undefined"!=typeof n){"undefined"==typeof r&&(r=t.Heap.idFn);var o,a,s,l=[],u={},c=[],h=0;for(n=this.getArgumentAsCollection(n,e),s=n.length,h=0;s>h;h+=1){if(l.push(r.call(e,n[h],h,n)),o=n[h].id(),u.hasOwnProperty(o))throw"ERROR: Multiple items with the same id found: "+o;u[o]=h,c.push(o)}for(this._private={cy:e,heap:l,pointers:u,elements:c,comparator:i,extractor:r,length:s},h=Math.floor(s/2);h>=0;h-=1)a=this.heapify(h);return a}},t.Heap.idFn=function(t){return t.id()},t.Heap.minHeapComparator=function(t,e){return t>=e},t.Heap.maxHeapComparator=function(t,e){return e>=t},t.fn.heap=function(e,n){for(var i in e){var r=e[i];t.Heap.prototype[i]=r}},t.heapfn=t.Heap.prototype,t.heapfn.size=function(){return this._private.length},t.heapfn.getArgumentAsCollection=function(e,n){var i;if("undefined"==typeof n&&(n=this._private.cy),t.is.elementOrCollection(e))i=e;else{for(var r=[],o=[].concat.apply([],[e]),a=0;a<o.length;a++){var s=o[a],l=n.getElementById(s);l.length>0&&r.push(l)}i=new t.Collection(n,r)}return i},t.heapfn.isHeap=function(){var t,e,n,i,r,o=this._private.heap,a=o.length,s=this._private.comparator;for(t=0;a>t;t+=1)if(e=2*t+1,n=e+1,i=!(a>e)||s(o[e],o[t]),r=!(a>n)||s(o[n],o[t]),!i||!r)return!1;return!0},t.heapfn.heapSwap=function(t,e){var n=this._private.heap,i=this._private.pointers,r=this._private.elements,o=n[t],a=r[t],s=r[t],l=r[e];n[t]=n[e],r[t]=r[e],i[s]=e,i[l]=t,n[e]=o,r[e]=a},t.heapfn.heapify=function(t,e){var n,i,r,o,a,s,l,u=0,c=!1;for("undefined"==typeof e&&(e=!0),n=this._private.heap,u=n.length,s=this._private.comparator,i=t;!c;)e?(r=2*i+1,o=r+1,a=i,u>r&&!s(n[r],n[a])&&(a=r),u>o&&!s(n[o],n[a])&&(a=o),c=a===i,c||(this.heapSwap(a,i),i=a)):(l=Math.floor((i-1)/2),a=i,c=0>l||s(n[a],n[l]),c||(this.heapSwap(a,l),i=l))},t.heapfn.insert=function(t){var e,n,i,r,o,a=this.getArgumentAsCollection(t),s=a.length;for(o=0;s>o;o+=1){if(e=a[o],n=this._private.heap.length,i=this._private.extractor(e),r=e.id(),this._private.pointers.hasOwnProperty(r))throw"ERROR: Multiple items with the same id found: "+r;this._private.heap.push(i),this._private.elements.push(r),this._private.pointers[r]=n,this.heapify(n,!1)}this._private.length=this._private.heap.length},t.heapfn.getValueById=function(t){if(this._private.pointers.hasOwnProperty(t)){var e=this._private.pointers[t];return this._private.heap[e]}},t.heapfn.contains=function(t){for(var e=this.getArgumentAsCollection(t),n=0;n<e.length;n+=1){var i=e[n].id();if(!this._private.pointers.hasOwnProperty(i))return!1}return!0},t.heapfn.top=function(){return this._private.length>0?{value:this._private.heap[0],id:this._private.elements[0]}:void 0},t.heapfn.pop=function(){if(this._private.length>0){var t,e,n,i=this.top(),r=this._private.length-1;return this.heapSwap(0,r),t=this._private.elements[r],e=this._private.heap[r],n=t,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[n]=void 0,this.heapify(0),i}},t.heapfn.findDirectionHeapify=function(t){var e=Math.floor((t-1)/2),n=this._private.heap,i=0>e||this._private.comparator(n[t],n[e]);this.heapify(t,i)},t.heapfn.edit=function(e,n){for(var i=this.getArgumentAsCollection(e),r=0;r<i.length;r+=1){var o=i[r].id(),a=this._private.pointers[o],s=this._private.heap[a];t.is.number(n)?this._private.heap[a]=n:t.is.fn(n)&&(this._private.heap[a]=n.call(this._private.cy,s,a)),this.findDirectionHeapify(a)}},t.heapfn.remove=function(t){for(var e=this.getArgumentAsCollection(t),n=0;n<e.length;n+=1){var i,r,o,a=e[n].id(),s=this._private.pointers[a],l=this._private.length-1;s!==l&&this.heapSwap(s,l),i=this._private.elements[l],r=this._private.heap[l],o=i,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[o]=void 0,this.findDirectionHeapify(s)}return r}}(cytoscape),function(t){"use strict";function e(t){this.options=t,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:t.cy,container:t.cy.container(),canvases:new Array(e.CANVAS_LAYERS),contexts:new Array(e.CANVAS_LAYERS),canvasNeedsRedraw:new Array(e.CANVAS_LAYERS),bufferCanvases:new Array(e.BUFFER_COUNT),bufferContexts:new Array(e.CANVAS_LAYERS)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.showFps=t.showFps,this.bindings=[],this.data.canvasContainer=document.createElement("div");var n=this.data.canvasContainer.style;n.position="absolute",n.zIndex="0",n.overflow="hidden",this.data.container.appendChild(this.data.canvasContainer);for(var i=0;i<e.CANVAS_LAYERS;i++)this.data.canvases[i]=document.createElement("canvas"),this.data.contexts[i]=this.data.canvases[i].getContext("2d"),this.data.canvases[i].style.position="absolute",this.data.canvases[i].setAttribute("data-id","layer"+i),this.data.canvases[i].style.zIndex=String(e.CANVAS_LAYERS-i),this.data.canvasContainer.appendChild(this.data.canvases[i]),this.data.canvasNeedsRedraw[i]=!1;this.data.topCanvas=this.data.canvases[0],this.data.canvases[e.NODE].setAttribute("data-id","layer"+e.NODE+"-node"),this.data.canvases[e.SELECT_BOX].setAttribute("data-id","layer"+e.SELECT_BOX+"-selectbox"),this.data.canvases[e.DRAG].setAttribute("data-id","layer"+e.DRAG+"-drag");for(var i=0;i<e.BUFFER_COUNT;i++)this.data.bufferCanvases[i]=document.createElement("canvas"),this.data.bufferContexts[i]=this.data.bufferCanvases[i].getContext("2d"),this.data.bufferCanvases[i].style.position="absolute",this.data.bufferCanvases[i].setAttribute("data-id","buffer"+i),this.data.bufferCanvases[i].style.zIndex=String(-i-1),this.data.bufferCanvases[i].style.visibility="hidden";this.hideEdgesOnViewport=t.hideEdgesOnViewport,this.hideLabelsOnViewport=t.hideLabelsOnViewport,this.textureOnViewport=t.textureOnViewport,this.wheelSensitivity=t.wheelSensitivity,this.motionBlurEnabled=t.motionBlur,this.forcedPixelRatio=t.pixelRatio,this.motionBlur=!0,this.motionBlurOpacity=t.motionBlurOpacity,this.motionBlurTransparency=1-this.motionBlurOpacity,this.motionBlurPxRatio=1,this.mbPxRBlurry=1,this.minMbLowQualFrames=4,this.fullQualityMb=!1,this.clearedForMotionBlur=[],this.desktopTapThreshold=t.desktopTapThreshold,this.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,this.touchTapThreshold=t.touchTapThreshold,this.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,this.tapholdDuration=500,this.load()}e.CANVAS_LAYERS=3,e.SELECT_BOX=0,e.DRAG=1,e.NODE=2,e.BUFFER_COUNT=3,e.TEXTURE_BUFFER=0,e.MOTIONBLUR_BUFFER_NODE=1,e.MOTIONBLUR_BUFFER_DRAG=2,e.panOrBoxSelectDelay=400;var n="undefined"!=typeof Path2D;e.usePaths=function(){return n},e.prototype.notify=function(n){var i;i=t.is.array(n.type)?n.type:[n.type];for(var r=0;r<i.length;r++){var o=i[r];switch(o){case"destroy":return void this.destroy();case"add":case"remove":case"load":this.updateNodesCache(),this.updateEdgesCache();break;case"viewport":this.data.canvasNeedsRedraw[e.SELECT_BOX]=!0;break;case"style":this.updateCachedZSortedEles()}("load"===o||"resize"===o)&&(this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.data.container))}this.data.canvasNeedsRedraw[e.NODE]=!0,this.data.canvasNeedsRedraw[e.DRAG]=!0,this.redraw()},e.prototype.destroy=function(){this.destroyed=!0;for(var t=0;t<this.bindings.length;t++){var e=this.bindings[t],n=e;n.target.removeEventListener(n.event,n.handler,n.useCapture)}if(this.removeObserver&&this.removeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(i){}};for(var i in t.math)e.prototype[i]=t.math[i];t("renderer","canvas",e)}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype,i=e.arrowShapes={};e.arrowShapeHeight=.3;var r=function(t,e,n,i,r,o,a,s){var l=n-r/2,u=n+r/2,c=i-o/2,h=i+o/2;return t>=l&&u>=t&&e>=c&&h>=e},o=function(t,e,n,i,r){i=-i;var o=t*Math.cos(i)-e*Math.sin(i),a=t*Math.sin(i)+e*Math.cos(i),s=o*n,l=a*n,u=s+r.x,c=l+r.y;return{x:u,y:c}};i.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(e,n,r,o,a,s,l,u){var c=i.arrow._points;return t.math.pointInsidePolygon(e,n,c,r,o,a,s,l,u)},roughCollide:r,draw:function(t,e,n,r){for(var a=i.arrow._points,s=0;s<a.length/2;s++){var l=o(a[2*s],a[2*s+1],e,n,r);t.lineTo(l.x,l.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},i.triangle=i.arrow,i["triangle-backcurve"]={_ctrlPt:[0,-.15],collide:function(e,n,r,o,a,s,l,u){var c=i.triangle._points;return t.math.pointInsidePolygon(e,n,c,r,o,a,s,l,u)},roughCollide:r,draw:function(t,e,n,r){for(var a,s=i.triangle._points,l=0;l<s.length/2;l++){var u=o(s[2*l],s[2*l+1],e,n,r);0===l&&(a=u),t.lineTo(u.x,u.y)}var c=this._ctrlPt,h=o(c[0],c[1],e,n,r);t.quadraticCurveTo(h.x,h.y,a.x,a.y)},spacing:function(t){return 0},gap:function(t){return t._private.style.width.pxValue}},i["triangle-tee"]={_points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],_pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,n,r,o,a,s,l,u){var c=i["triangle-tee"]._points,h=i["triangle-tee"]._pointsTee,d=t.math.pointInsidePolygon(e,n,h,r,o,a,s,l,u)||t.math.pointInsidePolygon(e,n,c,r,o,a,s,l,u);return d},roughCollide:r,draw:function(t,e,n,r){for(var a=i["triangle-tee"]._points,s=0;s<a.length/2;s++){var l=o(a[2*s],a[2*s+1],e,n,r);t.lineTo(l.x,l.y)}var u=i["triangle-tee"]._pointsTee,c=o(u[0],u[1],e,n,r);t.moveTo(c.x,c.y);for(var s=0;s<u.length/2;s++){var l=o(u[2*s],u[2*s+1],e,n,r);t.lineTo(l.x,l.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},i["half-triangle-overshot"]={_points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0,collide:function(e,n,i,r,o,a,s,l){var u=this._points;return t.math.pointInsidePolygon(e,n,u,i,r,o,a,s,l)},roughCollide:r,draw:function(t,e,n,i){for(var r=this._points,a=0;a<r.length/2;a++){var s=o(r[2*a],r[2*a+1],e,n,i);t.lineTo(s.x,s.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},i.none={collide:function(t,e,n,i,r,o,a,s){return!1},roughCollide:function(t,e,n,i,r,o,a,s){return!1},draw:function(t){},spacing:function(t){return 0},gap:function(t){return 0}},i.circle={_baseRadius:.15,collide:function(t,e,n,r,o,a,s,l){if(o!=a){var u=(a+l)/(o+l);return e/=u,r/=u,Math.pow(n-t,2)+Math.pow(r-e,2)<=Math.pow((o+l)*i.circle._baseRadius,2)}return Math.pow(n-t,2)+Math.pow(r-e,2)<=Math.pow((o+l)*i.circle._baseRadius,2)},roughCollide:r,draw:function(t,e,n,r){t.arc(r.x,r.y,i.circle._baseRadius*e,0,2*Math.PI,!1)},spacing:function(t){return n.getArrowWidth(t._private.style.width.pxValue)*i.circle._baseRadius},gap:function(t){return 2*t._private.style.width.pxValue}},i.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(e,n,r,o,a,s,l,u){var c=i.inhibitor._points;return t.math.pointInsidePolygon(e,n,c,r,o,a,s,l,u)},roughCollide:r,draw:function(t,e,n,r){for(var a=i.inhibitor._points,s=0;s<a.length/2;s++){var l=o(a[2*s],a[2*s+1],e,n,r);t.lineTo(l.x,l.y)}},spacing:function(t){return 1},gap:function(t){return 1}},i.tee=i.inhibitor,i.square={_points:[-.15,0,.15,0,.15,-.3,-.15,-.3],collide:function(e,n,r,o,a,s,l,u){var c=i.square._points;return t.math.pointInsidePolygon(e,n,c,r,o,a,s,l,u)},roughCollide:r,draw:function(t,e,n,r){for(var a=i.square._points,s=0;s<a.length/2;s++){var l=o(a[2*s],a[2*s+1],e,n,r);t.lineTo(l.x,l.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},i.diamond={_points:[-.15,-.15,0,-.3,.15,-.15,0,0],collide:function(e,n,r,o,a,s,l,u){var c=i.diamond._points;return t.math.pointInsidePolygon(e,n,c,r,o,a,s,l,u)},roughCollide:r,draw:function(t,e,n,r){for(var a=i.diamond._points,s=0;s<a.length/2;s++){var l=o(a[2*s],a[2*s+1],e,n,r);t.lineTo(l.x,l.y)}},spacing:function(t){return 0},gap:function(t){return t._private.style.width.pxValue}}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.getCachedNodes=function(){var t=this.data,e=this.data.cy;return null==t.cache&&(t.cache={}),null==t.cache.cachedNodes&&(t.cache.cachedNodes=e.nodes()),t.cache.cachedNodes},n.updateNodesCache=function(){var t=this.data,e=this.data.cy;null==t.cache&&(t.cache={}),t.cache.cachedNodes=e.nodes()},n.getCachedEdges=function(){var t=this.data,e=this.data.cy;return null==t.cache&&(t.cache={}),null==t.cache.cachedEdges&&(t.cache.cachedEdges=e.edges()),t.cache.cachedEdges},n.updateEdgesCache=function(){var t=this.data,e=this.data.cy;null==t.cache&&(t.cache={}),t.cache.cachedEdges=e.edges()}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.projectIntoViewport=function(t,e){var n=this.findContainerClientCoords(),i=n[0],r=n[1],o=t-i,a=e-r;return o-=this.data.cy.pan().x,a-=this.data.cy.pan().y,o/=this.data.cy.zoom(),a/=this.data.cy.zoom(),[o,a]},n.findContainerClientCoords=function(){var t=this.data.container,e=this.containerBB=this.containerBB||t.getBoundingClientRect();return[e.left,e.top,e.right-e.left,e.bottom-e.top]},n.invalidateContainerClientCoordsCache=function(){this.containerBB=null},n.findNearestElement=function(n,i,r,o){function a(t){var o=t.outerWidth()+2*f,a=t.outerHeight()+2*f,s=o/2,u=a/2,h=t._private.position;if(h.x-s<=n&&n<=h.x+s&&h.y-u<=i&&i<=h.y+u){var d=!r||t.visible()&&!t.transparent();if(r&&!d)return;var p=e.nodeShapes[l.getNodeShape(t)];t._private.style["border-width"].pxValue/2,p.checkPoint(n,i,0,o,a,h.x,h.y)&&c.push(t)}}function s(o){var s,u,h=o._private.rscratch,f=o._private.style,g=f.width.pxValue/2+p,v=g*g,y=2*g,m=o._private.source,x=o._private.target,b=!1,w=function(){if(void 0!==u)return u;if(!r)return u=!0,!0;var t=o.visible()&&!o.transparent();return t?(u=!0,!0):(u=!1,!1)};if("self"===h.edgeType||"compound"===h.edgeType)((b=t.math.inBezierVicinity(n,i,h.startX,h.startY,h.cp2ax,h.cp2ay,h.selfEdgeMidX,h.selfEdgeMidY,v))&&w()&&v>(s=t.math.sqDistanceToQuadraticBezier(n,i,h.startX,h.startY,h.cp2ax,h.cp2ay,h.selfEdgeMidX,h.selfEdgeMidY))||(b=t.math.inBezierVicinity(n,i,h.selfEdgeMidX,h.selfEdgeMidY,h.cp2cx,h.cp2cy,h.endX,h.endY,v))&&w()&&v>(s=t.math.sqDistanceToQuadraticBezier(n,i,h.selfEdgeMidX,h.selfEdgeMidY,h.cp2cx,h.cp2cy,h.endX,h.endY)))&&c.push(o);else if("haystack"===h.edgeType){var _=f["haystack-radius"].value,E=_/2,T=x._private.position,D=x.width(),S=x.height(),N=m._private.position,C=m.width(),L=m.height(),M=N.x+h.source.x*C*E,P=N.y+h.source.y*L*E,k=T.x+h.target.x*D*E,I=T.y+h.target.y*S*E;(b=t.math.inLineVicinity(n,i,M,P,k,I,y))&&w()&&v>(s=t.math.sqDistanceToFiniteLine(n,i,M,P,k,I))&&c.push(o)}else"straight"===h.edgeType?(b=t.math.inLineVicinity(n,i,h.startX,h.startY,h.endX,h.endY,y))&&w()&&v>(s=t.math.sqDistanceToFiniteLine(n,i,h.startX,h.startY,h.endX,h.endY))&&c.push(o):"bezier"===h.edgeType&&(b=t.math.inBezierVicinity(n,i,h.startX,h.startY,h.cp2x,h.cp2y,h.endX,h.endY,v))&&w()&&v>(s=t.math.sqDistanceToQuadraticBezier(n,i,h.startX,h.startY,h.cp2x,h.cp2y,h.endX,h.endY))&&c.push(o);if(b&&w()&&0===c.length||c[c.length-1]!==o){var O=e.arrowShapes[f["source-arrow-shape"].value],A=e.arrowShapes[f["target-arrow-shape"].value],m=m||o._private.source,x=x||o._private.target,T=x._private.position,N=m._private.position,R=l.getArrowWidth(f.width.pxValue),B=l.getArrowHeight(f.width.pxValue),F=R,z=B;(O.roughCollide(n,i,h.arrowStartX,h.arrowStartY,R,B,[h.arrowStartX-N.x,h.arrowStartY-N.y],p)&&O.collide(n,i,h.arrowStartX,h.arrowStartY,R,B,[h.arrowStartX-N.x,h.arrowStartY-N.y],p)||A.roughCollide(n,i,h.arrowEndX,h.arrowEndY,F,z,[h.arrowEndX-T.x,h.arrowEndY-T.y],p)&&A.collide(n,i,h.arrowEndX,h.arrowEndY,F,z,[h.arrowEndX-T.x,h.arrowEndY-T.y],p))&&c.push(o)}d&&c.length>0&&c[c.length-1]===o&&(a(m),a(x))}for(var l=this,u=this.getCachedZSortedEles(),c=[],h=this.data.cy.zoom(),d=this.data.cy.hasCompoundNodes(),p=(o?24:8)/h,f=(o?8:2)/h,g=u.length-1;g>=0;g--){var v=u[g];if(c.length>0)break;"nodes"===v._private.group?a(u[g]):s(u[g])}return c.length>0?c[c.length-1]:null},n.getAllInBox=function(n,i,r,o){var a=this.getCachedNodes(),s=this.getCachedEdges(),l=[],u=Math.min(n,r),c=Math.max(n,r),h=Math.min(i,o),d=Math.max(i,o);n=u,r=c,i=h,o=d;for(var p,f=0;f<a.length;f++){var g=a[f]._private.position,v=this.getNodeShape(a[f]),y=this.getNodeWidth(a[f]),m=this.getNodeHeight(a[f]),x=a[f]._private.style["border-width"].pxValue/2,b=e.nodeShapes[v];b.intersectBox(n,i,r,o,y,m,g.x,g.y,x)&&l.push(a[f])}for(var f=0;f<s.length;f++){var w=s[f]._private.rscratch;if("self"==s[f]._private.rscratch.edgeType&&((p=t.math.boxInBezierVicinity(n,i,r,o,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,s[f]._private.style.width.pxValue))&&(2==p||1==p&&t.math.checkBezierInBox(n,i,r,o,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,s[f]._private.style.width.pxValue))||(p=t.math.boxInBezierVicinity(n,i,r,o,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,s[f]._private.style.width.pxValue))&&(2==p||1==p&&t.math.checkBezierInBox(n,i,r,o,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,s[f]._private.style.width.pxValue)))&&l.push(s[f]),"bezier"==w.edgeType&&(p=t.math.boxInBezierVicinity(n,i,r,o,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,s[f]._private.style.width.pxValue))&&(2==p||1==p&&t.math.checkBezierInBox(n,i,r,o,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,s[f]._private.style.width.pxValue))&&l.push(s[f]),"straight"==w.edgeType&&(p=t.math.boxInBezierVicinity(n,i,r,o,w.startX,w.startY,.5*w.startX+.5*w.endX,.5*w.startY+.5*w.endY,w.endX,w.endY,s[f]._private.style.width.pxValue))&&(2==p||1==p&&t.math.checkStraightEdgeInBox(n,i,r,o,w.startX,w.startY,w.endX,w.endY,s[f]._private.style.width.pxValue))&&l.push(s[f]),"haystack"==w.edgeType){var _=s[f].target()[0],E=_.position(),T=s[f].source()[0],D=T.position(),S=D.x+w.source.x,N=D.y+w.source.y,C=E.x+w.target.x,L=E.y+w.target.y,M=S>=n&&r>=S&&N>=i&&o>=N,P=C>=n&&r>=C&&L>=i&&o>=L;
M&&P&&l.push(s[f])}}return l},n.getNodeWidth=function(t){return t.width()},n.getNodeHeight=function(t){return t.height()},n.getNodeShape=function(t){var e=t._private.style.shape.value;return t.isParent()?"rectangle"===e||"roundrectangle"===e?e:"rectangle":e},n.getNodePadding=function(t){var e=t._private.style["padding-left"].pxValue,n=t._private.style["padding-right"].pxValue,i=t._private.style["padding-top"].pxValue,r=t._private.style["padding-bottom"].pxValue;return isNaN(e)&&(e=0),isNaN(n)&&(n=0),isNaN(i)&&(i=0),isNaN(r)&&(r=0),{left:e,right:n,top:i,bottom:r}},n.zOrderSort=t.Collection.zIndexSort,n.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},n.getCachedZSortedEles=function(t){var e=this.lastZOrderCachedNodes,n=this.lastZOrderCachedEdges,i=this.getCachedNodes(),r=this.getCachedEdges(),o=[];if(!t&&e&&n&&e===i&&n===r)o=this.cachedZSortedEles;else{for(var a=0;a<i.length;a++){var s=i[a];(s.animated()||s.visible()&&!s.transparent())&&o.push(s)}for(var a=0;a<r.length;a++){var l=r[a];(l.animated()||l.visible()&&!l.transparent())&&o.push(l)}o.sort(this.zOrderSort),this.cachedZSortedEles=o}return this.lastZOrderCachedNodes=i,this.lastZOrderCachedEdges=r,o},n.projectBezier=function(e){function n(t){o.push({x:i(t[0],t[2],t[4],.05),y:i(t[1],t[3],t[5],.05)}),o.push({x:i(t[0],t[2],t[4],.25),y:i(t[1],t[3],t[5],.25)}),o.push({x:i(t[0],t[2],t[4],.4),y:i(t[1],t[3],t[5],.4)});var e={x:i(t[0],t[2],t[4],.5),y:i(t[1],t[3],t[5],.5)};o.push(e),"self"===r.edgeType||"compound"===r.edgeType?(r.midX=r.selfEdgeMidX,r.midY=r.selfEdgeMidY):(r.midX=e.x,r.midY=e.y),o.push({x:i(t[0],t[2],t[4],.6),y:i(t[1],t[3],t[5],.6)}),o.push({x:i(t[0],t[2],t[4],.75),y:i(t[1],t[3],t[5],.75)}),o.push({x:i(t[0],t[2],t[4],.95),y:i(t[1],t[3],t[5],.95)})}var i=t.math.qbezierAt,r=e._private.rscratch,o=e._private.rstyle.bezierPts=[];"self"===r.edgeType?(n([r.startX,r.startY,r.cp2ax,r.cp2ay,r.selfEdgeMidX,r.selfEdgeMidY]),n([r.selfEdgeMidX,r.selfEdgeMidY,r.cp2cx,r.cp2cy,r.endX,r.endY])):"bezier"===r.edgeType&&n([r.startX,r.startY,r.cp2x,r.cp2y,r.endX,r.endY])},n.recalculateNodeLabelProjection=function(t){var e=t._private.style.content.strValue;if(e&&!e.match(/^\s+$/)){var n,i,r=t.outerWidth(),o=t.outerHeight(),a=t._private.position,s=t._private.style["text-halign"].strValue,l=t._private.style["text-valign"].strValue,u=t._private.rscratch,c=t._private.rstyle;switch(s){case"left":n=a.x-r/2;break;case"right":n=a.x+r/2;break;default:n=a.x}switch(l){case"top":i=a.y-o/2;break;case"bottom":i=a.y+o/2;break;default:i=a.y}u.labelX=n,u.labelY=i,c.labelX=n,c.labelY=i,this.applyLabelDimensions(t)}},n.recalculateEdgeLabelProjection=function(e){var n=e._private.style.content.strValue;if(n&&!n.match(/^\s+$/)){var i,r,o,a,s=e._private,l=s.rscratch,u=s.rstyle;if("self"==l.edgeType)o=l.selfEdgeMidX,a=l.selfEdgeMidY;else if("straight"==l.edgeType)o=(l.startX+l.endX)/2,a=(l.startY+l.endY)/2;else if("bezier"==l.edgeType)o=t.math.qbezierAt(l.startX,l.cp2x,l.endX,.5),a=t.math.qbezierAt(l.startY,l.cp2y,l.endY,.5);else if("haystack"==l.edgeType){var c=l.haystackPts;o=(c[0]+c[2])/2,a=(c[1]+c[3])/2}i=o,r=a,l.labelX=i,l.labelY=r,u.labelX=i,u.labelY=r,this.applyLabelDimensions(e)}},n.applyLabelDimensions=function(t){var e=t._private.rscratch,n=t._private.rstyle,i=this.getLabelText(t),r=this.calculateLabelDimensions(t,i);n.labelWidth=r.width,e.labelWidth=r.width,n.labelHeight=r.height,e.labelHeight=r.height},n.getLabelText=function(t){var e=t._private.style,n=t._private.style.content.strValue,i=e["text-transform"].value,r=t._private.rscratch;if("none"==i||("uppercase"==i?n=n.toUpperCase():"lowercase"==i&&(n=n.toLowerCase())),"wrap"===e["text-wrap"].value){if(r.labelWrapKey===r.labelKey)return r.labelWrapCachedText;for(var o=n.split("\n"),a=e["text-max-width"].pxValue,s=[],l=0;l<o.length;l++){var u=o[l],c=this.calculateLabelDimensions(t,u,"line="+u),h=c.width;if(h>a){for(var d=u.split(/\s+/),p="",f=0;f<d.length;f++){var g=d[f],v=0===p.length?g:p+" "+g,y=this.calculateLabelDimensions(t,v,"testLine="+v),m=y.width;a>=m?p+=g+" ":(s.push(p),p=g+" ")}p.match(/^\s+$/)||s.push(p)}else s.push(u)}r.labelWrapCachedLines=s,r.labelWrapCachedText=n=s.join("\n"),r.labelWrapKey=r.labelKey}return n},n.calculateLabelDimensions=function(t,e,n){var i=this,r=t._private.style,o=r["font-style"].strValue,a=r["font-size"].pxValue+"px",s=r["font-family"].strValue,l=r["font-weight"].strValue,u=t._private.labelKey;n&&(u+="$@$"+n);var c=i.labelDimCache||(i.labelDimCache={});if(c[u])return c[u];var h=this.labelCalcDiv;h||(h=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(h));var d=h.style;return d.fontFamily=s,d.fontStyle=o,d.fontSize=a,d.fontWeight=l,d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none",d.padding="0",d.lineHeight="1",d.whiteSpace="wrap"===r["text-wrap"].value?"pre":"normal",h.textContent=e,c[u]={width:h.clientWidth,height:h.clientHeight},c[u]},n.recalculateRenderedStyle=function(t){for(var e=[],n=[],i={},r=0;r<t.length;r++){var o=t[r],a=o._private,s=a.style,l=a.rscratch,u=a.rstyle,c=a.data.id,h=null!=l.boundingBoxKey&&a.boundingBoxKey===l.boundingBoxKey,d=null!=l.labelKey&&a.labelKey===l.labelKey,p=h&&d;if("nodes"===o._private.group){var f=a.position,g=null!=u.nodeX&&null!=u.nodeY&&f.x===u.nodeX&&f.y===u.nodeY,v=null!=u.nodeW&&u.nodeW===s.width.pxValue,y=null!=u.nodeH&&u.nodeH===s.height.pxValue;g&&p&&v&&y||n.push(o),u.nodeX=f.x,u.nodeY=f.y,u.nodeW=s.width.pxValue,u.nodeH=s.height.pxValue}else{var m=o._private.source._private.position,x=o._private.target._private.position,b=null!=u.srcX&&null!=u.srcY&&m.x===u.srcX&&m.y===u.srcY,w=null!=u.tgtX&&null!=u.tgtY&&x.x===u.tgtX&&x.y===u.tgtY,_=b&&w;if(!_||!p){var E=a.style["curve-style"].value;if("bezier"===E){if(!i[c]){e.push(o),i[c]=!0;for(var T=o.parallelEdges(),r=0;r<T.length;r++){var D=T[r],S=D._private.data.id;i[S]||(e.push(D),i[S]=!0)}}}else e.push(o)}u.srcX=m.x,u.srcY=m.y,u.tgtX=x.x,u.tgtY=x.y}l.boundingBoxKey=a.boundingBoxKey,l.labelKey=a.labelKey}this.recalculateEdgeProjections(e),this.recalculateLabelProjections(n,e)},n.recalculateLabelProjections=function(t,e){for(var n=0;n<t.length;n++)this.recalculateNodeLabelProjection(t[n]);for(var n=0;n<e.length;n++)this.recalculateEdgeLabelProjection(e[n])},n.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)},n.findEdgeControlPoints=function(n){if(n&&0!==n.length){for(var i,r=this.data.cy,o=r.hasCompoundNodes(),a={},s=[],l=[],u=0;u<n.length;u++){var c=n[u],h=c._private.style,d="unbundled-bezier"===h["curve-style"].value;if("none"!==h.display.value)if("haystack"!==h["curve-style"].value){var p=c._private.data.source,f=c._private.data.target;i=p>f?f+"-"+p:p+"-"+f,d&&(i="unbundled"+c._private.data.id),null==a[i]&&(a[i]=[],s.push(i)),a[i].push(c),d&&(a[i].hasUnbundled=!0)}else l.push(c)}for(var g,v,y,m,x,b,w,_,E,T,D,S,N,C,L=0;L<s.length;L++){i=s[L];var M=a[i];if(M.sort(function(t,e){return t._private.index-e._private.index}),g=M[0]._private.source,v=M[0]._private.target,g._private.data.id>v._private.data.id){var P=g;g=v,v=P}if(y=g._private.position,m=v._private.position,x=this.getNodeWidth(g),b=this.getNodeHeight(g),w=this.getNodeWidth(v),_=this.getNodeHeight(v),E=e.nodeShapes[this.getNodeShape(g)],T=e.nodeShapes[this.getNodeShape(v)],D=g._private.style["border-width"].pxValue,S=v._private.style["border-width"].pxValue,C=!1,M.length>1&&g!==v||M.hasUnbundled){var k=E.intersectLine(y.x,y.y,x,b,m.x,m.y,D/2),I=T.intersectLine(m.x,m.y,w,_,y.x,y.y,S/2),O={x1:k[0],x2:I[0],y1:k[1],y2:I[1]},A=I[1]-k[1],R=I[0]-k[0],B=Math.sqrt(R*R+A*A),F={x:R,y:A},z={x:F.x/B,y:F.y/B};N={x:-z.y,y:z.x},(T.checkPoint(k[0],k[1],S/2,w,_,m.x,m.y)||E.checkPoint(I[0],I[1],D/2,x,b,y.x,y.y))&&(N={},C=!0)}for(var c,q,u=0;u<M.length;u++){c=M[u],q=c._private.rscratch;var j=q.lastEdgeIndex,X=u,Y=q.lastNumEdges,V=M.length,G=c._private.style,U=G["control-point-step-size"].pxValue,W=void 0!==G["control-point-distance"]?G["control-point-distance"].pxValue:void 0,H=G["control-point-weight"].value,d="unbundled-bezier"===G["curve-style"].value,$=c._private.source!==g;$&&d&&(W*=-1);var Z=q.lastSrcCtlPtX,K=y.x,Q=q.lastSrcCtlPtY,J=y.y,tt=q.lastSrcCtlPtW,et=g.outerWidth(),nt=q.lastSrcCtlPtH,it=g.outerHeight(),rt=q.lastTgtCtlPtX,ot=m.x,at=q.lastTgtCtlPtY,st=m.y,lt=q.lastTgtCtlPtW,ut=v.outerWidth(),ct=q.lastTgtCtlPtH,ht=v.outerHeight(),dt=q.lastW,pt=G["control-point-step-size"].pxValue;if(q.badBezier=!!C,Z!==K||Q!==J||tt!==et||nt!==it||rt!==ot||at!==st||lt!==ut||ct!==ht||dt!==pt||!(j===X&&Y===V||d)){if(q.lastSrcCtlPtX=K,q.lastSrcCtlPtY=J,q.lastSrcCtlPtW=et,q.lastSrcCtlPtH=it,q.lastTgtCtlPtX=ot,q.lastTgtCtlPtY=st,q.lastTgtCtlPtW=ut,q.lastTgtCtlPtH=ht,q.lastEdgeIndex=X,q.lastNumEdges=V,q.lastWidth=pt,g===v){q.edgeType="self";var ft=u,gt=U;d&&(ft=0,gt=W),q.cp2ax=y.x,q.cp2ay=y.y-(1+Math.pow(b,1.12)/100)*gt*(ft/3+1),q.cp2cx=y.x-(1+Math.pow(x,1.12)/100)*gt*(ft/3+1),q.cp2cy=y.y,q.selfEdgeMidX=(q.cp2ax+q.cp2cx)/2,q.selfEdgeMidY=(q.cp2ay+q.cp2cy)/2}else if(o&&(g.isParent()||g.isChild()||v.isParent()||v.isChild())&&(g.parents().anySame(v)||v.parents().anySame(g))){q.edgeType="compound",q.badBezier=!1;var ft=u,gt=U;d&&(ft=0,gt=W);var vt=50,yt={x:y.x-x/2,y:y.y-b/2},mt={x:m.x-w/2,y:m.y-_/2},xt=1;q.cp2ax=yt.x,q.compoundStretchA=Math.max(xt,Math.log(.01*x)),q.cp2ay=yt.y-(1+Math.pow(vt,1.12)/100)*gt*(ft/3+1)*q.compoundStretchA,q.compoundStretchB=Math.max(xt,Math.log(.01*w)),q.cp2cx=mt.x-(1+Math.pow(vt,1.12)/100)*gt*(ft/3+1)*q.compoundStretchB,q.cp2cy=mt.y,q.selfEdgeMidX=(q.cp2ax+q.cp2cx)/2,q.selfEdgeMidY=(q.cp2ay+q.cp2cy)/2}else if(M.length%2!==1||u!==Math.floor(M.length/2)||d){var bt,wt=(.5-M.length/2+u)*U,_t=t.math.signum(wt);bt=d?W:void 0!==W?_t*W:void 0;var Et=void 0!==bt?bt:wt,Tt=1-H,Dt=H;$&&(Tt=H,Dt=1-H);var St={x:O.x1*Tt+O.x2*Dt,y:O.y1*Tt+O.y2*Dt};q.edgeType="bezier",q.cp2x=St.x+N.x*Et,q.cp2y=St.y+N.y*Et}else q.edgeType="straight";this.findEndpoints(c);var Nt=!t.is.number(q.startX)||!t.is.number(q.startY),Ct=!t.is.number(q.arrowStartX)||!t.is.number(q.arrowStartY),Lt=!t.is.number(q.endX)||!t.is.number(q.endY),Mt=!t.is.number(q.arrowEndX)||!t.is.number(q.arrowEndY),Pt=3,kt=this.getArrowWidth(c._private.style.width.pxValue)*e.arrowShapeHeight,It=Pt*kt,Ot=t.math.distance({x:q.cp2x,y:q.cp2y},{x:q.startX,y:q.startY}),At=It>Ot,Rt=t.math.distance({x:q.cp2x,y:q.cp2y},{x:q.endX,y:q.endY}),Bt=It>Rt;if("bezier"===q.edgeType){var Ft=!1;if(Nt||Ct||At){Ft=!0;var zt={x:q.cp2x-y.x,y:q.cp2y-y.y},qt=Math.sqrt(zt.x*zt.x+zt.y*zt.y),jt={x:zt.x/qt,y:zt.y/qt},Xt=Math.max(x,b),Yt={x:q.cp2x+2*jt.x*Xt,y:q.cp2y+2*jt.y*Xt},Vt=E.intersectLine(y.x,y.y,x,b,Yt.x,Yt.y,D/2);At?(q.cp2x=q.cp2x+jt.x*(It-Ot),q.cp2y=q.cp2y+jt.y*(It-Ot)):(q.cp2x=Vt[0]+jt.x*It,q.cp2y=Vt[1]+jt.y*It)}if(Lt||Mt||Bt){Ft=!0;var zt={x:q.cp2x-m.x,y:q.cp2y-m.y},qt=Math.sqrt(zt.x*zt.x+zt.y*zt.y),jt={x:zt.x/qt,y:zt.y/qt},Xt=Math.max(x,b),Yt={x:q.cp2x+2*jt.x*Xt,y:q.cp2y+2*jt.y*Xt},Gt=T.intersectLine(m.x,m.y,w,_,Yt.x,Yt.y,S/2);Bt?(q.cp2x=q.cp2x+jt.x*(It-Rt),q.cp2y=q.cp2y+jt.y*(It-Rt)):(q.cp2x=Gt[0]+jt.x*It,q.cp2y=Gt[1]+jt.y*It)}Ft&&this.findEndpoints(c)}else"straight"===q.edgeType&&(q.midX=(K+ot)/2,q.midY=(J+st)/2);this.projectBezier(c),this.recalculateEdgeLabelProjection(c)}}}for(var u=0;u<l.length;u++){var c=l[u],Ut=c._private,Wt=Ut.rscratch,q=Wt;if(!Wt.haystack){var Ht=2*Math.random()*Math.PI;Wt.source={x:Math.cos(Ht),y:Math.sin(Ht)};var Ht=2*Math.random()*Math.PI;Wt.target={x:Math.cos(Ht),y:Math.sin(Ht)}}var g=Ut.source,v=Ut.target,y=g._private.position,m=v._private.position,x=g.width(),w=v.width(),b=g.height(),_=v.height(),Xt=h["haystack-radius"].value,$t=Xt/2;q.haystackPts=[q.source.x*x*$t+y.x,q.source.y*b*$t+y.y,q.target.x*w*$t+m.x,q.target.y*_*$t+m.y],Wt.edgeType="haystack",Wt.haystack=!0,this.recalculateEdgeLabelProjection(c)}return a}},n.findEndpoints=function(n){var i,r=n.source()[0],o=n.target()[0],a=n._private.style["target-arrow-shape"].value,s=n._private.style["source-arrow-shape"].value,l=o._private.style["border-width"].pxValue,u=r._private.style["border-width"].pxValue,c=n._private.rscratch;if("self"==c.edgeType||"compound"==c.edgeType){var h=[c.cp2cx,c.cp2cy];i=e.nodeShapes[this.getNodeShape(o)].intersectLine(o._private.position.x,o._private.position.y,this.getNodeWidth(o),this.getNodeHeight(o),h[0],h[1],l/2);var d=t.math.shortenIntersection(i,h,e.arrowShapes[a].spacing(n)),p=t.math.shortenIntersection(i,h,e.arrowShapes[a].gap(n));c.endX=p[0],c.endY=p[1],c.arrowEndX=d[0],c.arrowEndY=d[1];var h=[c.cp2ax,c.cp2ay];i=e.nodeShapes[this.getNodeShape(r)].intersectLine(r._private.position.x,r._private.position.y,this.getNodeWidth(r),this.getNodeHeight(r),h[0],h[1],u/2);var f=t.math.shortenIntersection(i,h,e.arrowShapes[s].spacing(n)),g=t.math.shortenIntersection(i,h,e.arrowShapes[s].gap(n));c.startX=g[0],c.startY=g[1],c.arrowStartX=f[0],c.arrowStartY=f[1]}else if("straight"==c.edgeType){i=e.nodeShapes[this.getNodeShape(o)].intersectLine(o._private.position.x,o._private.position.y,this.getNodeWidth(o),this.getNodeHeight(o),r.position().x,r.position().y,l/2),c.noArrowPlacement=0===i.length;var d=t.math.shortenIntersection(i,[r.position().x,r.position().y],e.arrowShapes[a].spacing(n)),p=t.math.shortenIntersection(i,[r.position().x,r.position().y],e.arrowShapes[a].gap(n));c.endX=p[0],c.endY=p[1],c.arrowEndX=d[0],c.arrowEndY=d[1],i=e.nodeShapes[this.getNodeShape(r)].intersectLine(r._private.position.x,r._private.position.y,this.getNodeWidth(r),this.getNodeHeight(r),o.position().x,o.position().y,u/2),c.noArrowPlacement=0===i.length;var f=t.math.shortenIntersection(i,[o.position().x,o.position().y],e.arrowShapes[s].spacing(n)),g=t.math.shortenIntersection(i,[o.position().x,o.position().y],e.arrowShapes[s].gap(n));c.startX=g[0],c.startY=g[1],c.arrowStartX=f[0],c.arrowStartY=f[1],c.badLine=!(t.is.number(c.startX)&&t.is.number(c.startY)&&t.is.number(c.endX)&&t.is.number(c.endY))}else if("bezier"==c.edgeType){var h=[c.cp2x,c.cp2y];i=e.nodeShapes[this.getNodeShape(o)].intersectLine(o._private.position.x,o._private.position.y,this.getNodeWidth(o),this.getNodeHeight(o),h[0],h[1],l/2);var d=t.math.shortenIntersection(i,h,e.arrowShapes[a].spacing(n)),p=t.math.shortenIntersection(i,h,e.arrowShapes[a].gap(n));c.endX=p[0],c.endY=p[1],c.arrowEndX=d[0],c.arrowEndY=d[1],i=e.nodeShapes[this.getNodeShape(r)].intersectLine(r._private.position.x,r._private.position.y,this.getNodeWidth(r),this.getNodeHeight(r),h[0],h[1],u/2);var f=t.math.shortenIntersection(i,h,e.arrowShapes[s].spacing(n)),g=t.math.shortenIntersection(i,h,e.arrowShapes[s].gap(n));c.startX=g[0],c.startY=g[1],c.arrowStartX=f[0],c.arrowStartY=f[1]}else if(c.isArcEdge)return},n.findEdges=function(t){for(var e=this.getCachedEdges(),n={},i=[],r=0;r<t.length;r++)n[t[r]._private.data.id]=t[r];for(var r=0;r<e.length;r++)(n[e[r]._private.data.source]||n[e[r]._private.data.target])&&i.push(e[r]);return i},n.getArrowWidth=n.getArrowHeight=function(t){var e=this.arrowWidthCache=this.arrowWidthCache||{},n=e[t];return n?n:(n=Math.max(Math.pow(13.37*t,.9),29),e[t]=n,n)}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.drawEdge=function(t,n,i){var r=n._private.rscratch,o=e.usePaths();if(!r.badBezier&&("bezier"!==r.edgeType&&"straight"!==r.edgeType||!isNaN(r.startX))){var a=n._private.style;if(!(a.width.pxValue<=0)){var s=a["overlay-padding"].pxValue,l=a["overlay-opacity"].value,u=a["overlay-color"].value;if(i){if(0===l)return;this.strokeStyle(t,u[0],u[1],u[2],l),t.lineCap="round","self"!=n._private.rscratch.edgeType||o||(t.lineCap="butt")}else{var c=a["line-color"].value;this.strokeStyle(t,c[0],c[1],c[2],a.opacity.value),t.lineCap="butt"}var h,d,p,f;p=h=n._private.source,f=d=n._private.target;var g=a.width.pxValue+(i?2*s:0),v=i?"solid":a["line-style"].value;t.lineWidth=g;var y=a["shadow-blur"].pxValue,m=a["shadow-opacity"].value,x=a["shadow-color"].value,b=a["shadow-offset-x"].pxValue,w=a["shadow-offset-y"].pxValue;if(this.shadowStyle(t,x,i?0:m,y,b,w),"haystack"===r.edgeType)this.drawStyledEdge(n,t,r.haystackPts,v,g);else if("self"===r.edgeType||"compound"===r.edgeType){var _=n._private.rscratch,E=[_.startX,_.startY,_.cp2ax,_.cp2ay,_.selfEdgeMidX,_.selfEdgeMidY,_.selfEdgeMidX,_.selfEdgeMidY,_.cp2cx,_.cp2cy,_.endX,_.endY];this.drawStyledEdge(n,t,E,v,g)}else if("straight"===r.edgeType){var T=d._private.position.x-h._private.position.x,D=d._private.position.y-h._private.position.y,S=r.endX-r.startX,N=r.endY-r.startY;if(0>T*S+D*N)r.straightEdgeTooShort=!0;else{var _=r;this.drawStyledEdge(n,t,[_.startX,_.startY,_.endX,_.endY],v,g),r.straightEdgeTooShort=!1}}else{var _=r;this.drawStyledEdge(n,t,[_.startX,_.startY,_.cp2x,_.cp2y,_.endX,_.endY],v,g)}"haystack"===r.edgeType?this.drawArrowheads(t,n,i):r.noArrowPlacement!==!0&&void 0!==r.startX&&this.drawArrowheads(t,n,i),this.shadowStyle(t,"transparent",0)}}},n.drawStyledEdge=function(t,n,i,r,o){var a,s=t._private.rscratch,l=n,u=!1,c=e.usePaths();if(c){for(var h=i,d=s.pathCacheKey&&h.length===s.pathCacheKey.length,p=d,f=0;p&&f<h.length;f++)s.pathCacheKey[f]!==h[f]&&(p=!1);p?(a=n=s.pathCache,u=!0):(a=n=new Path2D,s.pathCacheKey=h,s.pathCache=a)}if(l.setLineDash)switch(r){case"dotted":l.setLineDash([1,1]);break;case"dashed":l.setLineDash([6,3]);break;case"solid":l.setLineDash([])}u||(n.beginPath&&n.beginPath(),n.moveTo(i[0],i[1]),6!==i.length||s.badBezier?12!==i.length||s.badBezier?4!==i.length||s.badLine||n.lineTo(i[2],i[3]):(n.quadraticCurveTo(i[2],i[3],i[4],i[5]),n.quadraticCurveTo(i[8],i[9],i[10],i[11])):n.quadraticCurveTo(i[2],i[3],i[4],i[5])),n=l,c?n.stroke(a):n.stroke(),n.setLineDash&&n.setLineDash([])},n.drawArrowheads=function(t,e,n){function i(n,i,r,o,a){var s=g[n+"-arrow-shape"].value;if("none"!==s){var l=t.globalCompositeOperation,u="hollow"===g[n+"-arrow-fill"].value?"both":"filled",c=g[n+"-arrow-fill"].value;"half-triangle-overshot"===s&&(c="hollow",u="hollow"),(1!==g.opacity.value||"hollow"===c)&&(t.globalCompositeOperation="destination-out",h.fillStyle(t,255,255,255,1),h.strokeStyle(t,255,255,255,1),h.drawArrowShape(e,n,t,u,g.width.pxValue,g[n+"-arrow-shape"].value,i,r,o,a),t.globalCompositeOperation=l);var d=g[n+"-arrow-color"].value;h.fillStyle(t,d[0],d[1],d[2],g.opacity.value),h.strokeStyle(t,d[0],d[1],d[2],g.opacity.value),h.drawArrowShape(e,n,t,c,g.width.pxValue,g[n+"-arrow-shape"].value,i,r,o,a)}}if(!n){var r,o,a,s,l,u,c=e._private.rscratch,h=this,d="haystack"===c.edgeType,p=e.source().position(),f=e.target().position();d?(a=c.haystackPts[0],s=c.haystackPts[1],l=c.haystackPts[2],u=c.haystackPts[3]):(a=c.arrowStartX,s=c.arrowStartY,l=c.arrowEndX,u=c.arrowEndY);var g=e._private.style;r=a-p.x,o=s-p.y,d||isNaN(a)||isNaN(s)||isNaN(r)||isNaN(o)||i("source",a,s,r,o);var v=c.midX,y=c.midY;d&&(v=(a+l)/2,y=(s+u)/2),r=a-l,o=s-u,"self"===c.edgeType&&(r=1,o=-1),isNaN(v)||isNaN(y)||i("mid-target",v,y,r,o),r*=-1,o*=-1,isNaN(v)||isNaN(y)||i("mid-source",v,y,r,o),r=l-f.x,o=u-f.y,d||isNaN(l)||isNaN(u)||isNaN(r)||isNaN(o)||i("target",l,u,r,o)}},n.drawArrowShape=function(t,n,i,r,o,a,s,l,u,c){var h,d=e.usePaths(),p=t._private.rscratch,f=!1,g=i,v={x:s,y:l},y=Math.asin(c/Math.sqrt(u*u+c*c));0>u?y+=Math.PI/2:y=-(Math.PI/2+y);var m=this.getArrowWidth(o),x=e.arrowShapes[a];if(d){var b=m+"$"+a+"$"+y+"$"+s+"$"+l;p.arrowPathCacheKey=p.arrowPathCacheKey||{},p.arrowPathCache=p.arrowPathCache||{};var w=p.arrowPathCacheKey[n]===b;w?(h=i=p.arrowPathCache[n],f=!0):(h=i=new Path2D,p.arrowPathCacheKey[n]=b,p.arrowPathCache[n]=h)}i.beginPath&&i.beginPath(),f||x.draw(i,m,y,v),!x.leavePathOpen&&i.closePath&&i.closePath(),i=g,("filled"===r||"both"===r)&&(d?i.fill(h):i.fill()),("hollow"===r||"both"===r)&&(i.lineWidth=x.matchEdgeWidth?o:1,i.lineJoin="miter",d?i.stroke(h):i.stroke())}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.getCachedImage=function(t,e){var n=this,i=n.imageCache=n.imageCache||{};if(i[t]&&i[t].image)return i[t].image;var r=i[t]=i[t]||{},o=r.image=new Image;return o.addEventListener("load",e),o.src=t,o},n.safeDrawImage=function(t,n,i,r,o,a,s,l,u,c){var h=this;try{t.drawImage(n,i,r,o,a,s,l,u,c)}catch(d){h.data.canvasNeedsRedraw[e.NODE]=!0,h.data.canvasNeedsRedraw[e.DRAG]=!0,h.drawingImage=!0,h.redraw()}},n.drawInscribedImage=function(t,n,i){var r=this,o=i._private.position.x,a=i._private.position.y,s=i._private.style,l=s["background-fit"].value,u=s["background-position-x"],c=s["background-position-y"],h=s["background-repeat"].value,d=i.width(),p=i.height(),f=i._private.rscratch,g=s["background-clip"].value,v="node"===g,y=s["background-image-opacity"].value,m=n.width,x=n.height;if(0!==m&&0!==x){var b=s["background-width"];"auto"!==b.value&&(m="%"===b.units?b.value/100*d:b.pxValue);var w=s["background-height"];if("auto"!==w.value&&(x="%"===w.units?w.value/100*p:w.pxValue),0!==m&&0!==x){if("contain"===l){var _=Math.min(d/m,p/x);m*=_,x*=_}else if("cover"===l){var _=Math.max(d/m,p/x);m*=_,x*=_}var E=o-d/2;E+="%"===u.units?(d-m)*u.value/100:u.pxValue;var T=a-p/2;T+="%"===c.units?(p-x)*c.value/100:c.pxValue,f.pathCache&&(E-=o,T-=a,o=0,a=0);var D=t.globalAlpha;if(t.globalAlpha=y,"no-repeat"===h)v&&(t.save(),f.pathCache?t.clip(f.pathCache):(e.nodeShapes[r.getNodeShape(i)].drawPath(t,o,a,d,p),t.clip())),r.safeDrawImage(t,n,0,0,n.width,n.height,E,T,m,x),v&&t.restore();else{var S=t.createPattern(n,h);t.fillStyle=S,e.nodeShapes[r.getNodeShape(i)].drawPath(t,o,a,d,p),t.translate(E,T),t.fill(),t.translate(-E,-T)}t.globalAlpha=D}}}}(cytoscape),function(t){"use strict";function e(t,e,n,i,r,o){var o=o||5;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+i-o,n),t.quadraticCurveTo(e+i,n,e+i,n+o),t.lineTo(e+i,n+r-o),t.quadraticCurveTo(e+i,n+r,e+i-o,n+r),t.lineTo(e+o,n+r),t.quadraticCurveTo(e,n+r,e,n+r-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}var n=t("renderer","canvas"),i=n.prototype;i.drawEdgeText=function(e,n){var i=n._private.style.content.strValue;if(!(!i||i.match(/^\s+$/)||this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var r=n._private.style["font-size"].pxValue*n.cy().zoom(),o=n._private.style["min-zoomed-font-size"].pxValue;if(!(o>r)){e.textAlign="center",e.textBaseline="middle";var a=n._private.rscratch;if(t.is.number(a.labelX)&&t.is.number(a.labelY)){var s,l,u,c=n._private.style,h="autorotate"===c["edge-text-rotation"].strValue;if(h){switch(a.edgeType){case"haystack":l=a.haystackPts[2]-a.haystackPts[0],u=a.haystackPts[3]-a.haystackPts[1];break;default:l=a.endX-a.startX,u=a.endY-a.startY}s=Math.atan(u/l),e.translate(a.labelX,a.labelY),e.rotate(s),this.drawText(e,n,0,0),e.rotate(-s),e.translate(-a.labelX,-a.labelY)}else this.drawText(e,n,a.labelX,a.labelY)}}}},i.drawNodeText=function(e,n){var i=n._private.style.content.strValue;if(i&&!i.match(/^\s+$/)){var r=n._private.style["font-size"].pxValue*n.cy().zoom(),o=n._private.style["min-zoomed-font-size"].pxValue;if(!(o>r)){var a=n._private.style["text-halign"].strValue,s=n._private.style["text-valign"].strValue,l=n._private.rscratch;if(t.is.number(l.labelX)&&t.is.number(l.labelY)){switch(a){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}switch(s){case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="top";break;default:e.textBaseline="middle"}this.drawText(e,n,l.labelX,l.labelY)}}}},i.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(e=this.fontCaches[n],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e},i.setupTextStyle=function(t,e){var n=e.effectiveOpacity(),i=e._private.style,r=i["font-style"].strValue,o=i["font-size"].pxValue+"px",a=i["font-family"].strValue,s=i["font-weight"].strValue,l=i["text-opacity"].value*i.opacity.value*n,u=i["text-outline-opacity"].value*l,c=i.color.value,h=i["text-outline-color"].value,d=i["text-shadow-blur"].pxValue,p=i["text-shadow-opacity"].value,f=i["text-shadow-color"].value,g=i["text-shadow-offset-x"].pxValue,v=i["text-shadow-offset-y"].pxValue,y=e._private.fontKey,m=this.getFontCache(t);m.key!==y&&(t.font=r+" "+s+" "+o+" "+a,m.key=y);var x=this.getLabelText(e);return t.lineJoin="round",this.fillStyle(t,c[0],c[1],c[2],l),this.strokeStyle(t,h[0],h[1],h[2],u),this.shadowStyle(t,f,p,d,g,v),x},i.drawText=function(t,n,i,r){var o=n._private,a=o.style,s=o.rstyle,l=o.rscratch,u=n.effectiveOpacity();if(0!==u&&0!==a["text-opacity"].value){var c=this.setupTextStyle(t,n),h=a["text-halign"].value,d=a["text-valign"].value;if(n.isEdge()&&(h="center",d="center"),null!=c&&!isNaN(i)&&!isNaN(r)){var p=a["text-background-opacity"].value,f=a["text-border-opacity"].value,g=a["text-border-width"].pxValue;if(p>0||g>0&&f>0){var v=4+g/2;n.isNode()&&("top"===d?r-=v:"bottom"===d&&(r+=v),"left"===h?i-=v:"right"===h&&(i+=v));var y=s.labelWidth,m=s.labelHeight,x=i;h&&("center"==h?x-=y/2:"left"==h&&(x-=y));var b=r;if(n.isNode()?"top"==d?b-=m:"center"==d&&(b-=m/2):b-=m/2,"autorotate"===a["edge-text-rotation"].strValue?(r=0,y+=4,x=i-y/2,b=r-m/2):(x-=v,b-=v,m+=2*v,y+=2*v),p>0){var w=t.fillStyle,_=a["text-background-color"].value;t.fillStyle="rgba("+_[0]+","+_[1]+","+_[2]+","+p*u+")";var E=a["text-background-shape"].strValue;"roundrectangle"==E?e(t,x,b,y,m,2):t.fillRect(x,b,y,m),t.fillStyle=w}if(g>0&&f>0){var T=t.strokeStyle,D=t.lineWidth,S=a["text-border-color"].value,N=a["text-border-style"].value;if(t.strokeStyle="rgba("+S[0]+","+S[1]+","+S[2]+","+f*u+")",t.lineWidth=g,t.setLineDash)switch(N){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=g/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(x,b,y,m),"double"===N){var C=g/2;t.strokeRect(x+C,b+C,y-2*C,m-2*C)}t.setLineDash&&t.setLineDash([]),t.lineWidth=D,t.strokeStyle=T}}var L=2*a["text-outline-width"].pxValue;if(L>0&&(t.lineWidth=L),"wrap"===a["text-wrap"].value){var M=l.labelWrapCachedLines,P=s.labelHeight/M.length;switch(d){case"top":r-=(M.length-1)*P;break;case"bottom":break;default:case"center":r-=(M.length-1)*P/2}for(var k=0;k<M.length;k++)L>0&&t.strokeText(M[k],i,r),t.fillText(M[k],i,r),r+=P}else L>0&&t.strokeText(c,i,r),t.fillText(c,i,r);this.shadowStyle(t,"transparent",0)}}}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.drawNode=function(t,n,i){var r,o,a=this,s=n._private.style,l=n._private.rscratch,u=n._private,c=u.position;if(void 0!==c.x&&void 0!==c.y){var h,d=e.usePaths(),p=t,f=!1,g=s["overlay-padding"].pxValue,v=s["overlay-opacity"].value,y=s["overlay-color"].value;if(!i||0!==v){var m=n.effectiveOpacity();if(0!==m)if(r=this.getNodeWidth(n),o=this.getNodeHeight(n),t.lineWidth=s["border-width"].pxValue,void 0!==i&&i)v>0&&(this.fillStyle(t,y[0],y[1],y[2],v),e.nodeShapes.roundrectangle.drawPath(t,n._private.position.x,n._private.position.y,r+2*g,o+2*g),t.fill());else{var x,b=s["background-image"].value[2]||s["background-image"].value[1];if(void 0!==b){x=this.getCachedImage(b,function(){a.data.canvasNeedsRedraw[e.NODE]=!0,a.data.canvasNeedsRedraw[e.DRAG]=!0,a.drawingImage=!0,a.redraw()});var w=u.backgrounding;u.backgrounding=!x.complete,w!==u.backgrounding&&n.updateStyle(!1)}var _=s["background-color"].value,E=s["border-color"].value,T=s["border-style"].value;this.fillStyle(t,_[0],_[1],_[2],s["background-opacity"].value*m),this.strokeStyle(t,E[0],E[1],E[2],s["border-opacity"].value*m);var D=s["shadow-blur"].pxValue,S=s["shadow-opacity"].value,N=s["shadow-color"].value,C=s["shadow-offset-x"].pxValue,L=s["shadow-offset-y"].pxValue;if(this.shadowStyle(t,N,S,D,C,L),t.lineJoin="miter",t.setLineDash)switch(T){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}var M=s.shape.strValue;if(d){var P=M+"$"+r+"$"+o;t.translate(c.x,c.y),l.pathCacheKey===P?(h=t=l.pathCache,f=!0):(h=t=new Path2D,l.pathCacheKey=P,l.pathCache=h)}if(!f){var k=c;d&&(k={x:0,y:0}),e.nodeShapes[this.getNodeShape(n)].drawPath(t,k.x,k.y,r,o)}t=p,d?t.fill(h):t.fill(),this.shadowStyle(t,"transparent",0),void 0!==b&&x.complete&&this.drawInscribedImage(t,x,n);var I=s["background-blacken"].value,O=s["border-width"].pxValue;if(this.hasPie(n)&&(this.drawPie(t,n,m),(0!==I||0!==O)&&(d||e.nodeShapes[this.getNodeShape(n)].drawPath(t,c.x,c.y,r,o))),I>0?(this.fillStyle(t,0,0,0,I),d?t.fill(h):t.fill()):0>I&&(this.fillStyle(t,255,255,255,-I),d?t.fill(h):t.fill()),O>0&&(d?t.stroke(h):t.stroke(),"double"===T)){t.lineWidth=s["border-width"].pxValue/3;var A=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",d?t.stroke(h):t.stroke(),t.globalCompositeOperation=A}d&&t.translate(-c.x,-c.y),t.setLineDash&&t.setLineDash([])}}}},n.hasPie=function(t){return t=t[0],t._private.hasPie},n.drawPie=function(n,i,r){i=i[0];var o=i._private,a=o.style,s=a["pie-size"],l=this.getNodeWidth(i),u=this.getNodeHeight(i),c=o.position.x,h=o.position.y,d=Math.min(l,u)/2,p=0,f=e.usePaths();f&&(c=0,h=0),"%"===s.units?d=d*s.value/100:void 0!==s.pxValue&&(d=s.pxValue/2);for(var g=1;g<=t.style.pieBackgroundN;g++){var v=a["pie-"+g+"-background-size"].value,y=a["pie-"+g+"-background-color"].value,m=a["pie-"+g+"-background-opacity"].value*r,x=v/100;x+p>1&&(x=1-p);var b=1.5*Math.PI+2*Math.PI*p,w=2*Math.PI*x,_=b+w;0===v||p>=1||p+x>1||(n.beginPath(),n.moveTo(c,h),n.arc(c,h,d,b,_),n.closePath(),this.fillStyle(n,y[0],y[1],y[2],m),n.fill(),p+=x)}}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e,i=e.prototype;i.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},i.paintCache=function(t){for(var e,n=this.paintCaches=this.paintCaches||[],i=!0,r=0;r<n.length;r++)if(e=n[r],e.context===t){i=!1;break}return i&&(e={context:t},n.push(e)),e},i.fillStyle=function(t,e,n,i,r){t.fillStyle="rgba("+e+","+n+","+i+","+r+")"},i.strokeStyle=function(t,e,n,i,r){t.strokeStyle="rgba("+e+","+n+","+i+","+r+")"},i.shadowStyle=function(t,e,n,i,r,o){var a=this.data.cy.zoom(),s=this.paintCache(t);(0!==s.shadowOpacity||0!==n)&&(s.shadowOpacity=n,n>0?(t.shadowBlur=i*a,t.shadowColor="rgba("+e[0]+","+e[1]+","+e[2]+","+n+")",t.shadowOffsetX=r*a,t.shadowOffsetY=o*a):(t.shadowBlur=0,t.shadowColor="transparent"))},i.matchCanvasSize=function(t){var i=this.data,r=t.clientWidth,o=t.clientHeight,a=this.getPixelRatio(),s=this.motionBlurPxRatio;(t===this.data.bufferCanvases[n.MOTIONBLUR_BUFFER_NODE]||t===this.data.bufferCanvases[n.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var l,u=r*a,c=o*a;if(u!==this.canvasWidth||c!==this.canvasHeight){this.fontCaches=null;var h=i.canvasContainer;h.style.width=r+"px",h.style.height=o+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)l=i.canvases[d],(l.width!==u||l.height!==c)&&(l.width=u,l.height=c,l.style.width=r+"px",l.style.height=o+"px");for(var d=0;d<e.BUFFER_COUNT;d++)l=i.bufferCanvases[d],(l.width!==u||l.height!==c)&&(l.width=u,l.height=c,l.style.width=r+"px",l.style.height=o+"px");this.textureMult=1,1>=a&&(l=i.bufferCanvases[e.TEXTURE_BUFFER],this.textureMult=2,l.width=u*this.textureMult,l.height=c*this.textureMult),this.canvasWidth=u,this.canvasHeight=c}},i.renderTo=function(t,e,n,i){this.redraw({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:i})},i.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},e.minRedrawLimit=1e3/60,e.maxRedrawLimit=1e3,e.motionBlurDelay=100,i.redraw=function(i){function r(){function i(t,e,n,i,r){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",c.fillStyle(t,255,255,255,c.motionBlurTransparency),t.fillRect(e,n,i,r),t.globalCompositeOperation=o}function r(t,e){var r,s,h,d;c.clearingMotionBlur||t!==p.bufferContexts[n.MOTIONBLUR_BUFFER_NODE]&&t!==p.bufferContexts[n.MOTIONBLUR_BUFFER_DRAG]?(r=N,s=D,h=c.canvasWidth,d=c.canvasHeight):(r={x:S.x*y,y:S.y*y},s=T*y,h=c.canvasWidth*y,d=c.canvasHeight*y),t.setTransform(1,0,0,1,0,0),"motionBlur"===e?i(t,0,0,h,d):o||void 0!==e&&!e||t.clearRect(0,0,h,d),
a||(t.translate(r.x,r.y),t.scale(s,s)),u&&t.translate(u.x,u.y),l&&t.scale(l,l)}function b(t,e){for(var n=t.eles,i=0;i<n.length;i++){var r=n[i];r.isNode()?(c.drawNode(e,r),j||c.drawNodeText(e,r),c.drawNode(e,r,!0)):q||(c.drawEdge(e,r),j||c.drawEdgeText(e,r),c.drawEdge(e,r,!0))}}c.textureDrawLastFrame&&!g&&(f[n.NODE]=!0,f[n.SELECT_BOX]=!0);var _=c.getCachedEdges(),E=d.style()._private.coreStyle,T=d.zoom(),D=void 0!==l?l:T,S=d.pan(),N={x:S.x,y:S.y},L={zoom:T,pan:{x:S.x,y:S.y}},M=c.prevViewport,P=void 0===M||L.zoom!==M.zoom||L.pan.x!==M.pan.x||L.pan.y!==M.pan.y;P||x&&!m||(c.motionBlurPxRatio=1),u&&(N=u),D*=h,N.x*=h,N.y*=h;var k={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}};if(g||(c.textureDrawLastFrame=!1),g){c.textureDrawLastFrame=!0;var I;if(!c.textureCache){c.textureCache={},I=c.textureCache.bb=d.elements().boundingBox(),c.textureCache.texture=c.data.bufferCanvases[e.TEXTURE_BUFFER];var O=c.data.bufferContexts[e.TEXTURE_BUFFER];O.setTransform(1,0,0,1,0,0),O.clearRect(0,0,c.canvasWidth*c.textureMult,c.canvasHeight*c.textureMult),c.redraw({forcedContext:O,drawOnlyNodeLayer:!0,forcedPxRatio:h*c.textureMult});var L=c.textureCache.viewport={zoom:d.zoom(),pan:d.pan(),width:c.canvasWidth,height:c.canvasHeight};L.mpan={x:(0-L.pan.x)/L.zoom,y:(0-L.pan.y)/L.zoom}}f[n.DRAG]=!1,f[n.NODE]=!1;var A=p.contexts[n.NODE],R=c.textureCache.texture,L=c.textureCache.viewport;I=c.textureCache.bb,A.setTransform(1,0,0,1,0,0),v?i(A,0,0,L.width,L.height):A.clearRect(0,0,L.width,L.height);var B=E["outside-texture-bg-color"].value,F=E["outside-texture-bg-opacity"].value;c.fillStyle(A,B[0],B[1],B[2],F),A.fillRect(0,0,L.width,L.height);var T=d.zoom();r(A,!1),A.clearRect(L.mpan.x,L.mpan.y,L.width/L.zoom/h,L.height/L.zoom/h),A.drawImage(R,L.mpan.x,L.mpan.y,L.width/L.zoom/h,L.height/L.zoom/h)}else c.textureOnViewport&&!o&&(c.textureCache=null);var z=c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming||c.hoverData.draggingEles,q=c.hideEdgesOnViewport&&z,j=c.hideLabelsOnViewport&&z;if(f[n.DRAG]||f[n.NODE]||a||s){q||c.findEdgeControlPoints(_);for(var X=c.getCachedZSortedEles(),Y=d.extent(),V=0;V<X.length;V++){var G,U=X[V],I=o?null:U.boundingBox(),W=!!o||t.math.boundingBoxesIntersect(Y,I);W&&(G=U._private.rscratch.inDragLayer?k.drag:k.nondrag,G.eles.push(U))}}var H=[];if(H[n.NODE]=!f[n.NODE]&&v&&!c.clearedForMotionBlur[n.NODE]||c.clearingMotionBlur,H[n.NODE]&&(c.clearedForMotionBlur[n.NODE]=!0),H[n.DRAG]=!f[n.DRAG]&&v&&!c.clearedForMotionBlur[n.DRAG]||c.clearingMotionBlur,H[n.DRAG]&&(c.clearedForMotionBlur[n.DRAG]=!0),f[n.NODE]||a||s||H[n.NODE]){var $=v&&!H[n.NODE]&&1!==y,A=o||($?c.data.bufferContexts[n.MOTIONBLUR_BUFFER_NODE]:p.contexts[n.NODE]),Z=v&&!$?"motionBlur":void 0;r(A,Z),b(k.nondrag,A),a||v||(f[n.NODE]=!1)}if(!s&&(f[n.DRAG]||a||H[n.DRAG])){var $=v&&!H[n.DRAG]&&1!==y,A=o||($?c.data.bufferContexts[n.MOTIONBLUR_BUFFER_DRAG]:p.contexts[n.DRAG]);r(A,v&&!$?"motionBlur":void 0),b(k.drag,A),a||v||(f[n.DRAG]=!1)}if(c.showFps||!s&&f[n.SELECT_BOX]&&!a){var A=o||p.contexts[n.SELECT_BOX];if(r(A),1==p.select[4]&&(c.hoverData.selecting||c.touchData.selecting)){var T=p.cy.zoom(),K=E["selection-box-border-width"].value/T;A.lineWidth=K,A.fillStyle="rgba("+E["selection-box-color"].value[0]+","+E["selection-box-color"].value[1]+","+E["selection-box-color"].value[2]+","+E["selection-box-opacity"].value+")",A.fillRect(p.select[0],p.select[1],p.select[2]-p.select[0],p.select[3]-p.select[1]),K>0&&(A.strokeStyle="rgba("+E["selection-box-border-color"].value[0]+","+E["selection-box-border-color"].value[1]+","+E["selection-box-border-color"].value[2]+","+E["selection-box-opacity"].value+")",A.strokeRect(p.select[0],p.select[1],p.select[2]-p.select[0],p.select[3]-p.select[1]))}if(p.bgActivePosistion&&!c.hoverData.selecting){var T=p.cy.zoom(),Q=p.bgActivePosistion;A.fillStyle="rgba("+E["active-bg-color"].value[0]+","+E["active-bg-color"].value[1]+","+E["active-bg-color"].value[2]+","+E["active-bg-opacity"].value+")",A.beginPath(),A.arc(Q.x,Q.y,E["active-bg-size"].pxValue/T,0,2*Math.PI),A.fill()}var J=c.averageRedrawTime;if(c.showFps&&J){J=Math.round(J);var tt=Math.round(1e3/J);A.setTransform(1,0,0,1,0,0),A.fillStyle="rgba(255, 0, 0, 0.75)",A.strokeStyle="rgba(255, 0, 0, 0.75)",A.lineWidth=1,A.fillText("1 frame = "+J+" ms = "+tt+" fps",0,20);var et=60;A.strokeRect(0,30,250,20),A.fillRect(0,30,250*Math.min(tt/et,1),20)}a||(f[n.SELECT_BOX]=!1)}if(v&&1!==y){var nt=p.contexts[n.NODE],it=c.data.bufferCanvases[n.MOTIONBLUR_BUFFER_NODE],rt=p.contexts[n.DRAG],ot=c.data.bufferCanvases[n.MOTIONBLUR_BUFFER_DRAG],at=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!w?t.clearRect(0,0,c.canvasWidth,c.canvasHeight):i(t,0,0,c.canvasWidth,c.canvasHeight);var r=y;t.drawImage(e,0,0,c.canvasWidth*r,c.canvasHeight*r,0,0,c.canvasWidth,c.canvasHeight)};(f[n.NODE]||H[n.NODE])&&(at(nt,it,H[n.NODE]),f[n.NODE]=!1),(f[n.DRAG]||H[n.DRAG])&&(at(rt,ot,H[n.DRAG]),f[n.DRAG]=!1)}var st=Date.now();void 0===c.averageRedrawTime&&(c.averageRedrawTime=st-C),void 0===c.redrawCount&&(c.redrawCount=0),c.redrawCount++,void 0===c.redrawTotalTime&&(c.redrawTotalTime=0),c.redrawTotalTime+=st-C,c.lastRedrawTime=st-C,c.averageRedrawTime=c.averageRedrawTime/2+(st-C)/2,c.currentlyDrawing=!1,c.prevViewport=L,c.clearingMotionBlur&&(c.clearingMotionBlur=!1,c.motionBlurCleared=!0,c.motionBlur=!0),v&&(c.motionBlurTimeout=setTimeout(function(){c.motionBlurTimeout=null,c.clearedForMotionBlur[n.NODE]=!1,c.clearedForMotionBlur[n.DRAG]=!1,c.motionBlur=!1,c.clearingMotionBlur=!g,c.mbFrames=0,f[n.NODE]=!0,f[n.DRAG]=!0,c.redraw()},e.motionBlurDelay)),c.drawingImage=!1}i=i||{};var o=i.forcedContext,a=i.drawAllLayers,s=i.drawOnlyNodeLayer,l=i.forcedZoom,u=i.forcedPan,c=this,h=void 0===i.forcedPxRatio?this.getPixelRatio():i.forcedPxRatio,d=c.data.cy,p=c.data,f=p.canvasNeedsRedraw,g=c.textureOnViewport&&!o&&(c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming),v=void 0!==i.motionBlur?i.motionBlur:c.motionBlur,y=c.motionBlurPxRatio,m=d.hasCompoundNodes(),x=c.hoverData.draggingEles,b=!(!c.hoverData.selecting&&!c.touchData.selecting);v=v&&!o&&c.motionBlurEnabled&&!b;var w=v;!o&&c.motionBlurTimeout&&clearTimeout(c.motionBlurTimeout),!o&&this.redrawTimeout&&clearTimeout(this.redrawTimeout),this.redrawTimeout=null,void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var _=e.minRedrawLimit,E=e.maxRedrawLimit,T=this.averageRedrawTime;T=_>T?_:T,T=E>T?T:E,void 0===this.lastDrawTime&&(this.lastDrawTime=0);var D=Date.now(),S=D-this.lastDrawTime,N=S>=T;if(!o&&!c.clearingMotionBlur){if(!N||this.currentlyDrawing)return void(this.redrawTimeout=setTimeout(function(){c.redraw()},T));this.lastDrawTime=D,this.currentlyDrawing=!0}v&&(null==c.mbFrames&&(c.mbFrames=0),c.drawingImage||c.mbFrames++,c.mbFrames<3&&(w=!1),c.mbFrames>c.minMbLowQualFrames&&(c.motionBlurPxRatio=c.mbPxRBlurry)),c.clearingMotionBlur&&(c.motionBlurPxRatio=1);var C=Date.now();o?r():t.util.requestAnimationFrame(r),o||c.initrender||(c.initrender=!0,d.trigger("initrender")),o||d.triggerOnRender()}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.drawPolygonPath=function(t,e,n,i,r,o){var a=i/2,s=r/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var l=1;l<o.length/2;l++)t.lineTo(e+a*o[2*l],n+s*o[2*l+1]);t.closePath()},n.drawPolygon=function(t,e,n,i,r,o){this.drawPolygonPath(t,e,n,i,r,o),t.fill()},n.drawRoundRectanglePath=function(e,n,i,r,o,a){var s=r/2,l=o/2,u=t.math.getRoundRectangleRadius(r,o);e.beginPath&&e.beginPath(),e.moveTo(n,i-l),e.arcTo(n+s,i-l,n+s,i,u),e.arcTo(n+s,i+l,n,i+l,u),e.arcTo(n-s,i+l,n-s,i,u),e.arcTo(n-s,i-l,n,i-l,u),e.lineTo(n,i-l),e.closePath()},n.drawRoundRectangle=function(t,e,n,i,r,o){this.drawRoundRectanglePath(t,e,n,i,r,o),t.fill()}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},n.bufferCanvasImage=function(e){var n=this.data,i=n.cy,r=i.elements().boundingBox(),o=e.full?Math.ceil(r.w):this.data.container.clientWidth,a=e.full?Math.ceil(r.h):this.data.container.clientHeight,s=1;if(void 0!==e.scale)o*=e.scale,a*=e.scale,s=e.scale;else if(t.is.number(e.maxWidth)||t.is.number(e.maxHeight)){var l=1/0,u=1/0;t.is.number(e.maxWidth)&&(l=s*e.maxWidth/o),t.is.number(e.maxHeight)&&(u=s*e.maxHeight/a),s=Math.min(l,u),o*=s,a*=s}var c=document.createElement("canvas");c.width=o,c.height=a,c.style.width=o+"px",c.style.height=a+"px";var h=c.getContext("2d");if(o>0&&a>0)if(h.clearRect(0,0,o,a),e.bg&&(h.fillStyle=e.bg,h.rect(0,0,o,a),h.fill()),h.globalCompositeOperation="source-over",e.full)this.redraw({forcedContext:h,drawAllLayers:!0,forcedZoom:s,forcedPan:{x:-r.x1*s,y:-r.y1*s},forcedPxRatio:1});else{var d=i.pan(),p={x:d.x*s,y:d.y*s},f=i.zoom()*s;this.redraw({forcedContext:h,drawAllLayers:!0,forcedZoom:f,forcedPan:p,forcedPxRatio:1})}return c},n.png=function(t){return this.bufferCanvasImage(t).toDataURL("image/png")},n.jpg=function(t){return this.bufferCanvasImage(t).toDataURL("image/jpeg")}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e,i=n.prototype;i.registerBinding=function(t,e,n,i){this.bindings.push({target:t,event:e,handler:n,useCapture:i}),t.addEventListener(e,n,i)},i.nodeIsDraggable=function(t){return!(0===t._private.style.opacity.value||"visible"!=t._private.style.visibility.value||"element"!=t._private.style.display.value||t.locked()||!t.grabbable())},i.load=function(){var e=this,i=function(t){var n;if(t.addToList&&e.data.cy.hasCompoundNodes()){if(!t.addToList.hasId){t.addToList.hasId={};for(var i=0;i<t.addToList.length;i++){var r=t.addToList[i];t.addToList.hasId[r.id()]=!0}}n=t.addToList.hasId}return n||{}},r=function(t,e){if(t._private.cy.hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList))for(var n=i(e),r=t.descendants(),o=0;o<r.size();o++){var a=r[o],s=a._private;e.inDragLayer&&(s.rscratch.inDragLayer=!0),e.addToList&&!n[a.id()]&&(e.addToList.push(a),n[a.id()]=!0,s.grabbed=!0);for(var l=s.edges,u=0;e.inDragLayer&&u<l.length;u++)l[u]._private.rscratch.inDragLayer=!0}},o=function(t,e){var n=t._private,o=i(e);e.inDragLayer&&(n.rscratch.inDragLayer=!0),e.addToList&&!o[t.id()]&&(e.addToList.push(t),o[t.id()]=!0,n.grabbed=!0);for(var a=n.edges,l=0;e.inDragLayer&&l<a.length;l++)a[l]._private.rscratch.inDragLayer=!0;r(t,e),s(t,{inDragLayer:e.inDragLayer})},a=function(t){if(t)for(var e=0;e<t.length;e++){var n=t[e]._private;if("nodes"===n.group){n.rscratch.inDragLayer=!1,n.grabbed=!1;for(var i=n.edges,r=0;r<i.length;r++)i[r]._private.rscratch.inDragLayer=!1;s(t[e],{inDragLayer:!1})}else"edges"===n.group&&(n.rscratch.inDragLayer=!1)}},s=function(t,e){if(null!=e.inDragLayer||null!=e.addToList){var n=t;if(t._private.cy.hasCompoundNodes()){for(;n.parent().nonempty();)n=n.parent()[0];if(n!=t){for(var r=n.descendants().merge(n).unmerge(t).unmerge(t.descendants()),o=r.connectedEdges(),a=i(e),s=0;s<r.size();s++)void 0!==e.inDragLayer&&(r[s]._private.rscratch.inDragLayer=e.inDragLayer),e.addToList&&!a[r[s].id()]&&(e.addToList.push(r[s]),a[r[s].id()]=!0,r[s]._private.grabbed=!0);for(var l=0;void 0!==e.inDragLayer&&l<o.length;l++)o[l]._private.rscratch.inDragLayer=e.inDragLayer}}}};"undefined"!=typeof MutationObserver?(e.removeObserver=new MutationObserver(function(t){for(var n=0;n<t.length;n++){var i=t[n],r=i.removedNodes;if(r)for(var o=0;o<r.length;o++){var a=r[o];if(a===e.data.container){e.destroy();break}}}}),e.removeObserver.observe(e.data.container.parentNode,{childList:!0})):e.registerBinding(e.data.container,"DOMNodeRemoved",function(t){e.destroy()}),e.registerBinding(window,"resize",t.util.debounce(function(t){e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.data.container),e.data.canvasNeedsRedraw[n.NODE]=!0,e.redraw()},100));for(var l=function(t){e.registerBinding(t,"scroll",function(t){e.invalidateContainerClientCoordsCache()})},u=e.data.cy.container();l(u),u.parentNode;)u=u.parentNode;e.registerBinding(e.data.container,"contextmenu",function(t){t.preventDefault()});var c=function(){return 0!==e.data.select[4]};e.registerBinding(e.data.container,"mousedown",function(i){i.preventDefault(),e.hoverData.capture=!0,e.hoverData.which=i.which;var r=e.data.cy,a=e.projectIntoViewport(i.clientX,i.clientY),s=e.data.select,l=e.findNearestElement(a[0],a[1],!0,!1),u=e.dragData.possibleDragElements;e.hoverData.mdownPos=a;var c=e.data.canvasNeedsRedraw,h=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var n=e.hoverData.down;n?n.trigger(new t.Event(i,{type:"taphold",cyPosition:{x:a[0],y:a[1]}})):r.trigger(new t.Event(i,{type:"taphold",cyPosition:{x:a[0],y:a[1]}}))}},e.tapholdDuration)};if(3==i.which){e.hoverData.cxtStarted=!0;var d=new t.Event(i,{type:"cxttapstart",cyPosition:{x:a[0],y:a[1]}});l?(l.activate(),l.trigger(d),e.hoverData.down=l):r.trigger(d),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==i.which){if(l&&l.activate(),null!=l){if(e.nodeIsDraggable(l)){var p=new t.Event(i,{type:"grab",cyPosition:{x:a[0],y:a[1]}});if(l.isNode()&&!l.selected())u=e.dragData.possibleDragElements=[],o(l,{addToList:u}),l.trigger(p);else if(l.isNode()&&l.selected()){u=e.dragData.possibleDragElements=[];for(var f=r.$(function(){return this.isNode()&&this.selected()}),g=0;g<f.length;g++)e.nodeIsDraggable(f[g])&&o(f[g],{addToList:u});l.trigger(p)}c[n.NODE]=!0,c[n.DRAG]=!0}l.trigger(new t.Event(i,{type:"mousedown",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(i,{type:"tapstart",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(i,{type:"vmousedown",cyPosition:{x:a[0],y:a[1]}}))}else null==l&&r.trigger(new t.Event(i,{type:"mousedown",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(i,{type:"tapstart",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(i,{type:"vmousedown",cyPosition:{x:a[0],y:a[1]}}));if(e.hoverData.down=l,e.hoverData.downTime=(new Date).getTime(),null==l||l.isEdge()){s[4]=1;var v=Math.max(0,n.panOrBoxSelectDelay-(+new Date-e.hoverData.downTime));clearTimeout(e.bgActiveTimeout),r.boxSelectionEnabled()||l&&l.isEdge()?e.bgActiveTimeout=setTimeout(function(){l&&l.unactivate(),e.data.bgActivePosistion={x:a[0],y:a[1]},e.hoverData.dragging=!0,c[n.SELECT_BOX]=!0,e.redraw()},v):(e.data.bgActivePosistion={x:a[0],y:a[1]},c[n.SELECT_BOX]=!0,e.redraw())}h()}s[0]=s[2]=a[0],s[1]=s[3]=a[1]},!1),e.registerBinding(window,"mousemove",t.util.throttle(function(i){var r=!1,a=e.hoverData.capture;if(!a){var s=e.findContainerClientCoords();if(!(i.clientX>s[0]&&i.clientX<s[0]+e.canvasWidth&&i.clientY>s[1]&&i.clientY<s[1]+e.canvasHeight))return;for(var l=e.data.container,u=i.target,c=u.parentNode,h=!1;c;){if(c===l){h=!0;break}c=c.parentNode}if(!h)return}var d=e.data.cy,p=d.zoom(),f=e.projectIntoViewport(i.clientX,i.clientY),g=e.data.select,v=e.data.canvasNeedsRedraw,y=null;e.hoverData.draggingEles||(y=e.findNearestElement(f[0],f[1],!0,!1));var m=e.hoverData.last,x=e.hoverData.down,b=[f[0]-g[2],f[1]-g[3]],w=e.dragData.possibleDragElements,_=g[2]-g[0],E=_*_,T=g[3]-g[1],D=T*T,S=E+D,N=S*p*p;e.hoverData.tapholdCancelled=!0;var C=function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(b[0]),t.push(b[1])):(t[0]+=b[0],t[1]+=b[1])};if(r=!0,null!=y?y.trigger(new t.Event(i,{type:"mousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new t.Event(i,{type:"vmousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new t.Event(i,{type:"tapdrag",cyPosition:{x:f[0],y:f[1]}})):null==y&&d.trigger(new t.Event(i,{type:"mousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new t.Event(i,{type:"vmousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new t.Event(i,{type:"tapdrag",cyPosition:{x:f[0],y:f[1]}})),3===e.hoverData.which){var L=new t.Event(i,{type:"cxtdrag",cyPosition:{x:f[0],y:f[1]}});x?x.trigger(L):d.trigger(L),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&y===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.trigger(new t.Event(i,{type:"cxtdragout",cyPosition:{x:f[0],y:f[1]}})),e.hoverData.cxtOver=y,y&&y.trigger(new t.Event(i,{type:"cxtdragover",cyPosition:{x:f[0],y:f[1]}})))}else if(e.hoverData.dragging){if(r=!0,d.panningEnabled()&&d.userPanningEnabled()){var M;if(e.hoverData.justStartedPan){var P=e.hoverData.mdownPos;M={x:(f[0]-P[0])*p,y:(f[1]-P[1])*p},e.hoverData.justStartedPan=!1}else M={x:b[0]*p,y:b[1]*p};d.panBy(M),e.hoverData.dragged=!0}f=e.projectIntoViewport(i.clientX,i.clientY)}else if(1==g[4]&&(null==x||x.isEdge())&&(!d.boxSelectionEnabled()||+new Date-e.hoverData.downTime>=n.panOrBoxSelectDelay)&&!e.hoverData.selecting&&N>=e.desktopTapThreshold2&&d.panningEnabled()&&d.userPanningEnabled())e.hoverData.dragging=!0,e.hoverData.selecting=!1,e.hoverData.justStartedPan=!0,g[4]=0;else{if(d.boxSelectionEnabled()&&!e.hoverData.dragging&&Math.pow(g[2]-g[0],2)+Math.pow(g[3]-g[1],2)>7&&g[4]&&(clearTimeout(e.bgActiveTimeout),e.data.bgActivePosistion=void 0,e.hoverData.selecting=!0,v[n.SELECT_BOX]=!0,e.redraw()),x&&x.isEdge()&&x.active()&&x.unactivate(),y!=m&&(m&&(m.trigger(new t.Event(i,{type:"mouseout",cyPosition:{x:f[0],y:f[1]}})),m.trigger(new t.Event(i,{type:"tapdragout",cyPosition:{x:f[0],y:f[1]}}))),y&&(y.trigger(new t.Event(i,{type:"mouseover",cyPosition:{x:f[0],y:f[1]}})),y.trigger(new t.Event(i,{type:"tapdragover",cyPosition:{x:f[0],y:f[1]}}))),e.hoverData.last=y),x&&x.isNode()&&e.nodeIsDraggable(x))if(N>=e.desktopTapThreshold2){var k=!e.dragData.didDrag;k&&(v[n.NODE]=!0),e.dragData.didDrag=!0;for(var I=[],O=0;O<w.length;O++){var A=w[O];if(e.hoverData.draggingEles||o(A,{inDragLayer:!0}),A.isNode()&&e.nodeIsDraggable(A)&&A.grabbed()){var R=A._private.position;if(I.push(A),t.is.number(b[0])&&t.is.number(b[1])&&(R.x+=b[0],R.y+=b[1],k)){var B=e.hoverData.dragDelta;t.is.number(B[0])&&t.is.number(B[1])&&(R.x+=B[0],R.y+=B[1])}}}e.hoverData.draggingEles=!0;var F=new t.Collection(d,I);F.updateCompoundBounds(),F.trigger("position drag"),v[n.DRAG]=!0,e.redraw()}else C();r=!0}return g[2]=f[0],g[3]=f[1],r?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0},1e3/30,{trailing:!0}),!1),e.registerBinding(window,"mouseup",function(i){var r=e.hoverData.capture;if(r){e.hoverData.capture=!1;var o=e.data.cy,s=e.projectIntoViewport(i.clientX,i.clientY),l=e.data.select,u=e.findNearestElement(s[0],s[1],!0,!1),c=e.dragData.possibleDragElements,h=e.hoverData.down,d=i.shiftKey,p=e.data.canvasNeedsRedraw;if(e.data.bgActivePosistion&&(p[n.SELECT_BOX]=!0,e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,clearTimeout(e.bgActiveTimeout),h&&h.unactivate(),3===e.hoverData.which){var f=new t.Event(i,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});if(h?h.trigger(f):o.trigger(f),!e.hoverData.cxtDragged){var g=new t.Event(i,{type:"cxttap",cyPosition:{x:s[0],y:s[1]}});h?h.trigger(g):o.trigger(g)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else{if(null!=h||e.dragData.didDrag||e.hoverData.dragged||(o.$(function(){return this.selected()}).unselect(),c.length>0&&(p[n.NODE]=!0),e.dragData.possibleDragElements=c=[]),null!=u?u.trigger(new t.Event(i,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(i,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(i,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})):null==u&&o.trigger(new t.Event(i,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(i,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(i,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})),e.dragData.didDrag||e.hoverData.dragged||(null!=u?u.trigger(new t.Event(i,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(i,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(i,{type:"vclick",cyPosition:{x:s[0],y:s[1]}})):null==u&&o.trigger(new t.Event(i,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(i,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(i,{type:"vclick",cyPosition:{x:s[0],y:s[1]}}))),u!=h||e.dragData.didDrag||null!=u&&u._private.selectable&&(e.hoverData.dragging||("additive"===o.selectionType()||d?u.selected()?u.unselect():u.select():d||(o.$(":selected").unmerge(u).unselect(),u.select())),p[n.NODE]=!0),e.hoverData.selecting&&o.boxSelectionEnabled()&&Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]){var v=[],y=e.getAllInBox(l[0],l[1],l[2],l[3]);p[n.SELECT_BOX]=!0,y.length>0&&(p[n.NODE]=!0);for(var m=0;m<y.length;m++)y[m]._private.selectable&&v.push(y[m]);var x=new t.Collection(o,v);"additive"===o.selectionType()?x.select():(d||o.$(":selected").unmerge(x).unselect(),x.select()),e.redraw()}e.hoverData.dragging&&(e.hoverData.dragging=!1,p[n.SELECT_BOX]=!0,p[n.NODE]=!0,e.redraw()),l[4]||(p[n.DRAG]=!0,p[n.NODE]=!0,a(c),h&&h.trigger("free"))}l[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[]}},!1);var h=function(t){if(!e.scrollingPage){var i=e.data.cy,r=e.projectIntoViewport(t.clientX,t.clientY),o=[r[0]*i.zoom()+i.pan().x,r[1]*i.zoom()+i.pan().y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||c())return void t.preventDefault();if(i.panningEnabled()&&i.userPanningEnabled()&&i.zoomingEnabled()&&i.userZoomingEnabled()){t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.data.canvasNeedsRedraw[n.NODE]=!0,e.redraw()},150);var a=t.deltaY/-250||t.wheelDeltaY/1e3||t.wheelDelta/1e3;a*=e.wheelSensitivity;var s=1===t.deltaMode;s&&(a*=33),i.zoom({level:i.zoom()*Math.pow(10,a),renderedPosition:{x:o[0],y:o[1]}})}}};e.registerBinding(e.data.container,"wheel",h,!0),e.registerBinding(window,"scroll",function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.data.container,"mouseout",function(n){var i=e.projectIntoViewport(n.clientX,n.clientY);e.data.cy.trigger(new t.Event(n,{type:"mouseout",cyPosition:{x:i[0],y:i[1]}}))},!1),e.registerBinding(e.data.container,"mouseover",function(n){var i=e.projectIntoViewport(n.clientX,n.clientY);e.data.cy.trigger(new t.Event(n,{type:"mouseover",cyPosition:{x:i[0],y:i[1]}}))},!1);var d,p,f,g,v,y,m,x,b,w,_,E,T,D=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},S=function(t,e,n,i){return(n-t)*(n-t)+(i-e)*(i-e)};e.registerBinding(e.data.container,"touchstart",function(i){clearTimeout(this.threeFingerSelectTimeout),i.target!==e.data.link&&i.preventDefault(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.data.cy,a=e.getCachedNodes(),s=e.getCachedEdges(),l=e.touchData.now,u=e.touchData.earlier,c=e.data.canvasNeedsRedraw;if(i.touches[0]){var h=e.projectIntoViewport(i.touches[0].clientX,i.touches[0].clientY);l[0]=h[0],l[1]=h[1]}if(i.touches[1]){var h=e.projectIntoViewport(i.touches[1].clientX,i.touches[1].clientY);l[2]=h[0],l[3]=h[1]}if(i.touches[2]){var h=e.projectIntoViewport(i.touches[2].clientX,i.touches[2].clientY);l[4]=h[0],l[5]=h[1]}if(i.touches[1]){var N=function(t){for(var e=0;e<t.length;e++)t[e]._private.grabbed=!1,t[e]._private.rscratch.inDragLayer=!1,t[e].active()&&t[e].unactivate()};N(a),N(s);var C=e.findContainerClientCoords();b=C[0],w=C[1],_=C[2],E=C[3],d=i.touches[0].clientX-b,p=i.touches[0].clientY-w,f=i.touches[1].clientX-b,g=i.touches[1].clientY-w,T=d>=0&&_>=d&&f>=0&&_>=f&&p>=0&&E>=p&&g>=0&&E>=g;var L=r.pan(),M=r.zoom();v=D(d,p,f,g),y=S(d,p,f,g),m=[(d+f)/2,(p+g)/2],x=[(m[0]-L.x)/M,(m[1]-L.y)/M];var P=200,k=P*P;if(k>y&&!i.touches[2]){var I=e.findNearestElement(l[0],l[1],!0,!0),O=e.findNearestElement(l[2],l[3],!0,!0);return I&&I.isNode()?(I.activate().trigger(new t.Event(i,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}})),e.touchData.start=I):O&&O.isNode()?(O.activate().trigger(new t.Event(i,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}})),e.touchData.start=O):(r.trigger(new t.Event(i,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}})),e.touchData.start=null),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(i.touches[2]);else if(i.touches[1]);else if(i.touches[0]){var A=e.findNearestElement(l[0],l[1],!0,!0);if(null!=A){if(A.activate(),e.touchData.start=A,A.isNode()&&e.nodeIsDraggable(A)){var R=e.dragData.touchDragEles=[];if(c[n.NODE]=!0,c[n.DRAG]=!0,A.selected())for(var B=r.$(function(){return this.isNode()&&this.selected()}),F=0;F<B.length;F++){var z=B[F];e.nodeIsDraggable(z)&&o(z,{addToList:R})}else o(A,{addToList:R});A.trigger(new t.Event(i,{type:"grab",cyPosition:{x:l[0],y:l[1]}}))}A.trigger(new t.Event(i,{type:"touchstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new t.Event(i,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new t.Event(i,{type:"vmousdown",cyPosition:{x:l[0],y:l[1]}}))}null==A&&(r.trigger(new t.Event(i,{type:"touchstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new t.Event(i,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new t.Event(i,{type:"vmousedown",cyPosition:{x:l[0],y:l[1]}})),e.data.bgActivePosistion={x:h[0],y:h[1]},c[n.SELECT_BOX]=!0,e.redraw());for(var q=0;q<l.length;q++)u[q]=l[q],e.touchData.startPosition[q]=l[q];e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved!==!1||e.pinching||(e.touchData.start?e.touchData.start.trigger(new t.Event(i,{type:"taphold",cyPosition:{x:l[0],y:l[1]}})):(e.data.cy.trigger(new t.Event(i,{type:"taphold",cyPosition:{x:l[0],y:l[1]}})),r.$(":selected").unselect()))},e.tapholdDuration)}},!1),e.registerBinding(window,"touchmove",t.util.throttle(function(i){var r=e.data.select,a=e.touchData.capture;a&&i.preventDefault();var s=e.data.cy,l=e.touchData.now,u=e.touchData.earlier,c=s.zoom(),h=e.data.canvasNeedsRedraw;if(i.touches[0]){var m=e.projectIntoViewport(i.touches[0].clientX,i.touches[0].clientY);l[0]=m[0],l[1]=m[1]}if(i.touches[1]){var m=e.projectIntoViewport(i.touches[1].clientX,i.touches[1].clientY);l[2]=m[0],l[3]=m[1]}if(i.touches[2]){var m=e.projectIntoViewport(i.touches[2].clientX,i.touches[2].clientY);l[4]=m[0],l[5]=m[1]}for(var _=[],E=0;E<l.length;E++)_[E]=l[E]-u[E];var N=e.touchData.startPosition,C=l[0]-N[0],L=C*C,M=l[1]-N[1],P=M*M,k=L+P,I=k*c*c;if(a&&e.touchData.cxt){var O=i.touches[0].clientX-b,A=i.touches[0].clientY-w,R=i.touches[1].clientX-b,B=i.touches[1].clientY-w,F=S(O,A,R,B),z=F/y,q=150,j=q*q,X=1.5,Y=X*X;if(z>=Y||F>=j){e.touchData.cxt=!1,e.touchData.start&&(e.touchData.start.unactivate(),e.touchData.start=null),e.data.bgActivePosistion=void 0,h[n.SELECT_BOX]=!0;var V=new t.Event(i,{type:"cxttapend",cyPosition:{x:l[0],y:l[1]}});e.touchData.start?e.touchData.start.trigger(V):s.trigger(V)}}if(a&&e.touchData.cxt){var V=new t.Event(i,{type:"cxtdrag",cyPosition:{x:l[0],y:l[1]}});e.data.bgActivePosistion=void 0,h[n.SELECT_BOX]=!0,e.touchData.start?e.touchData.start.trigger(V):s.trigger(V),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var G=e.findNearestElement(l[0],l[1],!0,!0);e.touchData.cxtOver&&G===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.trigger(new t.Event(i,{type:"cxtdragout",cyPosition:{x:l[0],y:l[1]}})),e.touchData.cxtOver=G,G&&G.trigger(new t.Event(i,{type:"cxtdragover",cyPosition:{x:l[0],y:l[1]}})))}else if(a&&i.touches[2]&&s.boxSelectionEnabled())e.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,e.touchData.selecting=!0,h[n.SELECT_BOX]=!0,r&&0!==r.length&&void 0!==r[0]?(r[2]=(l[0]+l[2]+l[4])/3,r[3]=(l[1]+l[3]+l[5])/3):(r[0]=(l[0]+l[2]+l[4])/3,r[1]=(l[1]+l[3]+l[5])/3,r[2]=(l[0]+l[2]+l[4])/3+1,r[3]=(l[1]+l[3]+l[5])/3+1),r[4]=1,e.touchData.selecting=!0,e.redraw();else if(a&&i.touches[1]&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){e.data.bgActivePosistion=void 0,h[n.SELECT_BOX]=!0;var U=e.dragData.touchDragEles;if(U){h[n.DRAG]=!0;for(var W=0;W<U.length;W++)U[W]._private.grabbed=!1,U[W]._private.rscratch.inDragLayer=!1}var O=i.touches[0].clientX-b,A=i.touches[0].clientY-w,R=i.touches[1].clientX-b,B=i.touches[1].clientY-w,H=D(O,A,R,B),$=H/v;if(1!=$&&T){var Z=O-d,K=A-p,Q=R-f,J=B-g,tt=(Z+Q)/2,et=(K+J)/2,nt=s.zoom(),it=nt*$,rt=s.pan(),ot=x[0]*nt+rt.x,at=x[1]*nt+rt.y,st={x:-it/nt*(ot-rt.x-tt)+ot,y:-it/nt*(at-rt.y-et)+at};if(e.touchData.start){var U=e.dragData.touchDragEles;if(U)for(var W=0;W<U.length;W++){var lt=U[W]._private;lt.grabbed=!1,lt.rscratch.inDragLayer=!1}var ut=e.touchData.start._private;ut.active=!1,ut.grabbed=!1,ut.rscratch.inDragLayer=!1,h[n.DRAG]=!0,e.touchData.start.trigger("free").trigger("unactivate")}s.viewport({zoom:it,pan:st,cancelOnFailedZoom:!0}),v=H,d=O,p=A,f=R,g=B,e.pinching=!0}if(i.touches[0]){var m=e.projectIntoViewport(i.touches[0].clientX,i.touches[0].clientY);l[0]=m[0],l[1]=m[1]}if(i.touches[1]){var m=e.projectIntoViewport(i.touches[1].clientX,i.touches[1].clientY);l[2]=m[0],l[3]=m[1]}if(i.touches[2]){var m=e.projectIntoViewport(i.touches[2].clientX,i.touches[2].clientY);l[4]=m[0],l[5]=m[1]}}else if(i.touches[0]){var ct=e.touchData.start,ht=e.touchData.last,G=G||e.findNearestElement(l[0],l[1],!0,!0);if(null!=ct&&"nodes"==ct._private.group&&e.nodeIsDraggable(ct))if(I>=e.touchTapThreshold2){for(var U=e.dragData.touchDragEles,dt=0;dt<U.length;dt++){var pt=U[dt];if(e.nodeIsDraggable(pt)&&pt.isNode()&&pt.grabbed()){e.dragData.didDrag=!0;var ft=pt._private.position,gt=!e.hoverData.draggingEles;if(t.is.number(_[0])&&t.is.number(_[1])&&(ft.x+=_[0],ft.y+=_[1]),gt){o(pt,{inDragLayer:!0}),h[n.NODE]=!0;var vt=e.touchData.dragDelta;t.is.number(vt[0])&&t.is.number(vt[1])&&(ft.x+=vt[0],ft.y+=vt[1])}}}var yt=new t.Collection(s,pt);yt.updateCompoundBounds(),yt.trigger("position drag"),e.hoverData.draggingEles=!0,h[n.DRAG]=!0,e.touchData.startPosition[0]==u[0]&&e.touchData.startPosition[1]==u[1]&&(h[n.NODE]=!0),e.redraw()}else{var vt=e.touchData.dragDelta=e.touchData.dragDelta||[];0===vt.length?(vt.push(_[0]),vt.push(_[1])):(vt[0]+=_[0],vt[1]+=_[1])}null!=ct&&(ct.trigger(new t.Event(i,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}})),ct.trigger(new t.Event(i,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),ct.trigger(new t.Event(i,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}}))),null==ct&&(null!=G&&(G.trigger(new t.Event(i,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}})),G.trigger(new t.Event(i,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),G.trigger(new t.Event(i,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}}))),null==G&&(s.trigger(new t.Event(i,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}})),s.trigger(new t.Event(i,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),s.trigger(new t.Event(i,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}})))),G!=ht&&(ht&&ht.trigger(new t.Event(i,{type:"tapdragout",cyPosition:{x:l[0],y:l[1]}})),G&&G.trigger(new t.Event(i,{type:"tapdragover",cyPosition:{x:l[0],y:l[1]}}))),e.touchData.last=G;for(var W=0;W<l.length;W++)l[W]&&e.touchData.startPosition[W]&&Math.abs(l[W]-e.touchData.startPosition[W])>4&&(e.touchData.singleTouchMoved=!0);if(a&&(null==ct||ct.isEdge())&&s.panningEnabled()&&s.userPanningEnabled()){e.swipePanning?s.panBy({x:_[0]*c,y:_[1]*c}):I>=e.touchTapThreshold2&&(e.swipePanning=!0,s.panBy({x:C*c,y:M*c})),ct&&(ct.unactivate(),e.data.bgActivePosistion||(e.data.bgActivePosistion={x:l[0],y:l[1]}),h[n.SELECT_BOX]=!0,e.touchData.start=null);var m=e.projectIntoViewport(i.touches[0].clientX,i.touches[0].clientY);l[0]=m[0],l[1]=m[1]}}for(var E=0;E<l.length;E++)u[E]=l[E]},1e3/30,{trailing:!0}),!1),e.registerBinding(window,"touchcancel",function(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()}),e.registerBinding(window,"touchend",function(i){var r=e.touchData.start,o=e.touchData.capture;if(o){e.touchData.capture=!1,i.preventDefault();var s=e.data.select;e.swipePanning=!1,e.hoverData.draggingEles=!1;var l=e.data.cy,u=l.zoom(),c=e.touchData.now,h=e.touchData.earlier,d=e.data.canvasNeedsRedraw;
if(i.touches[0]){var p=e.projectIntoViewport(i.touches[0].clientX,i.touches[0].clientY);c[0]=p[0],c[1]=p[1]}if(i.touches[1]){var p=e.projectIntoViewport(i.touches[1].clientX,i.touches[1].clientY);c[2]=p[0],c[3]=p[1]}if(i.touches[2]){var p=e.projectIntoViewport(i.touches[2].clientX,i.touches[2].clientY);c[4]=p[0],c[5]=p[1]}r&&r.unactivate();var f;if(e.touchData.cxt){if(f=new t.Event(i,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}}),r?r.trigger(f):l.trigger(f),!e.touchData.cxtDragged){var g=new t.Event(i,{type:"cxttap",cyPosition:{x:c[0],y:c[1]}});r?r.trigger(g):l.trigger(g)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!i.touches[2]&&l.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1,clearTimeout(this.threeFingerSelectTimeout);var v=[],y=e.getAllInBox(s[0],s[1],s[2],s[3]);s[0]=void 0,s[1]=void 0,s[2]=void 0,s[3]=void 0,s[4]=0,d[n.SELECT_BOX]=!0;for(var m=0;m<y.length;m++)y[m]._private.selectable&&v.push(y[m]);var x=new t.Collection(l,v);"single"===l.selectionType()&&l.$(":selected").unmerge(x).unselect(),x.select(),x.length>0?d[n.NODE]=!0:e.redraw()}var b=!1;if(null!=r&&(r._private.active=!1,b=!0,r.unactivate()),i.touches[2])e.data.bgActivePosistion=void 0,d[n.SELECT_BOX]=!0;else if(i.touches[1]);else if(i.touches[0]);else if(!i.touches[0]){e.data.bgActivePosistion=void 0,d[n.SELECT_BOX]=!0;var w=e.dragData.touchDragEles;if(null!=r){var _=r._private.grabbed;a(w),d[n.DRAG]=!0,d[n.NODE]=!0,_&&r.trigger("free"),r.trigger(new t.Event(i,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(i,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(i,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),r.unactivate(),e.touchData.start=null}else{var E=e.findNearestElement(c[0],c[1],!0,!0);null!=E&&E.trigger(new t.Event(i,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(i,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(i,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),null==E&&l.trigger(new t.Event(i,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(i,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(i,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}}))}var T=e.touchData.startPosition[0]-c[0],D=T*T,S=e.touchData.startPosition[1]-c[1],N=S*S,C=D+N,L=C*u*u;null!=r&&!e.dragData.didDrag&&r._private.selectable&&L<e.touchTapThreshold2&&!e.pinching&&("single"===l.selectionType()?(l.$(":selected").unmerge(r).unselect(),r.select()):r.selected()?r.unselect():r.select(),b=!0,d[n.NODE]=!0),e.touchData.singleTouchMoved===!1&&(r?r.trigger(new t.Event(i,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(i,{type:"vclick",cyPosition:{x:c[0],y:c[1]}})):l.trigger(new t.Event(i,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(i,{type:"vclick",cyPosition:{x:c[0],y:c[1]}}))),e.touchData.singleTouchMoved=!0}for(var M=0;M<c.length;M++)h[M]=c[M];e.dragData.didDrag=!1,0===i.touches.length&&(e.touchData.dragDelta=[]),b&&r&&r.updateStyle(!1),i.touches.length<2&&(e.pinching=!1,d[n.NODE]=!0,e.redraw())}},!1)}}(cytoscape),function(t){"use strict";function e(e,n){o[e]={points:n,draw:function(t,n,r,a,s){i.drawPolygon(t,n,r,a,s,o[e].points)},drawPath:function(t,n,r,a,s){i.drawPolygonPath(t,n,r,a,s,o[e].points)},intersectLine:function(n,i,r,a,s,l,u){return t.math.polygonIntersectLine(s,l,o[e].points,n,i,r/2,a/2,u)},intersectBox:function(n,i,r,a,s,l,u,c,h){var d=o[e].points;return t.math.boxIntersectPolygon(n,i,r,a,d,s,l,u,c,[0,-1],h)},checkPoint:function(n,i,r,a,s,l,u){return t.math.pointInsidePolygon(n,i,o[e].points,l,u,a,s,[0,-1],r)}}}for(var n=t("renderer","canvas"),i=n.prototype,r=n.usePaths(),o=n.nodeShapes={},a=Math.sin(0),s=Math.cos(0),l={},u={},c=.1,h=0*Math.PI;h<2*Math.PI;h+=c)l[h]=Math.sin(h),u[h]=Math.cos(h);o.ellipse={draw:function(t,e,n,i,r){o.ellipse.drawPath(t,e,n,i,r),t.fill()},drawPath:function(t,e,n,i,o){if(r){t.beginPath&&t.beginPath();for(var h,d,p=i/2,f=o/2,g=0*Math.PI;g<2*Math.PI;g+=c)h=e-p*l[g]*a+p*u[g]*s,d=n+f*u[g]*a+f*l[g]*s,0===g?t.moveTo(h,d):t.lineTo(h,d);t.closePath()}else t.beginPath&&t.beginPath(),t.translate(e,n),t.scale(i/2,o/2),t.arc(0,0,1,0,2*Math.PI*.999,!1),t.closePath(),t.scale(2/i,2/o),t.translate(-e,-n)},intersectLine:function(e,n,i,r,o,a,s){var l=t.math.intersectLineEllipse(o,a,e,n,i/2+s,r/2+s);return l},intersectBox:function(e,n,i,r,o,a,s,l,u){return t.math.boxIntersectEllipse(e,n,i,r,u,o,a,s,l)},checkPoint:function(t,e,n,i,r,o,a){return t-=o,e-=a,t/=i/2+n,e/=r/2+n,Math.pow(t,2)+Math.pow(e,2)<=1}},e("triangle",t.math.generateUnitNgonPointsFitToSquare(3,0)),e("square",t.math.generateUnitNgonPointsFitToSquare(4,0)),o.rectangle=o.square,o.roundrectangle={points:t.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(t,e,n,r,o){i.drawRoundRectangle(t,e,n,r,o,10)},drawPath:function(t,e,n,r,o){i.drawRoundRectanglePath(t,e,n,r,o,10)},intersectLine:function(e,n,i,r,o,a,s){return t.math.roundRectangleIntersectLine(o,a,e,n,i,r,s)},intersectBox:function(e,n,i,r,o,a,s,l,u){return t.math.roundRectangleIntersectBox(e,n,i,r,o,a,s,l,u)},checkPoint:function(e,n,i,r,a,s,l){var u=t.math.getRoundRectangleRadius(r,a);if(t.math.pointInsidePolygon(e,n,o.roundrectangle.points,s,l,r,a-2*u,[0,-1],i))return!0;if(t.math.pointInsidePolygon(e,n,o.roundrectangle.points,s,l,r-2*u,a,[0,-1],i))return!0;var c=function(t,e,n,i,r,o,a){return t-=n,e-=i,t/=r/2+a,e/=o/2+a,Math.pow(t,2)+Math.pow(e,2)<=1};return!!c(e,n,s-r/2+u,l-a/2+u,2*u,2*u,i)||(!!c(e,n,s+r/2-u,l-a/2+u,2*u,2*u,i)||(!!c(e,n,s+r/2-u,l+a/2-u,2*u,2*u,i)||!!c(e,n,s-r/2+u,l+a/2-u,2*u,2*u,i)))}},e("diamond",[0,1,1,0,0,-1,-1,0]),e("pentagon",t.math.generateUnitNgonPointsFitToSquare(5,0)),e("hexagon",t.math.generateUnitNgonPointsFitToSquare(6,0)),e("heptagon",t.math.generateUnitNgonPointsFitToSquare(7,0)),e("octagon",t.math.generateUnitNgonPointsFitToSquare(8,0));var d=new Array(20),p=t.math.generateUnitNgonPoints(5,0),f=t.math.generateUnitNgonPoints(5,Math.PI/5),g=.5*(3-Math.sqrt(5));g*=1.57;for(var h=0;h<f.length/2;h++)f[2*h]*=g,f[2*h+1]*=g;for(var h=0;5>h;h++)d[4*h]=p[2*h],d[4*h+1]=p[2*h+1],d[4*h+2]=f[2*h],d[4*h+3]=f[2*h+1];d=t.math.fitPolygonToSquare(d),e("star",d),e("vee",[-1,-1,0,-.333,1,-1,0,1]),e("rhomboid",[-1,-1,.333,-1,1,1,-.333,1])}(cytoscape),function(t){"use strict";function e(e){this._private={},this._private.options=t.util.extend({},n,e)}var n={animate:!0,maxSimulationTime:4e3,fit:!0,padding:30,boundingBox:void 0,ungrabifyWhileSimulating:!1,ready:void 0,stop:void 0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:.1,stableEnergy:function(t){var e=t;return e.max<=.5||e.mean<=.3},infinite:!1};e.prototype.run=function(){var e=this,n=this._private.options;return t.util.require("arbor",function(i){function r(t,e){return null==e?void 0:"function"==typeof e?e.apply(t,[t._private.data,{nodes:u.length,edges:c.length,element:t}]):e}function o(t){if(!t.isFullAutoParent()){var e=t._private.data.id,i=r(t,n.nodeMass),o=t._private.locked,a=t.position(),s=p.fromScreen({x:a.x,y:a.y});t.scratch().arbor=p.addNode(e,{element:t,mass:i,fixed:o,x:o&&s?s.x:void 0,y:o&&s?s.y:void 0})}}function a(t){var e=t.source().id(),i=t.target().id(),o=r(t,n.edgeLength);t.scratch().arbor=p.addEdge(e,i,{length:o})}var s=n.cy,l=n.eles,u=l.nodes().not(":parent"),c=l.edges(),h=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()}),d=!1;if(e.trigger({type:"layoutstart",layout:e}),void 0!==n.liveUpdate&&(n.animate=n.liveUpdate),l.nodes().size()<=1)return n.fit&&s.reset(),l.nodes().position({x:Math.round((h.x1+h.x2)/2),y:Math.round((h.y1+h.y2)/2)}),e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e}),e.one("layoutstop",n.stop),void e.trigger({type:"layoutstop",layout:e});var p=e._private.system=i.ParticleSystem();p.parameters({repulsion:n.repulsion,stiffness:n.stiffness,friction:n.friction,gravity:n.gravity,fps:n.fps,dt:n.dt,precision:n.precision}),n.animate&&n.fit&&s.fit(h,n.padding);var f,g=250,v=!1,y=+new Date,m={init:function(t){},redraw:function(){var t=p.energy();if(!n.infinite&&null!=n.stableEnergy&&null!=t&&t.n>0&&n.stableEnergy(t))return void e.stop();n.infinite||g==1/0||(clearTimeout(f),f=setTimeout(D,g));var i=s.collection();p.eachNode(function(t,e){var n=t.data,r=n.element;null!=r&&(r.locked()||r.grabbed()||(r.silentPosition({x:h.x1+e.x,y:h.y1+e.y}),i.merge(r)))}),n.animate&&i.length>0&&(d=!0,i.rtrigger("position"),n.fit&&s.fit(n.padding),y=+new Date,d=!1),v||(v=!0,e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e}))}};p.renderer=m,p.screenSize(h.w,h.h),p.screenPadding(n.padding,n.padding,n.padding,n.padding),p.screenStep(n.stepSize);var x;u.on("grab free position",x=function(t){if(!d){var e=this.position(),r=p.fromScreen(e);if(r){var o=i.Point(r.x,r.y),a=n.padding;switch(h.x1+a<=e.x&&e.x<=h.x2-a&&h.y1+a<=e.y&&e.y<=h.y2-a&&(this.scratch().arbor.p=o),t.type){case"grab":this.scratch().arbor.fixed=!0;break;case"free":this.scratch().arbor.fixed=!1}}}});var b;u.on("lock unlock",b=function(t){node.scratch().arbor.fixed=node.locked()});var w;l.on("remove",w=function(t){});var _;s.on("add","*",_=function(){});var E;s.on("resize",E=function(){if(null==n.boundingBox&&null!=e._private.system){var t=s.width(),i=s.height();p.screenSize(t,i)}}),u.each(function(t,e){o(e)}),c.each(function(t,e){a(e)});var T=u.filter(":grabbable");n.ungrabifyWhileSimulating&&T.ungrabify();var D=e._private.doneHandler=function(){e._private.doneHandler=null,n.animate||(n.fit&&s.reset(),u.rtrigger("position")),u.off("grab free position",x),u.off("lock unlock",b),l.off("remove",w),s.off("add","*",_),s.off("resize",E),n.ungrabifyWhileSimulating&&T.grabify(),e.one("layoutstop",n.stop),e.trigger({type:"layoutstop",layout:e})};p.start(),!n.infinite&&null!=n.maxSimulationTime&&n.maxSimulationTime>0&&n.maxSimulationTime!==1/0&&setTimeout(function(){e.stop()},n.maxSimulationTime)}),this},e.prototype.stop=function(){return null!=this._private.system&&this._private.system.stop(),this._private.doneHandler&&this._private.doneHandler(),this},t("layout","arbor",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},n,e)}var n={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e,n=this.options,i=n,r=n.cy,o=i.eles,a=o.nodes().not(":parent"),s=o,l=t.util.makeBoundingBox(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(t.is.elementOrCollection(i.roots))e=i.roots;else if(t.is.array(i.roots)){for(var u=[],c=0;c<i.roots.length;c++){var h=i.roots[c],d=r.getElementById(h);u.push(d)}e=new t.Collection(r,u)}else if(t.is.string(i.roots))e=r.$(i.roots);else if(i.directed)e=a.roots();else{for(var p=[],f=a;f.length>0;){var g=r.collection();o.bfs({roots:f[0],visit:function(t,e,n,i,r){g=g.add(n)},directed:!1}),f=f.not(g),p.push(g)}e=r.collection();for(var c=0;c<p.length;c++){var v=p[c],y=v.maxDegree(!1),m=v.filter(function(){return this.degree(!1)===y});e=e.add(m)}}var x=[],b={},w={},_={},E={},T={};s.bfs({roots:e,directed:i.directed,visit:function(t,e,n,i,r){var o=this[0],a=o.id();if(x[e]||(x[e]=[]),x[e].push(o),b[a]=!0,w[a]=e,_[a]=r,E[a]=i,r){var s=r.id(),l=T[s]=T[s]||[];l.push(n)}}});for(var D=[],c=0;c<a.length;c++){var d=a[c];b[d.id()]||D.push(d)}for(var S=3*D.length,N=0;0!==D.length&&S>N;){for(var C=D.shift(),L=C.neighborhood().nodes(),M=!1,c=0;c<L.length;c++){var P=w[L[c].id()];if(void 0!==P){x[P].push(C),M=!0;break}}M||D.push(C),N++}for(;0!==D.length;){var C=D.shift(),M=!1;M||(0===x.length&&x.push([]),x[0].push(C))}var k=function(){for(var t=0;t<x.length;t++)for(var e=x[t],n=0;n<e.length;n++){var i=e[n];i._private.scratch.breadthfirst={depth:t,index:n}}};k();for(var I=function(t){for(var e,n=t.connectedEdges(function(){return this.data("target")===t.id()}),i=t._private.scratch.breadthfirst,r=0,o=0;o<n.length;o++){var a=n[o],s=a.source()[0],l=s._private.scratch.breadthfirst;i.depth<=l.depth&&r<l.depth&&(r=l.depth,e=s)}return e},O=0;O<i.maximalAdjustments;O++){for(var A=x.length,R=[],c=0;A>c;c++)for(var P=x[c],B=P.length,F=0;B>F;F++){var d=P[F],z=d._private.scratch.breadthfirst,q=I(d);q&&(z.intEle=q,R.push(d))}for(var c=0;c<R.length;c++){var d=R[c],z=d._private.scratch.breadthfirst,q=z.intEle,j=q._private.scratch.breadthfirst;x[z.depth].splice(z.index,1);for(var X=j.depth+1;X>x.length-1;)x.push([]);x[X].push(d),z.depth=X,z.index=x[X].length-1}k()}var Y=0;if(i.avoidOverlap){for(var c=0;c<a.length;c++){var V=a[c].outerWidth(),G=a[c].outerHeight();Y=Math.max(Y,V,G)}Y*=i.spacingFactor}for(var U={},W=function(t){if(U[t.id()])return U[t.id()];for(var e=t._private.scratch.breadthfirst.depth,n=t.neighborhood().nodes().not(":parent"),i=0,r=0,o=0;o<n.length;o++){var a=n[o],s=a._private.scratch.breadthfirst,l=s.index,u=s.depth,c=x[u].length;(e>u||0===e)&&(i+=l/c,r++)}return r=Math.max(1,r),i/=r,0===r&&(i=void 0),U[t.id()]=i,i},H=function(t,e){var n=W(t),i=W(e);return n-i},$=0;3>$;$++){for(var c=0;c<x.length;c++)x[c]=x[c].sort(H);k()}for(var Z=0,c=0;c<x.length;c++)Z=Math.max(x[c].length,Z);for(var K={x:l.x1+l.w/2,y:l.x1+l.h/2},Q=function(t,e){var n=t._private.scratch.breadthfirst,r=n.depth,o=n.index,a=x[r].length,s=Math.max(l.w/(a+1),Y),u=Math.max(l.h/(x.length+1),Y),c=Math.min(l.w/2/x.length,l.h/2/x.length);if(c=Math.max(c,Y),i.circle){if(i.circle){var h=c*r+c-(x.length>0&&x[0].length<=3?c/2:0),d=2*Math.PI/x[r].length*o;return 0===r&&1===x[0].length&&(h=1),{x:K.x+h*Math.cos(d),y:K.y+h*Math.sin(d)}}return{x:K.x+(o+1-(a+1)/2)*s,y:(r+1)*u}}var p={x:K.x+(o+1-(a+1)/2)*s,y:(r+1)*u};return e?p:p},J={},c=x.length-1;c>=0;c--)for(var P=x[c],F=0;F<P.length;F++){var C=P[F];J[C.id()]=Q(C,c===x.length-1)}return a.layoutPositions(this,i,function(){return J[this.id()]}),this},t("layout","breadthfirst",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},n,e)}var n={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,counterclockwise:!1,sort:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e=this.options,n=e,i=e.cy,r=n.eles,o=r.nodes().not(":parent");n.sort&&(o=o.sort(n.sort));for(var a,s=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),l={x:s.x1+s.w/2,y:s.y1+s.h/2},u=n.startAngle,c=2*Math.PI/o.length,h=0,d=0;d<o.length;d++){var p=o[d].outerWidth(),f=o[d].outerHeight();h=Math.max(h,p,f)}if(a=t.is.number(n.radius)?n.radius:o.length<=1?0:Math.min(s.h,s.w)/2-h,o.length>1&&n.avoidOverlap){h*=1.75;var c=2*Math.PI/o.length,g=Math.cos(c)-Math.cos(0),v=Math.sin(c)-Math.sin(0),y=Math.sqrt(h*h/(g*g+v*v));a=Math.max(y,a)}var m=function(t,e){var i=a*Math.cos(u),r=a*Math.sin(u),o={x:l.x+i,y:l.y+r};return u=n.counterclockwise?u-c:u+c,o};return o.layoutPositions(this,n,m),this},t("layout","circle",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(t){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};e.prototype.run=function(){var e=this,n=this.options;return e.manuallyStopped=!1,t.util.require("cola",function(i){var r=n.cy,o=n.eles,a=o.nodes(),s=o.edges(),l=!1,u=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),c=function(e,n){if(t.is.fn(e)){var i=e;return i.apply(n,[n])}return e},h=function(){for(var e={min:1/0,max:-(1/0)},i={min:1/0,max:-(1/0)},o=0;o<a.length;o++){var s=a[o],h=s._private.scratch.cola;if(e.min=Math.min(e.min,h.x||0),e.max=Math.max(e.max,h.x||0),i.min=Math.min(i.min,h.y||0),i.max=Math.max(i.max,h.y||0),!h.updatedDims){var d=s.boundingBox(),f=c(n.nodeSpacing,s);h.width=d.w+2*f,h.height=d.h+2*f}}a.positions(function(n,r){var o,a=r._private.scratch.cola;return r.grabbed()||r.isParent()||(o={x:u.x1+a.x-e.min,y:u.y1+a.y-i.min},t.is.number(o.x)&&t.is.number(o.y)||(o=void 0)),o}),a.updateCompoundBounds(),l||(p(),l=!0),n.fit&&r.fit(n.padding)},d=function(){n.ungrabifyWhileSimulating&&y.grabify(),a.off("grab free position",m),a.off("lock unlock",x),e.one("layoutstop",n.stop),e.trigger({type:"layoutstop",layout:e})},p=function(){e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e})},f=n.refresh,g=1;n.refresh<0?(g=Math.abs(n.refresh),f=1):f=Math.max(1,f);var v=e.adaptor=i.adaptor({trigger:function(t){var e=i.EventType?i.EventType.tick:null,r=i.EventType?i.EventType.end:null;switch(t.type){case"tick":case e:n.animate&&h();break;case"end":case r:h(),n.infinite||d()}},kick:function(){var i=function(){if(e.manuallyStopped)return d(),!0;var t=v.tick();return t&&n.infinite&&v.resume(),t},r=function(){for(var t,e=0;f>e&&!t;e++)t=t||i();return t};if(n.animate){var o=function(){r()||t.util.requestAnimationFrame(o)};t.util.requestAnimationFrame(o)}else for(;!i(););},on:function(t,e){},drag:function(){}});e.adaptor=v;var y=a.filter(":grabbable");n.ungrabifyWhileSimulating&&y.ungrabify();var m;a.on("grab free position",m=function(t){var e=this,n=e._private.scratch.cola,i=e._private.position;switch(n.x=i.x-u.x1,n.y=i.y-u.y1,t.type){case"grab":v.dragstart(n),v.resume();break;case"free":v.dragend(n)}});var x;a.on("lock unlock",x=function(t){var e=this,n=e._private.scratch.cola;e.locked()?v.dragstart(n):v.dragend(n)});var b=a.stdFilter(function(t){return!t.isParent()});if(v.nodes(b.map(function(t,e){var i=c(n.nodeSpacing,t),r=t.position(),o=t.boundingBox(),a=t._private.scratch.cola={x:n.randomize||void 0===r.x?Math.round(Math.random()*u.w):r.x,y:n.randomize||void 0===r.y?Math.round(Math.random()*u.h):r.y,width:o.w+2*i,height:o.h+2*i,index:e};return a})),n.alignment){var w=[],_=[];b.forEach(function(t){var e=c(n.alignment,t),i=t._private.scratch.cola,r=i.index;e&&(null!=e.x&&w.push({node:r,offset:e.x}),null!=e.y&&_.push({node:r,offset:e.y}))});var E=[];w.length>0&&E.push({type:"alignment",axis:"x",offsets:w}),_.length>0&&E.push({type:"alignment",axis:"y",offsets:_}),v.constraints(E)}v.groups(a.stdFilter(function(t){return t.isParent()}).map(function(t,e){var i=t._private.style,r=c(n.nodeSpacing,t),o=i["padding-left"].pxValue+r,a=i["padding-right"].pxValue+r,s=i["padding-top"].pxValue+r,l=i["padding-bottom"].pxValue+r;return t._private.scratch.cola={index:e,padding:Math.max(o,a,s,l),leaves:t.descendants().stdFilter(function(t){return!t.isParent()}).map(function(t){return t[0]._private.scratch.cola.index})},t}).map(function(t){return t._private.scratch.cola.groups=t.descendants().stdFilter(function(t){return t.isParent()}).map(function(t){return t._private.scratch.cola.index}),t._private.scratch.cola}));var T,D;null!=n.edgeLength?(T=n.edgeLength,D="linkDistance"):null!=n.edgeSymDiffLength?(T=n.edgeSymDiffLength,D="symmetricDiffLinkLengths"):null!=n.edgeJaccardLength?(T=n.edgeJaccardLength,D="jaccardLinkLengths"):(T=100,D="linkDistance");var S=function(t){return t.calcLength};if(v.links(s.stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}).map(function(t,e){var n=t._private.scratch.cola={source:t.source()[0]._private.scratch.cola.index,target:t.target()[0]._private.scratch.cola.index};return null!=T&&(n.calcLength=c(T,t)),n})),v.size([u.w,u.h]),null!=T&&v[D](S),n.flow){var N,C="y",L=50;t.is.string(n.flow)?N={axis:n.flow,minSeparation:L}:t.is.number(n.flow)?N={axis:C,minSeparation:n.flow}:t.is.plainObject(n.flow)?(N=n.flow,N.axis=N.axis||C,N.minSeparation=null!=N.minSeparation?N.minSeparation:L):N={axis:C,minSeparation:L},v.flowLayout(N.axis,N.minSeparation)}e.trigger({type:"layoutstart",layout:e}),v.avoidOverlaps(n.avoidOverlap).handleDisconnected(n.handleDisconnected).start(n.unconstrIter,n.userConstIter,n.allConstIter),n.infinite||setTimeout(function(){e.manuallyStopped||v.stop()},n.maxSimulationTime)}),this},e.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},t("layout","cola",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},n,e)}var n={fit:!0,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){for(var e=this.options,n=e,i=e.cy,r=n.eles,o=r.nodes().not(":parent"),a=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},l=[],u=n.startAngle,c=0,h=0;h<o.length;h++){var d,p=o[h];d=n.concentric.apply(p,[p]),l.push({value:d,node:p}),p._private.scratch.concentric=d}o.updateStyle();for(var h=0;h<o.length;h++){var p=o[h];c=Math.max(c,p.outerWidth(),p.outerHeight())}l.sort(function(t,e){return e.value-t.value});for(var f=n.levelWidth(o),g=[[]],v=g[0],h=0;h<l.length;h++){var y=l[h];if(v.length>0){var m=Math.abs(v[0].value-y.value);m>=f&&(v=[],g.push(v))}v.push(y)}var x={},b=0,w=c+n.minNodeSpacing;if(!n.avoidOverlap){var _=g.length>0&&g[0].length>1,E=Math.min(a.w,a.h)/2-w,T=E/(g.length+_?1:0);w=Math.min(w,T)}for(var h=0;h<g.length;h++){var D=g[h],S=2*Math.PI/D.length;if(D.length>1&&n.avoidOverlap){var N=Math.cos(S)-Math.cos(0),C=Math.sin(S)-Math.sin(0),L=Math.sqrt(w*w/(N*N+C*C));b=Math.max(L,b)}for(var M=0;M<D.length;M++){var y=D[M],u=n.startAngle+(n.counterclockwise?-1:1)*S*M,P={x:s.x+b*Math.cos(u),y:s.y+b*Math.sin(u)};x[y.node.id()]=P}b+=w}return o.layoutPositions(this,n,function(){var t=this.id();return x[t]}),this},t("layout","concentric",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},i,e)}var n,i={ready:function(){},stop:function(){},animate:!0,refresh:4,fit:!0,padding:30,boundingBox:void 0,randomize:!0,debug:!1,nodeRepulsion:4e5,nodeOverlap:10,idealEdgeLength:10,edgeElasticity:100,nestingFactor:5,gravity:250,numIter:100,initialTemp:200,coolingFactor:.95,minTemp:1};e.prototype.run=function(){var e=this.options,i=e.cy,o=this;o.stopped=!1,o.trigger({type:"layoutstart",layout:o}),n=!0===e.debug;var a=new Date,h=r(i,o,e);n&&s(h),!0===e.randomize&&l(h,i),m(h,i,e);var d=function(t){return!o.stopped&&(c(h,i,e,t),h.temperature=h.temperature*e.coolingFactor,!(h.temperature<e.minTemp))},p=function(){u(h,i,e),!0===e.fit&&i.fit(e.padding);var t=new Date;console.info("Layout took "+(t-a)+" ms"),o.one("layoutstop",e.stop),o.trigger({type:"layoutstop",layout:o})};if(e.animate){var f=0,g=function(){for(var n,r=0;r<e.refresh&&f<e.numIter;){var n=d(f);if(n===!1)break;r++,f++}u(h,i,e),e.fit&&i.fit(e.padding),n!==!1&&f+1<e.numIter?t.util.requestAnimationFrame(g):p()};t.util.requestAnimationFrame(g)}else{for(var f=0;f<e.numIter&&d(f)!==!1;f++);p()}return this},e.prototype.stop=function(){return this.stopped=!0,this};var r=function(e,n,i){for(var r=i.eles.edges(),a=i.eles.nodes(),s={layout:n,layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:i.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:t.util.makeBoundingBox(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},l=0;l<s.nodeSize;l++){var u={};u.id=a[l].data("id"),u.parentId=a[l].data("parent"),u.children=[],u.positionX=a[l].position("x"),u.positionY=a[l].position("y"),u.offsetX=0,u.offsetY=0,u.height=a[l].height(),u.width=a[l].width(),u.maxX=u.positionX+u.width/2,u.minX=u.positionX-u.width/2,u.maxY=u.positionY+u.height/2,u.minY=u.positionY-u.height/2,u.padLeft=a[l]._private.style["padding-left"].pxValue,u.padRight=a[l]._private.style["padding-right"].pxValue,u.padTop=a[l]._private.style["padding-top"].pxValue,u.padBottom=a[l]._private.style["padding-bottom"].pxValue,s.layoutNodes.push(u),s.idToIndex[u.id]=l}for(var c=[],h=0,d=-1,p=[],l=0;l<s.nodeSize;l++){var f=s.layoutNodes[l],g=f.parentId;null!=g?s.layoutNodes[s.idToIndex[g]].children.push(f.id):(c[++d]=f.id,p.push(f.id))}for(s.graphSet.push(p);d>=h;){var v=c[h++],y=s.idToIndex[v],m=s.layoutNodes[y],x=m.children;if(x.length>0){s.graphSet.push(x);for(var l=0;l<x.length;l++)c[++d]=x[l]}}for(var l=0;l<s.graphSet.length;l++)for(var b=s.graphSet[l],w=0;w<b.length;w++){var _=s.idToIndex[b[w]];s.indexToGraph[_]=l}for(var l=0;l<s.edgeSize;l++){var E=r[l],T={};T.id=E.data("id"),T.sourceId=E.data("source"),T.targetId=E.data("target");var D=i.idealEdgeLength,S=s.idToIndex[T.sourceId],N=s.idToIndex[T.targetId],C=s.indexToGraph[S],L=s.indexToGraph[N];if(C!=L){for(var M=o(T.sourceId,T.targetId,s),P=s.graphSet[M],k=0,u=s.layoutNodes[S];-1===$.inArray(u.id,P);)u=s.layoutNodes[s.idToIndex[u.parentId]],k++;for(u=s.layoutNodes[N];-1===$.inArray(u.id,P);)u=s.layoutNodes[s.idToIndex[u.parentId]],k++;D*=k*i.nestingFactor}T.idealLength=D,s.layoutEdges.push(T)}return s},o=function(t,e,n){var i=a(t,e,0,n);return 2>i.count?0:i.graph},a=function(t,e,n,i){var r=i.graphSet[n];if(-1<$.inArray(t,r)&&-1<$.inArray(e,r))return{count:2,graph:n};for(var o=0,s=0;s<r.length;s++){var l=r[s],u=i.idToIndex[l],c=i.layoutNodes[u].children;if(0!==c.length){var h=i.indexToGraph[i.idToIndex[c[0]]],d=a(t,e,h,i);if(0!==d.count){if(1!==d.count)return d;if(o++,2===o)break}}}return{count:o,graph:n}},s=function(t){if(n){console.debug("layoutNodes:");for(var e=0;e<t.nodeSize;e++){var i=t.layoutNodes[e],r="\nindex: "+e+"\nId: "+i.id+"\nChildren: "+i.children.toString()+"\nparentId: "+i.parentId+"\npositionX: "+i.positionX+"\npositionY: "+i.positionY+"\nOffsetX: "+i.offsetX+"\nOffsetY: "+i.offsetY+"\npadLeft: "+i.padLeft+"\npadRight: "+i.padRight+"\npadTop: "+i.padTop+"\npadBottom: "+i.padBottom;console.debug(r)}console.debug("idToIndex");for(var e in t.idToIndex)console.debug("Id: "+e+"\nIndex: "+t.idToIndex[e]);console.debug("Graph Set");for(var o=t.graphSet,e=0;e<o.length;e++)console.debug("Set : "+e+": "+o[e].toString());for(var r="IndexToGraph",e=0;e<t.indexToGraph.length;e++)r+="\nIndex : "+e+" Graph: "+t.indexToGraph[e];console.debug(r),r="Layout Edges";for(var e=0;e<t.layoutEdges.length;e++){var a=t.layoutEdges[e];r+="\nEdge Index: "+e+" ID: "+a.id+" SouceID: "+a.sourceId+" TargetId: "+a.targetId+" Ideal Length: "+a.idealLength}console.debug(r),r="nodeSize: "+t.nodeSize,r+="\nedgeSize: "+t.edgeSize,r+="\ntemperature: "+t.temperature,console.debug(r)}},l=function(t,e){for(var n=t.clientWidth,i=t.clientHeight,r=0;r<t.nodeSize;r++){var o=t.layoutNodes[r];o.positionX=Math.random()*n,o.positionY=Math.random()*i}},u=function(t,e,n){var i=t.layout,r=n.eles.nodes(),o=t.boundingBox,a={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};n.boundingBox&&(r.forEach(function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),r.positions(function(e,i){var r=t.layoutNodes[t.idToIndex[i.data("id")]];if(n.boundingBox){var s=(r.positionX-a.x1)/a.w,l=(r.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+l*o.h}}return{x:r.positionX,y:r.positionY}}),!0!==t.ready&&(t.ready=!0,i.one("layoutready",n.ready),i.trigger({type:"layoutready",layout:this}))},c=function(t,e,n,i){h(t,e,n),g(t,e,n),v(t,e,n),y(t,e,n),m(t,e,n)},h=function(t,e,n){for(var i=0;i<t.graphSet.length;i++)for(var r=t.graphSet[i],o=r.length,a=0;o>a;a++)for(var s=t.layoutNodes[t.idToIndex[r[a]]],l=a+1;o>l;l++){var u=t.layoutNodes[t.idToIndex[r[l]]];d(s,u,t,e,n)}},d=function(t,e,n,i,r){var o=e.positionX-t.positionX,a=e.positionY-t.positionY;if(0!==o||0!==a){var s=f(t,e,o,a);if(s>0)var l=r.nodeOverlap*s,u=Math.sqrt(o*o+a*a),c=l*o/u,h=l*a/u;else var d=p(t,o,a),g=p(e,-1*o,-1*a),v=g.x-d.x,y=g.y-d.y,m=v*v+y*y,u=Math.sqrt(m),l=r.nodeRepulsion/m,c=l*v/u,h=l*y/u;t.offsetX-=c,t.offsetY-=h,e.offsetX+=c,e.offsetY+=h}},p=function(t,e,n){var i=t.positionX,r=t.positionY,o=t.height,a=t.width,s=n/e,l=o/a,u={};do{if(0===e&&n>0){u.x=i,u.y=r+o/2;break}if(0===e&&0>n){u.x=i,u.y=r+o/2;break}if(e>0&&s>=-1*l&&l>=s){u.x=i+a/2,u.y=r+a*n/2/e;break}if(0>e&&s>=-1*l&&l>=s){u.x=i-a/2,u.y=r-a*n/2/e;break}if(n>0&&(-1*l>=s||s>=l)){u.x=i+o*e/2/n,u.y=r+o/2;break}if(0>n&&(-1*l>=s||s>=l)){u.x=i-o*e/2/n,u.y=r-o/2;break}}while(!1);return u},f=function(t,e,n,i){if(n>0)var r=t.maxX-e.minX;else var r=e.maxX-t.minX;if(i>0)var o=t.maxY-e.minY;else var o=e.maxY-t.minY;return r>=0&&o>=0?Math.sqrt(r*r+o*o):0},g=function(t,e,n){for(var i=0;i<t.edgeSize;i++){var r=t.layoutEdges[i],o=t.idToIndex[r.sourceId],a=t.layoutNodes[o],s=t.idToIndex[r.targetId],l=t.layoutNodes[s],u=l.positionX-a.positionX,c=l.positionY-a.positionY;if(0===u&&0===c)return;var h=p(a,u,c),d=p(l,-1*u,-1*c),f=d.x-h.x,g=d.y-h.y,v=Math.sqrt(f*f+g*g),y=Math.pow(r.idealLength-v,2)/n.edgeElasticity;if(0!==v)var m=y*f/v,x=y*g/v;else var m=0,x=0;a.offsetX+=m,a.offsetY+=x,l.offsetX-=m,l.offsetY-=x}},v=function(t,e,n){for(var i=0;i<t.graphSet.length;i++){var r=t.graphSet[i],o=r.length;if(0===i)var a=t.clientHeight/2,s=t.clientWidth/2;else var l=t.layoutNodes[t.idToIndex[r[0]]],u=t.layoutNodes[t.idToIndex[l.parentId]],a=u.positionX,s=u.positionY;for(var c=0;o>c;c++){var h=t.layoutNodes[t.idToIndex[r[c]]],d=a-h.positionX,p=s-h.positionY,f=Math.sqrt(d*d+p*p);if(f>1){var g=n.gravity*d/f,v=n.gravity*p/f;h.offsetX+=g,h.offsetY+=v}}}},y=function(t,e,n){var i=[],r=0,o=-1;for(i.push.apply(i,t.graphSet[0]),o+=t.graphSet[0].length;o>=r;){var a=i[r++],s=t.idToIndex[a],l=t.layoutNodes[s],u=l.children;if(0<u.length){for(var c=l.offsetX,h=l.offsetY,d=0;d<u.length;d++){var p=t.layoutNodes[t.idToIndex[u[d]]];p.offsetX+=c,p.offsetY+=h,i[++o]=u[d]}l.offsetX=0,l.offsetY=0}}},m=function(t,e,n){for(var i=0;i<t.nodeSize;i++){var r=t.layoutNodes[i];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var i=0;i<t.nodeSize;i++){var r=t.layoutNodes[i];if(!(0<r.children.length)){var o=x(r.offsetX,r.offsetY,t.temperature);r.positionX+=o.x,r.positionY+=o.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,b(r,t)}}for(var i=0;i<t.nodeSize;i++){var r=t.layoutNodes[i];0<r.children.length&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},x=function(t,e,n){var i=Math.sqrt(t*t+e*e);if(i>n)var r={x:n*t/i,y:n*e/i};else var r={x:t,y:e};return r},b=function(t,e){var n=t.parentId;if(null!=n){var i=e.layoutNodes[e.idToIndex[n]],r=!1;return(null==i.maxX||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,r=!0),(null==i.minX||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,r=!0),(null==i.maxY||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,r=!0),(null==i.minY||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,r=!0),r?b(i,e):void 0}};t("layout","cose",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(t){return 1},edgeWeight:function(t){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,boundingBox:void 0,ready:function(){},stop:function(){}};e.prototype.run=function(){var e=this.options,n=this;return t.util.require("dagre",function(i){var r=e.cy,o=e.eles,a=function(e,n){return t.is.fn(n)?n.apply(e,[e]):n},s=t.util.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l=new i.graphlib.Graph({multigraph:!0,compound:!0}),u={},c=function(t,e){null!=e&&(u[t]=e)};c("nodesep",e.nodeSep),c("edgesep",e.edgeSep),c("ranksep",e.rankSep),c("rankdir",e.rankDir),l.setGraph(u),l.setDefaultEdgeLabel(function(){return{}}),l.setDefaultNodeLabel(function(){return{}});for(var h=o.nodes(),d=0;d<h.length;d++){var p=h[d];l.setNode(p.id(),{width:p.width(),height:p.height(),name:p.id()})}for(var d=0;d<h.length;d++){
var p=h[d];p.isChild()&&l.setParent(p.id(),p.parent().id())}for(var f=o.edges().stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}),d=0;d<f.length;d++){var g=f[d];l.setEdge(g.source().id(),g.target().id(),{minlen:a(g,e.minLen),weight:a(g,e.edgeWeight),name:g.id()},g.id())}i.layout(l);for(var v=l.nodes(),d=0;d<v.length;d++){var y=v[d],m=l.node(y);r.getElementById(y).scratch().dagre=m}var x;e.boundingBox?(x={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)},h.forEach(function(t){var e=t.scratch().dagre;x.x1=Math.min(x.x1,e.x),x.x2=Math.max(x.x2,e.x),x.y1=Math.min(x.y1,e.y),x.y2=Math.max(x.y2,e.y)}),x.w=x.x2-x.x1,x.h=x.y2-x.y1):x=s;var b=function(t){if(e.boundingBox){var n=(t.x-x.x1)/x.w,i=(t.y-x.y1)/x.h;return{x:s.x1+n*s.w,y:s.y1+i*s.h}}return t};h.layoutPositions(n,e,function(){var t=this.scratch().dagre;return b({x:t.x,y:t.y})})}),this},t("layout","dagre",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},n,e)}var n={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,rows:void 0,columns:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e=this.options,n=e,i=e.cy,r=n.eles,o=r.nodes().not(":parent");n.sort&&(o=o.sort(n.sort));var a=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()});if(0===a.h||0===a.w)o.layoutPositions(this,n,function(){return{x:a.x1,y:a.y1}});else{var s=o.size(),l=Math.sqrt(s*a.h/a.w),u=Math.round(l),c=Math.round(a.w/a.h*l),h=function(t){if(null==t)return Math.min(u,c);var e=Math.min(u,c);e==u?u=t:c=t},d=function(t){if(null==t)return Math.max(u,c);var e=Math.max(u,c);e==u?u=t:c=t};if(null!=n.rows&&null!=n.columns)u=n.rows,c=n.columns;else if(null!=n.rows&&null==n.columns)u=n.rows,c=Math.ceil(s/u);else if(null==n.rows&&null!=n.columns)c=n.columns,u=Math.ceil(s/c);else if(c*u>s){var p=h(),f=d();(p-1)*f>=s?h(p-1):(f-1)*p>=s&&d(f-1)}else for(;s>c*u;){var p=h(),f=d();(f+1)*p>=s?d(f+1):h(p+1)}var g=a.w/c,v=a.h/u;if(n.avoidOverlap)for(var y=0;y<o.length;y++){var m=o[y],x=m.outerWidth(),b=m.outerHeight();g=Math.max(g,x),v=Math.max(v,b)}for(var w={},_=function(t,e){return!!w["c-"+t+"-"+e]},E=function(t,e){w["c-"+t+"-"+e]=!0},T=0,D=0,S=function(){D++,D>=c&&(D=0,T++)},N={},y=0;y<o.length;y++){var m=o[y],C=n.position(m);if(C&&(void 0!==C.row||void 0!==C.col)){var L={row:C.row,col:C.col};if(void 0===L.col)for(L.col=0;_(L.row,L.col);)L.col++;else if(void 0===L.row)for(L.row=0;_(L.row,L.col);)L.row++;N[m.id()]=L,E(L.row,L.col)}}var M=function(t,e){var n,i;if(e.locked()||e.isFullAutoParent())return!1;var r=N[e.id()];if(r)n=r.col*g+g/2+a.x1,i=r.row*v+v/2+a.y1;else{for(;_(T,D);)S();n=D*g+g/2+a.x1,i=T*v+v/2+a.y1,E(T,D),S()}return{x:n,y:i}};o.layoutPositions(this,n,M)}return this},t("layout","grid",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={ready:function(){},stop:function(){}};e.prototype.run=function(){var t=this.options,e=t.eles,n=this;return t.cy,n.trigger("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",t.ready),n.trigger("layoutready"),n.one("layoutstop",t.stop),n.trigger("layoutstop"),this},e.prototype.stop=function(){return this},t("layout","null",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){function e(t){if(null==n.positions)return null;if(o)return n.positions.apply(t,[t]);var e=n.positions[t._private.data.id];return null==e?null:e}var n=this.options,i=n.eles,r=i.nodes(),o=t.is.fn(n.positions);return r.layoutPositions(this,n,function(t,n){var i=e(n);return!n.locked()&&null!=i&&i}),this},t("layout","preset",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e=this.options,n=e.cy,i=e.eles,r=i.nodes().not(":parent"),o=t.util.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),a=function(t,e){return{x:o.x1+Math.round(Math.random()*o.w),y:o.y1+Math.round(Math.random()*o.h)}};return r.layoutPositions(this,e,a),this},t("layout","random",e)}(cytoscape),function($$){"use strict";function SpreadLayout(t){this.options=$$.util.extend({},defaults,t)}function cellCentroid(t){for(var e,n,i,r=t.halfedges,o=0,a=0,s=0,l=0;l<r.length;++l)e=r[l].getEndpoint(),n=r[l].getStartpoint(),o+=e.x*n.y,o-=e.y*n.x,i=e.x*n.y-n.x*e.y,a+=(e.x+n.x)*i,s+=(e.y+n.y)*i;return o/=2,i=6*o,{x:a/i,y:s/i}}function sitesDistance(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}var defaults={animate:!0,ready:void 0,stop:void 0,fit:!0,minDist:20,padding:20,expandingFactor:-1,maxFruchtermanReingoldIterations:50,maxExpandIterations:4,boundingBox:void 0};SpreadLayout.prototype.run=function(){var layout=this,options=this.options;return $$.util.requires(["foograph","Voronoi"],function(foograph,Voronoi){function setPositions(t){for(var e=t.vertices,n=[],i=0;i<e.length;++i){var r=e[i];n[r.id]={x:r.x,y:r.y}}nodes.positions(function(t,e){var i=e._private.data.id,r=n[i];return{x:Math.round(simBB.x1+r.x),y:Math.round(simBB.y1+r.y)}}),options.fit&&cy.fit(options.padding),cy.nodes().rtrigger("position")}var cy=options.cy,nodes=cy.nodes(),edges=cy.edges(),cWidth=cy.width(),cHeight=cy.height(),simulationBounds=options.boundingBox?$$.util.makeBoundingBox(options.boundingBox):null,padding=options.padding,simBBFactor=Math.max(1,.8*Math.log(nodes.length));nodes.length<100&&(simBBFactor/=2),layout.trigger({type:"layoutstart",layout:layout});var simBB={x1:0,y1:0,x2:cWidth*simBBFactor,y2:cHeight*simBBFactor};simulationBounds&&(simBB.x1=simulationBounds.x1,simBB.y1=simulationBounds.y1,simBB.x2=simulationBounds.x2,simBB.y2=simulationBounds.y2),simBB.x1+=padding,simBB.y1+=padding,simBB.x2-=padding,simBB.y2-=padding;var width=simBB.x2-simBB.x1,height=simBB.y2-simBB.y1,startTime=Date.now();if(nodes.size()<=1){nodes.positions({x:Math.round((simBB.x1+simBB.x2)/2),y:Math.round((simBB.y1+simBB.y2)/2)}),options.fit&&cy.fit(options.padding);var endTime=Date.now();return console.info("Layout on "+nodes.size()+" nodes took "+(endTime-startTime)+" ms"),layout.one("layoutready",options.ready),layout.trigger("layoutready"),layout.one("layoutstop",options.stop),void layout.trigger("layoutstop")}var pData={width:width,height:height,minDist:options.minDist,expFact:options.expandingFactor,expIt:0,maxExpIt:options.maxExpandIterations,vertices:[],edges:[],startTime:startTime,maxFruchtermanReingoldIterations:options.maxFruchtermanReingoldIterations};nodes.each(function(t,e){var n=this._private.data.id;pData.vertices.push({id:n,x:0,y:0})}),edges.each(function(){var t=this.source().id(),e=this.target().id();pData.edges.push({src:t,tgt:e})});var t1=$$.Thread();t1.require(foograph,"foograph"),t1.require(Voronoi),t1.require(sitesDistance),t1.require(cellCentroid);var didLayoutReady=!1;t1.on("message",function(t){var e=t.message;options.animate&&(setPositions(e),didLayoutReady||(layout.trigger("layoutready"),didLayoutReady=!0))}),layout.one("layoutready",options.ready),t1.pass(pData).run(function(pData){function checkMinDist(t){for(var e=0,n=0;n<t.length;++n){var i=t[n];null!=i.lSite&&null!=i.rSite&&sitesDistance(i.lSite,i.rSite)<lMinDist&&++e}return e}foograph=eval("foograph"),Voronoi=eval("Voronoi");for(var lWidth=pData.width,lHeight=pData.height,lMinDist=pData.minDist,lExpFact=pData.expFact,lMaxExpIt=pData.maxExpIt,lMaxFruchtermanReingoldIterations=pData.maxFruchtermanReingoldIterations,savePositions=function(){pData.width=lWidth,pData.height=lHeight,pData.expIt=expandIteration,pData.expFact=lExpFact,pData.vertices=[];for(var t=0;t<fv.length;++t)pData.vertices.push({id:fv[t].label,x:fv[t].x,y:fv[t].y})},messagePositions=function(){broadcast(pData)},frg=new foograph.Graph("FRgraph",(!1)),frgNodes={},dataVertices=pData.vertices,ni=0;ni<dataVertices.length;++ni){var id=dataVertices[ni].id,v=new foograph.Vertex(id,Math.round(Math.random()*lHeight),Math.round(Math.random()*lHeight));frgNodes[id]=v,frg.insertVertex(v)}for(var dataEdges=pData.edges,ei=0;ei<dataEdges.length;++ei){var srcNodeId=dataEdges[ei].src,tgtNodeId=dataEdges[ei].tgt;frg.insertEdge("",1,frgNodes[srcNodeId],frgNodes[tgtNodeId])}var fv=frg.vertices,iterations=lMaxFruchtermanReingoldIterations,frLayoutManager=new foograph.ForceDirectedVertexLayout(lWidth,lHeight,iterations,(!1),lMinDist);frLayoutManager.callback=function(){savePositions(),messagePositions()},frLayoutManager.layout(frg),savePositions(),messagePositions();for(var voronoi=new Voronoi,bbox={xl:0,xr:lWidth,yt:0,yb:lHeight},vSites=[],i=0;i<fv.length;++i)vSites[fv[i].label]=fv[i];for(var diagram=voronoi.compute(fv,bbox),cells=diagram.cells,i=0;i<cells.length;++i){var cell=cells[i],site=cell.site,centroid=cellCentroid(cell),currv=vSites[site.label];currv.x=centroid.x,currv.y=centroid.y}0>lExpFact&&(lExpFact=Math.max(.05,Math.min(.1,lMinDist/Math.sqrt(lWidth*lHeight/fv.length)*.5)));for(var prevInfractions=checkMinDist(diagram.edges),bStop=0>=prevInfractions,voronoiIteration=0,expandIteration=0;!bStop;){++voronoiIteration;for(var it=0;4>=it;++it){voronoi.recycle(diagram),diagram=voronoi.compute(fv,bbox),cells=diagram.cells;for(var i=0;i<cells.length;++i){var cell=cells[i],site=cell.site,centroid=cellCentroid(cell),currv=vSites[site.label];currv.x=centroid.x,currv.y=centroid.y}}var currInfractions=checkMinDist(diagram.edges);0>=currInfractions?bStop=!0:(currInfractions>=prevInfractions||voronoiIteration>=4)&&(expandIteration>=lMaxExpIt?bStop=!0:(lWidth+=lWidth*lExpFact,lHeight+=lHeight*lExpFact,bbox={xl:0,xr:lWidth,yt:0,yb:lHeight},++expandIteration,voronoiIteration=0)),prevInfractions=currInfractions,savePositions(),messagePositions()}return savePositions(),pData}).then(function(t){var e=t.vertices;setPositions(t);var n=t.startTime,i=new Date;console.info("Layout on "+e.length+" nodes took "+(i-n)+" ms"),layout.one("layoutstop",options.stop),options.animate||layout.trigger("layoutready"),layout.trigger("layoutstop"),t1.stop()})}),this},SpreadLayout.prototype.stop=function(){},$$("layout","spread",SpreadLayout)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={animate:!0,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,random:!1,infinite:!1,ready:void 0,stop:void 0,stiffness:400,repulsion:400,damping:.5};e.prototype.run=function(){var e=this,n=this,i=this.options;return t.util.require("Springy",function(r){function o(t){var e=t.scratch("springy").model.id,n=w.layout.nodePoints[e].p,i=t.position(),r=null!=i.x&&null!=i.y?y(t.position()):{x:4*Math.random()-2,y:4*Math.random()-2};n.x=r.x,n.y=r.y}function a(){n.stopped=!1,i.ungrabifyWhileSimulating&&E.ungrabify(),w.start()}var s=!1,l=i.cy;e.trigger({type:"layoutstart",layout:e});var u=i.eles,c=u.nodes().not(":parent"),h=u.edges(),d=t.util.makeBoundingBox(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()}),p=new r.Graph;c.each(function(t,e){e.scratch("springy",{model:p.newNode({element:e})})}),h.each(function(t,e){var n=e.source().scratch("springy").model,i=e.target().scratch("springy").model;e.scratch("springy",{model:p.newEdge(n,i,{element:e})})});var f=window.sim=new r.Layout.ForceDirected(p,i.stiffness,i.repulsion,i.damping);i.infinite&&(f.minEnergyThreshold=-(1/0));var g=f.getBoundingBox(),v=function(t){g=f.getBoundingBox();var e=g.topright.subtract(g.bottomleft),n=t.subtract(g.bottomleft).divide(e.x).x*d.w+d.x1,i=t.subtract(g.bottomleft).divide(e.y).y*d.h+d.x1;return new r.Vector(n,i)},y=function(t){g=f.getBoundingBox();var e=g.topright.subtract(g.bottomleft),n=(t.x-d.x1)/d.w*e.x+g.bottomleft.x,i=(t.y-d.y1)/d.h*e.y+g.bottomleft.y;return new r.Vector(n,i)},m=l.collection(),x=l.nodes().size(),b=1,w=new r.Renderer(f,function(){n.stopped||m.length>0&&i.animate&&(s=!0,m.rtrigger("position"),i.fit&&l.fit(i.padding),m=l.collection(),s=!1)},function(t,e,n){},function(t,r){if(!n.stopped){var o=v(r),a=t.data.element;a.locked()||a.grabbed()||(a._private.position={x:o.x,y:o.y},m.merge(a)),b==x&&(e.one("layoutready",i.ready),e.trigger({type:"layoutready",layout:e})),b++}});c.each(function(t,e){i.random||o(e)});var _;c.on("position",_=function(){s||o(this)});var E=c.filter(":grabbable");n.stopSystem=function(){n.stopped=!0,p.filterNodes(function(){return!1}),i.ungrabifyWhileSimulating&&E.grabify(),i.fit&&l.fit(i.padding),c.off("drag position",_),e.one("layoutstop",i.stop),e.trigger({type:"layoutstop",layout:e}),n.stopSystem=null},a(),i.infinite||setTimeout(function(){n.stop()},i.maxSimulationTime)}),this},e.prototype.stop=function(){return null!=this.stopSystem&&this.stopSystem(),this},t("layout","springy",e)}(cytoscape),function(t){"use strict";function e(t){this.options=t}e.prototype.recalculateRenderedStyle=function(){},e.prototype.notify=function(){},t("renderer","null",e)}(cytoscape),function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){function i(){}var r=t("./FDLayoutConstants");for(var o in r)i[o]=r[o];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=r.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,e.exports=i},{"./FDLayoutConstants":9}],2:[function(t,e,n){function i(t,e,n){r.call(this,t,e,n)}var r=t("./FDLayoutEdge");i.prototype=Object.create(r.prototype);for(var o in r)i[o]=r[o];e.exports=i},{"./FDLayoutEdge":10}],3:[function(t,e,n){function i(t,e,n){r.call(this,t,e,n)}var r=t("./LGraph");i.prototype=Object.create(r.prototype);for(var o in r)i[o]=r[o];e.exports=i},{"./LGraph":18}],4:[function(t,e,n){function i(t){r.call(this,t)}var r=t("./LGraphManager");i.prototype=Object.create(r.prototype);for(var o in r)i[o]=r[o];e.exports=i},{"./LGraphManager":19}],5:[function(t,e,n){function i(){r.call(this)}var r=t("./FDLayout"),o=t("./CoSEGraphManager"),a=t("./CoSEGraph"),s=t("./CoSENode"),l=t("./CoSEEdge");i.prototype=Object.create(r.prototype);for(var u in r)i[u]=r[u];i.prototype.newGraphManager=function(){var t=new o(this);return this.graphManager=t,t},i.prototype.newGraph=function(t){return new a(null,this.graphManager,t)},i.prototype.newNode=function(t){return new s(this.graphManager,t)},i.prototype.newEdge=function(t){return new l(null,null,t)},i.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.isSubLayout||(layoutOptionsPack.idealEdgeLength<10?this.idealEdgeLength=10:this.idealEdgeLength=layoutOptionsPack.idealEdgeLength,this.useSmartIdealEdgeLengthCalculation=layoutOptionsPack.smartEdgeLengthCalc,this.springConstant=Layout.transform(layoutOptionsPack.springStrength,FDLayoutConstants.DEFAULT_SPRING_STRENGTH,5,5),this.repulsionConstant=Layout.transform(layoutOptionsPack.repulsionStrength,FDLayoutConstants.DEFAULT_REPULSION_STRENGTH,5,5),this.gravityConstant=Layout.transform(layoutOptionsPack.gravityStrength,FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH),this.compoundGravityConstant=Layout.transform(layoutOptionsPack.compoundGravityStrength,FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH),this.gravityRangeFactor=Layout.transform(layoutOptionsPack.gravityRange,FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR),this.compoundGravityRangeFactor=Layout.transform(layoutOptionsPack.compoundGravityRange,FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR))},i.prototype.layout=function(){var t=layoutOptionsPack.createBendsAsNeeded;return t&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},i.prototype.classicLayout=function(){if(this.calculateNodesToApplyGravitationTo(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),!this.incremental){var t=this.getFlatForest();t.length>0?this.positionNodesRadially(t):this.positionNodesRandomly()}return this.initSpringEmbedder(),this.runSpringEmbedder(),console.log("Classic CoSE layout finished after "+this.totalIterations+" iterations"),!0},i.prototype.runSpringEmbedder=function(){var t=(new Date).getTime(),e=25,n=e;do{if(this.totalIterations++,this.totalIterations%FDLayoutConstants.CONVERGENCE_CHECK_PERIOD==0){if(this.isConverged())break;this.coolingFactor=this.initialCoolingFactor*((this.maxIterations-this.totalIterations)/this.maxIterations),n=Math.ceil(e*Math.sqrt(this.coolingFactor))}if(this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(),this.calcGravitationalForces(),this.moveNodes(),this.animate(),layoutOptionsPack.animate&&this.totalIterations%n==0){for(var i=0;i<1e7&&!((new Date).getTime()-t>25);i++);t=(new Date).getTime();for(var r=this.graphManager.getAllNodes(),o={},i=0;i<r.length;i++){var a=r[i].rect,s=r[i].id;o[s]={id:s,x:a.getCenterX(),y:a.getCenterY(),w:a.width,h:a.height}}broadcast({pData:o})}}while(this.totalIterations<this.maxIterations);this.graphManager.updateBounds()},i.prototype.calculateNodesToApplyGravitationTo=function(){var t,e,n=[],i=this.graphManager.getGraphs(),r=i.length;for(e=0;e<r;e++)t=i[e],t.updateConnected(),t.isConnected||(n=n.concat(t.getNodes()));this.graphManager.setAllNodesToApplyGravitation(n)},i.prototype.createBendpoints=function(){var t=[];t=t.concat(this.graphManager.getAllEdges());var e,n=new HashSet;for(e=0;e<t.length;e++){var i=t[e];if(!n.contains(i)){var r=i.getSource(),o=i.getTarget();if(r==o)i.getBendpoints().push(new PointD),i.getBendpoints().push(new PointD),this.createDummyNodesForBendpoints(i),n.add(i);else{var a=[];if(a=a.concat(r.getEdgeListToNode(o)),a=a.concat(o.getEdgeListToNode(r)),!n.contains(a[0])){if(a.length>1){var s;for(s=0;s<a.length;s++){var l=a[s];l.getBendpoints().push(new PointD),this.createDummyNodesForBendpoints(l)}}n.addAll(list)}}}if(n.size()==t.length)break}},i.prototype.positionNodesRadially=function(t){for(var e=new Point(0,0),n=Math.ceil(Math.sqrt(t.length)),r=0,o=0,a=0,s=new PointD(0,0),l=0;l<t.length;l++){l%n==0&&(a=0,o=r,0!=l&&(o+=CoSEConstants.DEFAULT_COMPONENT_SEPERATION),r=0);var u=t[l],c=Layout.findCenterOfTree(u);e.x=a,e.y=o,s=i.radialLayout(u,c,e),s.y>r&&(r=Math.floor(s.y)),a=Math.floor(s.x+CoSEConstants.DEFAULT_COMPONENT_SEPERATION)}this.transform(new PointD(LayoutConstants.WORLD_CENTER_X-s.x/2,LayoutConstants.WORLD_CENTER_Y-s.y/2))},i.radialLayout=function(t,e,n){var r=Math.max(this.maxDiagonalInTree(t),CoSEConstants.DEFAULT_RADIAL_SEPARATION);i.branchRadialLayout(e,null,0,359,0,r);var o=LGraph.calculateBounds(t),a=new Transform;a.setDeviceOrgX(o.getMinX()),a.setDeviceOrgY(o.getMinY()),a.setWorldOrgX(n.x),a.setWorldOrgY(n.y);for(var s=0;s<t.length;s++){var l=t[s];l.transform(a)}var u=new PointD(o.getMaxX(),o.getMaxY());return a.inverseTransformPoint(u)},i.branchRadialLayout=function(t,e,n,r,o,a){var s=(r-n+1)/2;s<0&&(s+=180);var l=(s+n)%360,u=l*IGeometry.TWO_PI/360,c=(Math.cos(u),o*Math.cos(u)),h=o*Math.sin(u);t.setCenter(c,h);var d=[];d=d.concat(t.getEdges());var p=d.length;null!=e&&p--;for(var f,g=0,v=d.length,y=t.getEdgesBetween(e);y.length>1;){var m=y[0];y.splice(0,1);var x=d.indexOf(m);x>=0&&d.splice(x,1),v--,p--}f=null!=e?(d.indexOf(y[0])+1)%v:0;for(var b=Math.abs(r-n)/p,w=f;g!=p;w=++w%v){var _=d[w].getOtherEnd(t);if(_!=e){var E=(n+g*b)%360,T=(E+b)%360;i.branchRadialLayout(_,t,E,T,o+a,a),g++}}},i.maxDiagonalInTree=function(t){for(var e=Integer.MIN_VALUE,n=0;n<t.length;n++){var i=t[n],r=i.getDiagonal();r>e&&(e=r)}return e},i.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},e.exports=i},{"./CoSEEdge":2,"./CoSEGraph":3,"./CoSEGraphManager":4,"./CoSENode":6,"./FDLayout":8}],6:[function(t,e,n){function i(t,e,n,i){r.call(this,t,e,n,i)}var r=t("./FDLayoutNode");i.prototype=Object.create(r.prototype);for(var o in r)i[o]=r[o];i.prototype.move=function(){var t=this.graphManager.getLayout();this.displacementX=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX),this.displacementY=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY),Math.abs(this.displacementX)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementX=t.coolingFactor*t.maxNodeDisplacement*IMath.sign(this.displacementX)),Math.abs(this.displacementY)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementY=t.coolingFactor*t.maxNodeDisplacement*IMath.sign(this.displacementY)),null==this.child?this.moveBy(this.displacementX,this.displacementY):0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),t.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},i.prototype.propogateDisplacementToChildren=function(t,e){for(var n,i=this.getChild().getNodes(),r=0;r<i.length;r++)n=i[r],null==n.getChild()?(n.moveBy(t,e),n.displacementX+=t,n.displacementY+=e):n.propogateDisplacementToChildren(t,e)},i.prototype.setPred1=function(t){this.pred1=t},i.prototype.getPred1=function(){return pred1},i.prototype.getPred2=function(){return pred2},i.prototype.setNext=function(t){this.next=t},i.prototype.getNext=function(){return next},i.prototype.setProcessed=function(t){this.processed=t},i.prototype.isProcessed=function(){return processed},e.exports=i},{"./FDLayoutNode":11}],7:[function(t,e,n){function i(t,e){this.width=0,this.height=0,null!==t&&null!==e&&(this.height=e,this.width=t)}i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(t){this.width=t},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(t){this.height=t},e.exports=i},{}],8:[function(t,e,n){function i(){r.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.springConstant=o.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=o.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=1,this.initialCoolingFactor=1,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}var r=t("./Layout"),o=t("./FDLayoutConstants");i.prototype=Object.create(r.prototype);for(var a in r)i[a]=r[a];i.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.layoutQuality==LayoutConstants.DRAFT_QUALITY?(this.displacementThresholdPerNode+=.3,this.maxIterations*=.8):this.layoutQuality==LayoutConstants.PROOF_QUALITY&&(this.displacementThresholdPerNode-=.3,this.maxIterations*=1.2),this.totalIterations=0,this.notAnimatedIterations=0},i.prototype.calcIdealEdgeLengths=function(){for(var t,e,n,i,r,a,s=this.getGraphManager().getAllEdges(),l=0;l<s.length;l++)t=s[l],t.idealLength=this.idealEdgeLength,t.isInterGraph&&(n=t.getSource(),i=t.getTarget(),r=t.getSourceInLca().getEstimatedSize(),a=t.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(t.idealLength+=r+a-2*LayoutConstants.SIMPLE_NODE_SIZE),e=t.getLca().getInclusionTreeDepth(),t.idealLength+=o.DEFAULT_EDGE_LENGTH*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+i.getInclusionTreeDepth()-2*e))},i.prototype.initSpringEmbedder=function(){this.incremental?(this.coolingFactor=.8,this.initialCoolingFactor=.8,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=1,this.initialCoolingFactor=1,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},i.prototype.calcSpringForces=function(){for(var t,e=this.getAllEdges(),n=0;n<e.length;n++)t=e[n],this.calcSpringForce(t,t.idealLength)},i.prototype.calcRepulsionForces=function(){var t,e,n,i,r=this.getAllNodes();for(t=0;t<r.length;t++)for(n=r[t],e=t+1;e<r.length;e++)i=r[e],n.getOwner()==i.getOwner()&&this.calcRepulsionForce(n,i)},i.prototype.calcGravitationalForces=function(){for(var t,e=this.getAllNodesToApplyGravitation(),n=0;n<e.length;n++)t=e[n],this.calcGravitationalForce(t)},i.prototype.moveNodes=function(){for(var t,e=this.getAllNodes(),n=0;n<e.length;n++)t=e[n],t.move()},i.prototype.calcSpringForce=function(t,e){var n,i,r,o,a=t.getSource(),s=t.getTarget();if(this.uniformLeafNodeSizes&&null==a.getChild()&&null==s.getChild())t.updateLengthSimple();else if(t.updateLength(),t.isOverlapingSourceAndTarget)return;n=t.getLength(),i=this.springConstant*(n-e),r=i*(t.lengthX/n),o=i*(t.lengthY/n),a.springForceX+=r,a.springForceY+=o,s.springForceX-=r,s.springForceY-=o},i.prototype.calcRepulsionForce=function(t,e){var n,i,r,a,s,l,u,c=t.getRect(),h=e.getRect(),d=new Array(2),p=new Array(4);c.intersects(h)?(IGeometry.calcSeparationAmount(c,h,d,o.DEFAULT_EDGE_LENGTH/2),l=d[0],u=d[1]):(this.uniformLeafNodeSizes&&null==t.getChild()&&null==e.getChild()?(n=h.getCenterX()-c.getCenterX(),i=h.getCenterY()-c.getCenterY()):(IGeometry.getIntersection(c,h,p),n=p[2]-p[0],i=p[3]-p[1]),Math.abs(n)<o.MIN_REPULSION_DIST&&(n=IMath.sign(n)*o.MIN_REPULSION_DIST),Math.abs(i)<o.MIN_REPULSION_DIST&&(i=IMath.sign(i)*o.MIN_REPULSION_DIST),r=n*n+i*i,a=Math.sqrt(r),s=this.repulsionConstant/r,l=s*n/a,u=s*i/a),t.repulsionForceX-=l,t.repulsionForceY-=u,e.repulsionForceX+=l,e.repulsionForceY+=u},i.prototype.calcGravitationalForce=function(t){var e,n,i,r,o,a,s,l;e=t.getOwner(),n=(e.getRight()+e.getLeft())/2,i=(e.getTop()+e.getBottom())/2,r=t.getCenterX()-n,o=t.getCenterY()-i,a=Math.abs(r),s=Math.abs(o),t.getOwner()==this.graphManager.getRoot()?(Math.floor(80),l=Math.floor(e.getEstimatedSize()*this.gravityRangeFactor),(a>l||s>l)&&(t.gravitationForceX=-this.gravityConstant*r,t.gravitationForceY=-this.gravityConstant*o)):(l=Math.floor(e.getEstimatedSize()*this.compoundGravityRangeFactor),(a>l||s>l)&&(t.gravitationForceX=-this.gravityConstant*r*this.compoundGravityConstant,t.gravitationForceY=-this.gravityConstant*o*this.compoundGravityConstant))},i.prototype.isConverged=function(){var t,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),t=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,t||e},i.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},i.prototype.calcRepulsionRange=function(){return 0},e.exports=i},{"./FDLayoutConstants":9,"./Layout":22}],9:[function(t,e,n){function i(){}var r=t("./layoutOptionsPack");i.getUserOptions=function(t){null!=t.nodeRepulsion&&(i.DEFAULT_REPULSION_STRENGTH=t.nodeRepulsion),null!=t.idealEdgeLength&&(i.DEFAULT_EDGE_LENGTH=t.idealEdgeLength),null!=t.edgeElasticity&&(i.DEFAULT_SPRING_STRENGTH=t.edgeElasticity),null!=t.nestingFactor&&(i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.nestingFactor),null!=t.gravity&&(i.DEFAULT_GRAVITY_STRENGTH=t.gravity),null!=t.numIter&&(i.MAX_ITERATIONS=t.numIter),r.incremental=!t.randomize,r.animate=t.animate},i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=2,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=i},{"./layoutOptionsPack":31}],10:[function(t,e,n){function i(t,e,n){r.call(this,t,e,n),this.idealLength=o.DEFAULT_EDGE_LENGTH}var r=t("./LEdge"),o=t("./FDLayoutConstants");i.prototype=Object.create(r.prototype);for(var a in r)i[a]=r[a];e.exports=i},{"./FDLayoutConstants":9,"./LEdge":17}],11:[function(t,e,n){function i(t,e,n,i){r.call(this,t,e,n,i),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}var r=t("./LNode");i.prototype=Object.create(r.prototype);for(var o in r)i[o]=r[o];i.prototype.setGridCoordinates=function(t,e,n,i){this.startX=t,this.finishX=e,this.startY=n,this.finishY=i},e.exports=i},{"./LNode":21}],12:[function(t,e,n){function i(){this.map={},this.keys=[]}var r=t("./UniqueIDGeneretor");i.prototype.put=function(t,e){var n=r.createID(t);this.contains(n)||(this.map[n]=e,this.keys.push(t))},i.prototype.contains=function(t){r.createID(t);return null!=this.map[t]},i.prototype.get=function(t){var e=r.createID(t);return this.map[e]},i.prototype.keySet=function(){return this.keys},e.exports=i},{"./UniqueIDGeneretor":29}],13:[function(t,e,n){function i(){this.set={}}var r=t("./UniqueIDGeneretor");i.prototype.add=function(t){var e=r.createID(t);this.contains(e)||(this.set[e]=t)},i.prototype.remove=function(t){delete this.set[r.createID(t)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(t){return this.set[r.createID(t)]==t},i.prototype.isEmpty=function(){return 0===this.size()},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(t){for(var e=Object.keys(this.set),n=e.length,i=0;i<n;i++)t.push(this.set[e[i]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(t){for(var e=t.length,n=0;n<e;n++){var i=t[n];this.add(i)}},e.exports=i},{"./UniqueIDGeneretor":29}],14:[function(t,e,n){function i(){}i.calcSeparationAmount=function(t,e,n,r){if(!t.intersects(e))throw"assert failed";var o=new Array(2);i.decideDirectionsForOverlappingNodes(t,e,o),n[0]=Math.min(t.getRight(),e.getRight())-Math.max(t.x,e.x),n[1]=Math.min(t.getBottom(),e.getBottom())-Math.max(t.y,e.y),t.getX()<=e.getX()&&t.getRight()>=e.getRight()?n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight()):e.getX()<=t.getX()&&e.getRight()>=t.getRight()&&(n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight())),t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()?n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()):e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()&&(n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()));var a=Math.abs((e.getCenterY()-t.getCenterY())/(e.getCenterX()-t.getCenterX()));e.getCenterY()==t.getCenterY()&&e.getCenterX()==t.getCenterX()&&(a=1);var s=a*n[0],l=n[1]/a;n[0]<l?l=n[0]:s=n[1],n[0]=-1*o[0]*(l/2+r),n[1]=-1*o[1]*(s/2+r)},i.decideDirectionsForOverlappingNodes=function(t,e,n){t.getCenterX()<e.getCenterX()?n[0]=-1:n[0]=1,t.getCenterY()<e.getCenterY()?n[1]=-1:n[1]=1},i.getIntersection2=function(t,e,n){var r=t.getCenterX(),o=t.getCenterY(),a=e.getCenterX(),s=e.getCenterY();if(t.intersects(e))return n[0]=r,n[1]=o,n[2]=a,n[3]=s,!0;var l=t.getX(),u=t.getY(),c=t.getRight(),h=t.getX(),d=t.getBottom(),p=t.getRight(),f=t.getWidthHalf(),g=t.getHeightHalf(),v=e.getX(),y=e.getY(),m=e.getRight(),x=e.getX(),b=e.getBottom(),w=e.getRight(),_=e.getWidthHalf(),E=e.getHeightHalf(),T=!1,D=!1;
if(r==a){if(o>s)return n[0]=r,n[1]=u,n[2]=a,n[3]=b,!1;if(o<s)return n[0]=r,n[1]=d,n[2]=a,n[3]=y,!1}else if(o==s){if(r>a)return n[0]=l,n[1]=o,n[2]=m,n[3]=s,!1;if(r<a)return n[0]=c,n[1]=o,n[2]=v,n[3]=s,!1}else{var S,N,C,L,M,P,k=t.height/t.width,I=e.height/e.width,O=(s-o)/(a-r);if(-k==O?r>a?(n[0]=h,n[1]=d,T=!0):(n[0]=c,n[1]=u,T=!0):k==O&&(r>a?(n[0]=l,n[1]=u,T=!0):(n[0]=p,n[1]=d,T=!0)),-I==O?a>r?(n[2]=x,n[3]=b,D=!0):(n[2]=m,n[3]=y,D=!0):I==O&&(a>r?(n[2]=v,n[3]=y,D=!0):(n[2]=w,n[3]=b,D=!0)),T&&D)return!1;if(r>a?o>s?(S=i.getCardinalDirection(k,O,4),N=i.getCardinalDirection(I,O,2)):(S=i.getCardinalDirection(-k,O,3),N=i.getCardinalDirection(-I,O,1)):o>s?(S=i.getCardinalDirection(-k,O,1),N=i.getCardinalDirection(-I,O,3)):(S=i.getCardinalDirection(k,O,2),N=i.getCardinalDirection(I,O,4)),!T)switch(S){case 1:L=u,C=r+-g/O,n[0]=C,n[1]=L;break;case 2:C=p,L=o+f*O,n[0]=C,n[1]=L;break;case 3:L=d,C=r+g/O,n[0]=C,n[1]=L;break;case 4:C=h,L=o+-f*O,n[0]=C,n[1]=L}if(!D)switch(N){case 1:P=y,M=a+-E/O,n[2]=M,n[3]=P;break;case 2:M=w,P=s+_*O,n[2]=M,n[3]=P;break;case 3:P=b,M=a+E/O,n[2]=M,n[3]=P;break;case 4:M=x,P=s+-_*O,n[2]=M,n[3]=P}}return!1},i.getCardinalDirection=function(t,e,n){return t>e?n:1+n%4},i.getIntersection=function(t,e,n,r){if(null==r)return i.getIntersection2(t,e,n);var o,a,s,l,u,c,h,d,p,f=t.x,g=t.y,v=e.x,y=e.y,m=n.x,x=n.y,b=r.x,w=r.y;return s=y-g,u=f-v,h=v*g-f*y,l=w-x,c=m-b,d=b*x-m*w,p=s*c-l*u,0==p?null:(o=(u*d-c*h)/p,a=(l*h-s*d)/p,new Point(o,a))},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,e.exports=i},{}],15:[function(t,e,n){function i(){}i.sign=function(t){return t>0?1:t<0?-1:0},i.floor=function(t){return t<0?Math.ceil(t):Math.floor(t)},i.ceil=function(t){return t<0?Math.floor(t):Math.ceil(t)},e.exports=i},{}],16:[function(t,e,n){function i(){}i.MAX_VALUE=2147483647,i.MIN_VALUE=-2147483648,e.exports=i},{}],17:[function(t,e,n){function i(t,e,n){r.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=t,this.target=e}var r=t("./LGraphObject");i.prototype=Object.create(r.prototype);for(var o in r)i[o]=r[o];i.prototype.getSource=function(){return this.source},i.prototype.getTarget=function(){return this.target},i.prototype.isInterGraph=function(){return this.isInterGraph},i.prototype.getLength=function(){return this.length},i.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},i.prototype.getBendpoints=function(){return this.bendpoints},i.prototype.getLca=function(){return this.lca},i.prototype.getSourceInLca=function(){return this.sourceInLca},i.prototype.getTargetInLca=function(){return this.targetInLca},i.prototype.getOtherEnd=function(t){if(this.source===t)return this.target;if(this.target===t)return this.source;throw"Node is not incident with this edge"},i.prototype.getOtherEndInGraph=function(t,e){for(var n=this.getOtherEnd(t),i=e.getGraphManager().getRoot();;){if(n.getOwner()==e)return n;if(n.getOwner()==i)break;n=n.getOwner().getParent()}return null},i.prototype.updateLength=function(){var t=new Array(4);this.isOverlapingSourceAndTarget=IGeometry.getIntersection(this.target.getRect(),this.source.getRect(),t),this.isOverlapingSourceAndTarget||(this.lengthX=t[0]-t[2],this.lengthY=t[1]-t[3],Math.abs(this.lengthX)<1&&(this.lengthX=IMath.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=IMath.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},i.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=IMath.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=IMath.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=i},{"./LGraphObject":20}],18:[function(t,e,n){function i(t,e,n){r.call(this,n),this.estimatedSize=o.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=t,null!=e&&e instanceof s?this.graphManager=e:null!=e&&e instanceof Layout&&(this.graphManager=e.graphManager)}var r=t("./LGraphObject"),o=t("./Integer"),a=t("./LayoutConstants"),s=t("./LGraphManager"),l=t("./LNode");i.prototype=Object.create(r.prototype);for(var u in r)i[u]=r[u];i.prototype.getNodes=function(){return this.nodes},i.prototype.getEdges=function(){return this.edges},i.prototype.getGraphManager=function(){return this.graphManager},i.prototype.getParent=function(){return this.parent},i.prototype.getLeft=function(){return this.left},i.prototype.getRight=function(){return this.right},i.prototype.getTop=function(){return this.top},i.prototype.getBottom=function(){return this.bottom},i.prototype.isConnected=function(){return this.isConnected},i.prototype.add=function(t,e,n){if(null==e&&null==n){var i=t;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(i)>-1)throw"Node already in graph!";return i.owner=this,this.getNodes().push(i),i}var r=t;if(!(this.getNodes().indexOf(e)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(e.owner!=n.owner||e.owner!=this)throw"Both owners must be this graph!";return e.owner!=n.owner?null:(r.source=e,r.target=n,r.isInterGraph=!1,this.getEdges().push(r),e.edges.push(r),n!=e&&n.edges.push(r),r)},i.prototype.remove=function(t){var e=t;if(t instanceof l){if(null==e)throw"Node is null!";if(null==e.owner||e.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var n,i=e.edges.slice(),r=i.length,o=0;o<r;o++)n=i[o],n.isInterGraph?this.graphManager.remove(n):n.source.owner.remove(n);var a=this.nodes.indexOf(e);if(a==-1)throw"Node not in owner node list!";this.nodes.splice(a,1)}else if(t instanceof LEdge){var n=t;if(null==n)throw"Edge is null!";if(null==n.source||null==n.target)throw"Source and/or target is null!";if(null==n.source.owner||null==n.target.owner||n.source.owner!=this||n.target.owner!=this)throw"Source and/or target owner is invalid!";var s=n.source.edges.indexOf(n),u=n.target.edges.indexOf(n);if(!(s>-1&&u>-1))throw"Source and/or target doesn't know this edge!";n.source.edges.splice(s,1),n.target!=n.source&&n.target.edges.splice(u,1);var a=n.source.owner.getEdges().indexOf(n);if(a==-1)throw"Not in owner's edge list!";n.source.owner.getEdges().splice(a,1)}},i.prototype.updateLeftTop=function(){for(var t,e,n=o.MAX_VALUE,i=o.MAX_VALUE,r=this.getNodes(),a=r.length,s=0;s<a;s++){var l=r[s];t=Math.floor(l.getTop()),e=Math.floor(l.getLeft()),n>t&&(n=t),i>e&&(i=e)}return n==o.MAX_VALUE?null:(this.left=i-this.margin,this.top=n-this.margin,new Point(this.left,this.top))},i.prototype.updateBounds=function(t){for(var e,n,i,r,a=o.MAX_VALUE,s=-o.MAX_VALUE,l=o.MAX_VALUE,u=-o.MAX_VALUE,c=this.nodes,h=c.length,d=0;d<h;d++){var p=c[d];t&&null!=p.child&&p.updateBounds(),e=Math.floor(p.getLeft()),n=Math.floor(p.getRight()),i=Math.floor(p.getTop()),r=Math.floor(p.getBottom()),a>e&&(a=e),s<n&&(s=n),l>i&&(l=i),u<r&&(u=r)}var f=new RectangleD(a,l,s-a,u-l);a==o.MAX_VALUE&&(this.left=Math.floor(this.parent.getLeft()),this.right=Math.floor(this.parent.getRight()),this.top=Math.floor(this.parent.getTop()),this.bottom=Math.floor(this.parent.getBottom())),this.left=f.x-this.margin,this.right=f.x+f.width+this.margin,this.top=f.y-this.margin,this.bottom=f.y+f.height+this.margin},i.calculateBounds=function(t){for(var e,n,i,r,a=o.MAX_VALUE,s=-o.MAX_VALUE,l=o.MAX_VALUE,u=-o.MAX_VALUE,c=t.length,h=0;h<c;h++){var d=t[h];e=Math.floor(d.getLeft()),n=Math.floor(d.getRight()),i=Math.floor(d.getTop()),r=Math.floor(d.getBottom()),a>e&&(a=e),s<n&&(s=n),l>i&&(l=i),u<r&&(u=r)}var p=new RectangleD(a,l,s-a,u-l);return p},i.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},i.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},i.prototype.calcEstimatedSize=function(){for(var t=0,e=this.nodes,n=e.length,i=0;i<n;i++){var r=e[i];t+=r.calcEstimatedSize()}return 0==t?this.estimatedSize=a.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=Math.floor(t/Math.sqrt(this.nodes.length)),Math.floor(this.estimatedSize)},i.prototype.updateConnected=function(){if(0==this.nodes.length)return void(this.isConnected=!0);var t,e,n=[],i=new HashSet,r=this.nodes[0];for(n=n.concat(r.withChildren());n.length>0;){r=n.shift(),i.add(r),t=r.getEdges();for(var o=t.length,a=0;a<o;a++){var s=t[a];e=s.getOtherEndInGraph(r,this),null==e||i.contains(e)||(n=n.concat(e.withChildren()))}}if(this.isConnected=!1,i.size()>=this.nodes.length){var l=0,o=i.size();for(var u in i.set){var c=i.set[u];c.owner==this&&l++}l==this.nodes.length&&(this.isConnected=!0)}},e.exports=i},{"./Integer":16,"./LGraphManager":19,"./LGraphObject":20,"./LNode":21,"./LayoutConstants":23}],19:[function(t,e,n){function i(t){this.layout=t,this.graphs=[],this.edges=[]}i.prototype.addRoot=function(){var t=this.layout.newGraph(),e=this.layout.newNode(null),n=this.add(t,e);return this.setRootGraph(n),this.rootGraph},i.prototype.add=function(t,e,n,i,r){if(null==n&&null==i&&null==r){if(null==t)throw"Graph is null!";if(null==e)throw"Parent node is null!";if(this.graphs.indexOf(t)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(t),null!=t.parent)throw"Already has a parent!";if(null!=e.child)throw"Already has a child!";return t.parent=e,e.child=t,t}r=n,i=e,n=t;var o=i.getOwner(),a=r.getOwner();if(null==o||o.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==a||a.getGraphManager()!=this)throw"Target not in this graph mgr!";if(o==a)return n.isInterGraph=!1,o.add(n,i,r);if(n.isInterGraph=!0,n.source=i,n.target=r,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),null==n.source||null==n.target)throw"Edge source and/or target is null!";if(n.source.edges.indexOf(n)!=-1||n.target.edges.indexOf(n)!=-1)throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},i.prototype.remove=function(t){if(t instanceof LGraph){var e=t;if(e.getGraphManager()!=this)throw"Graph not in this graph mgr";if(e!=this.rootGraph&&(null==e.parent||e.parent.graphManager!=this))throw"Invalid parent node!";var n=[];n=n.concat(e.getEdges());for(var i,r=n.length,o=0;o<r;o++)i=n[o],e.remove(i);var a=[];a=a.concat(e.getNodes());var s;r=a.length;for(var o=0;o<r;o++)s=a[o],e.remove(s);e==this.rootGraph&&this.setRootGraph(null);var l=this.graphs.indexOf(e);this.graphs.splice(l,1),e.parent=null}else if(t instanceof LEdge){if(i=t,null==i)throw"Edge is null!";if(!i.isInterGraph)throw"Not an inter-graph edge!";if(null==i.source||null==i.target)throw"Source and/or target is null!";if(i.source.edges.indexOf(i)==-1||i.target.edges.indexOf(i)==-1)throw"Source and/or target doesn't know this edge!";var l=i.source.edges.indexOf(i);if(i.source.edges.splice(l,1),l=i.target.edges.indexOf(i),i.target.edges.splice(l,1),null==i.source.owner||null==i.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(i.source.owner.getGraphManager().edges.indexOf(i)==-1)throw"Not in owner graph manager's edge list!";var l=i.source.owner.getGraphManager().edges.indexOf(i);i.source.owner.getGraphManager().edges.splice(l,1)}},i.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},i.prototype.getGraphs=function(){return this.graphs},i.prototype.getAllNodes=function(){if(null==this.allNodes){for(var t=[],e=this.getGraphs(),n=e.length,i=0;i<n;i++)t=t.concat(e[i].getNodes());this.allNodes=t}return this.allNodes},i.prototype.resetAllNodes=function(){this.allNodes=null},i.prototype.resetAllEdges=function(){this.allEdges=null},i.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},i.prototype.getAllEdges=function(){if(null==this.allEdges){for(var t=[],e=this.getGraphs(),n=(e.length,0);n<e.length;n++)t=t.concat(e[n].getEdges());t=t.concat(this.edges),this.allEdges=t}return this.allEdges},i.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},i.prototype.setAllNodesToApplyGravitation=function(t){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=t},i.prototype.getRoot=function(){return this.rootGraph},i.prototype.setRootGraph=function(t){if(t.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=t,null==t.parent&&(t.parent=this.layout.newNode("Root node"))},i.prototype.getLayout=function(){return this.layout},i.prototype.isOneAncestorOfOther=function(t,e){if(null==t||null==e)throw"assert failed";if(t==e)return!0;for(var n,i=t.getOwner();;){if(n=i.getParent(),null==n)break;if(n==e)return!0;if(i=n.getOwner(),null==i)break}for(i=e.getOwner();;){if(n=i.getParent(),null==n)break;if(n==t)return!0;if(i=n.getOwner(),null==i)break}return!1},i.prototype.calcLowestCommonAncestors=function(){for(var t,e,n,i,r,o=this.getAllEdges(),a=o.length,s=0;s<a;s++)if(t=o[s],e=t.source,n=t.target,t.lca=null,t.sourceInLca=e,t.targetInLca=n,e!=n){for(i=e.getOwner();null==t.lca;){for(r=n.getOwner();null==t.lca;){if(r==i){t.lca=r;break}if(r==this.rootGraph)break;if(null!=t.lca)throw"assert failed";t.targetInLca=r.getParent(),r=t.targetInLca.getOwner()}if(i==this.rootGraph)break;null==t.lca&&(t.sourceInLca=i.getParent(),i=t.sourceInLca.getOwner())}if(null==t.lca)throw"assert failed"}else t.lca=e.getOwner()},i.prototype.calcLowestCommonAncestor=function(t,e){if(t==e)return t.getOwner();for(var n=t.getOwner();;){if(null==n)break;for(var i=e.getOwner();;){if(null==i)break;if(i==n)return i;i=i.getParent().getOwner()}n=n.getParent().getOwner()}return n},i.prototype.calcInclusionTreeDepths=function(t,e){null==t&&null==e&&(t=this.rootGraph,e=1);for(var n,i=t.getNodes(),r=i.length,o=0;o<r;o++)n=i[o],n.inclusionTreeDepth=e,null!=n.child&&this.calcInclusionTreeDepths(n.child,e+1)},i.prototype.includesInvalidEdge=function(){for(var t,e=this.edges.length,n=0;n<e;n++)if(t=this.edges[n],this.isOneAncestorOfOther(t.source,t.target))return!0;return!1},e.exports=i},{}],20:[function(t,e,n){function i(t){this.vGraphObject=t}e.exports=i},{}],21:[function(t,e,n){function i(t,e,n,i){null==n&&null==i&&(i=e),r.call(this,i),null!=t.graphManager&&(t=t.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=i,this.edges=[],this.graphManager=t,null!=n&&null!=e?this.rect=new a(e.x,e.y,n.width,n.height):this.rect=new a}var r=t("./LGraphObject"),o=t("./Integer"),a=t("./RectangleD");i.prototype=Object.create(r.prototype);for(var s in r)i[s]=r[s];i.prototype.getEdges=function(){return this.edges},i.prototype.getChild=function(){return this.child},i.prototype.getOwner=function(){if(null!=this.owner&&!(null==this.owner||this.owner.getNodes().indexOf(this)>-1))throw"assert failed";return this.owner},i.prototype.getWidth=function(){return this.rect.width},i.prototype.setWidth=function(t){this.rect.width=t},i.prototype.getHeight=function(){return this.rect.height},i.prototype.setHeight=function(t){this.rect.height=t},i.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},i.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},i.prototype.getCenter=function(){return new PointD(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},i.prototype.getLocation=function(){return new PointD(this.rect.x,this.rect.y)},i.prototype.getRect=function(){return this.rect},i.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},i.prototype.setRect=function(t,e){this.rect.x=t.x,this.rect.y=t.y,this.rect.width=e.width,this.rect.height=e.height},i.prototype.setCenter=function(t,e){this.rect.x=t-this.rect.width/2,this.rect.y=e-this.rect.height/2},i.prototype.setLocation=function(t,e){this.rect.x=t,this.rect.y=e},i.prototype.moveBy=function(t,e){this.rect.x+=t,this.rect.y+=e},i.prototype.getEdgeListToNode=function(t){var e,n=[];for(var i in this.edges)if(e=i,e.target==t){if(e.source!=this)throw"Incorrect edge source!";n.push(e)}return n},i.prototype.getEdgesBetween=function(t){var e,n=[];for(var i in this.edges){if(e=this.edges[i],e.source!=this&&e.target!=this)throw"Incorrect edge source and/or target";e.target!=t&&e.source!=t||n.push(e)}return n},i.prototype.getNeighborsList=function(){var t,e=new HashSet;for(var n in this.edges)if(t=this.edges[n],t.source==this)e.add(t.target);else{if(!t.target==this)throw"Incorrect incidency!";e.add(t.source)}return e},i.prototype.withChildren=function(){var t,e=[];if(e.push(this),null!=this.child)for(var n=this.child.getNodes(),i=0;i<n.length;i++)t=n[i],e=e.concat(t.withChildren());return e},i.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},i.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=Math.floor((this.rect.width+this.rect.height)/2):(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},i.prototype.scatter=function(){var t,e,n=-LayoutConstants.INITIAL_WORLD_BOUNDARY,i=LayoutConstants.INITIAL_WORLD_BOUNDARY;t=LayoutConstants.WORLD_CENTER_X+RandomSeed.nextDouble()*(i-n)+n;var r=-LayoutConstants.INITIAL_WORLD_BOUNDARY,o=LayoutConstants.INITIAL_WORLD_BOUNDARY;e=LayoutConstants.WORLD_CENTER_Y+RandomSeed.nextDouble()*(o-r)+r,this.rect.x=t,this.rect.y=e},i.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var t=this.getChild();t.updateBounds(!0),this.rect.x=t.getLeft(),this.rect.y=t.getTop(),this.setWidth(t.getRight()-t.getLeft()+2*LayoutConstants.COMPOUND_NODE_MARGIN),this.setHeight(t.getBottom()-t.getTop()+2*LayoutConstants.COMPOUND_NODE_MARGIN+LayoutConstants.LABEL_HEIGHT)}},i.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},i.prototype.transform=function(t){var e=this.rect.x;e>LayoutConstants.WORLD_BOUNDARY?e=LayoutConstants.WORLD_BOUNDARY:e<-LayoutConstants.WORLD_BOUNDARY&&(e=-LayoutConstants.WORLD_BOUNDARY);var n=this.rect.y;n>LayoutConstants.WORLD_BOUNDARY?n=LayoutConstants.WORLD_BOUNDARY:n<-LayoutConstants.WORLD_BOUNDARY&&(n=-LayoutConstants.WORLD_BOUNDARY);var i=new PointD(e,n),r=t.inverseTransformPoint(i);this.setLocation(r.x,r.y)},i.prototype.getLeft=function(){return this.rect.x},i.prototype.getRight=function(){return this.rect.x+this.rect.width},i.prototype.getTop=function(){return this.rect.y},i.prototype.getBottom=function(){return this.rect.y+this.rect.height},i.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=i},{"./Integer":16,"./LGraphObject":20,"./RectangleD":27}],22:[function(t,e,n){function i(t){this.layoutQuality=r.DEFAULT_QUALITY,this.createBendsAsNeeded=r.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=r.DEFAULT_INCREMENTAL,this.animationOnLayout=r.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=r.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=r.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=r.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new o,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=t&&(this.isRemoteUse=t)}var r=t("./LayoutConstants"),o=t("./HashMap"),a=t("./LGraphManager");i.RANDOM_SEED=1,i.prototype.getGraphManager=function(){return this.graphManager},i.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},i.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},i.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},i.prototype.newGraphManager=function(){var t=new a(this);return this.graphManager=t,t},i.prototype.newGraph=function(t){return new LGraph(null,this.graphManager,t)},i.prototype.newNode=function(t){return new LNode(this.graphManager,t)},i.prototype.newEdge=function(t){return new LEdge(null,null,t)},i.prototype.runLayout=function(){this.isLayoutFinished=!1,this.initParameters();var t;if(null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge())t=!1;else{var e=0;if(this.isSubLayout||(e=(new Date).getTime()),t=this.layout(),!this.isSubLayout){var n=(new Date).getTime(),i=n-e;console.log("Total execution time: "+i+" miliseconds.")}}return t&&(this.isSubLayout||this.doPostLayout()),this.isLayoutFinished=!0,t},i.prototype.doPostLayout=function(){this.transform(),this.update()},i.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var t,e=this.graphManager.getAllEdges(),n=0;n<e.length;n++)t=e[n];for(var i,r=this.graphManager.getRoot().getNodes(),n=0;n<r.length;n++)i=r[n];this.update(this.graphManager.getRoot())}},i.prototype.update=function(t){if(null==t)this.update2();else if(t instanceof LNode){var e=t;if(null!=e.getChild())for(var n=e.getChild().getNodes(),i=0;i<n.length;i++)update(n[i]);if(null!=e.vGraphObject){var r=e.vGraphObject;r.update(e)}}else if(t instanceof LEdge){var o=t;if(null!=o.vGraphObject){var a=o.vGraphObject;a.update(o)}}else if(t instanceof LGraph){var s=t;if(null!=s.vGraphObject){var l=s.vGraphObject;l.update(s)}}},i.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=layoutOptionsPack.layoutQuality,this.animationDuringLayout=layoutOptionsPack.animationDuringLayout,this.animationPeriod=Math.floor(i.transform(layoutOptionsPack.animationPeriod,r.DEFAULT_ANIMATION_PERIOD)),this.animationOnLayout=layoutOptionsPack.animationOnLayout,this.incremental=layoutOptionsPack.incremental,this.createBendsAsNeeded=layoutOptionsPack.createBendsAsNeeded,this.uniformLeafNodeSizes=layoutOptionsPack.uniformLeafNodeSizes),this.animationDuringLayout&&(animationOnLayout=!1)},i.prototype.transform=function(t){if(void 0==t)this.transform(new PointD(0,0));else{var e=new Transform,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){e.setWorldOrgX(t.x),e.setWorldOrgY(t.y),e.setDeviceOrgX(n.x),e.setDeviceOrgY(n.y);for(var i,r=this.getAllNodes(),o=0;o<r.length;o++)i=r[o],i.transform(e)}}},i.prototype.positionNodesRandomly=function(t){if(void 0==t)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var e,n,i=t.getNodes(),r=0;r<i.length;r++)e=i[r],n=e.getChild(),null==n?e.scatter():0==n.getNodes().length?e.scatter():(this.positionNodesRandomly(n),e.updateBounds())},i.prototype.getFlatForest=function(){for(var t=[],e=!0,n=this.graphManager.getRoot().getNodes(),i=!0,r=0;r<n.length;r++)null!=n[r].getChild()&&(i=!1);if(!i)return t;var a=new HashSet,s=[],l=new o,u=[];for(u=u.concat(n);u.length>0&&e;){for(s.push(u[0]);s.length>0&&e;){var c=s[0];s.splice(0,1),a.add(c);for(var h=c.getEdges(),r=0;r<h.length;r++){var d=h[r].getOtherEnd(c);if(l.get(c)!=d){if(a.contains(d)){e=!1;break}s.push(d),l.put(d,c)}}}if(e){var p=[];a.addAllTo(p),t.push(p);for(var r=0;r<p.length;r++){var f=p[r],g=u.indexOf(f);g>-1&&u.splice(g,1)}a=new HashSet,l=new o}else t=[]}return t},i.prototype.createDummyNodesForBendpoints=function(t){for(var e=[],n=t.source,i=this.graphManager.calcLowestCommonAncestor(t.source,t.target),r=0;r<t.bendpoints.length;r++){var o=this.newNode(null);o.setRect(new Point(0,0),new Dimension(1,1)),i.add(o);var a=this.newEdge(null);this.graphManager.add(a,n,o),e.add(o),n=o}var a=this.newEdge(null);return this.graphManager.add(a,n,t.target),this.edgeToDummyNodes.put(t,e),t.isInterGraph()?this.graphManager.remove(t):i.remove(t),e},i.prototype.createBendpointsFromDummyNodes=function(){var t=[];t=t.concat(this.graphManager.getAllEdges()),t=this.edgeToDummyNodes.keySet().concat(t);for(var e=0;e<t.length;e++){var n=t[e];if(n.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(n),r=0;r<i.length;r++){var o=i[r],a=new PointD(o.getCenterX(),o.getCenterY()),s=n.bendpoints.get(r);s.x=a.x,s.y=a.y,o.getOwner().remove(o)}this.graphManager.add(n,n.source,n.target)}}},i.transform=function(t,e,n,i){if(void 0!=n&&void 0!=i){var r=e;if(t<=50){var o=e/n;r-=(e-o)/50*(50-t)}else{var a=e*i;r+=(a-e)/50*(t-50)}return r}var s,l;return t<=50?(s=9*e/500,l=e/10):(s=9*e/50,l=-8*e),s*t+l},i.findCenterOfTree=function(t){var e=[];e=e.concat(t);var n=[],i=new o,r=!1,a=null;1!=e.length&&2!=e.length||(r=!0,a=e[0]);for(var s=0;s<e.length;s++){var l=e[s],u=l.getNeighborsList().size();i.put(l,l.getNeighborsList().size()),1==u&&n.push(l)}var c=[];for(c=c.concat(n);!r;){var h=[];h=h.concat(c),c=[];for(var s=0;s<e.length;s++){var l=e[s],d=e.indexOf(l);d>=0&&e.splice(d,1);var p=l.getNeighborsList();for(var f in p.set){var g=p.set[f];if(n.indexOf(g)<0){var v=i.get(g),y=v-1;1==y&&c.push(g),i.put(g,y)}}}n=n.concat(c),1!=e.length&&2!=e.length||(r=!0,a=e[0])}return a},i.prototype.setGraphManager=function(t){this.graphManager=t},e.exports=i},{"./HashMap":12,"./LGraphManager":19,"./LayoutConstants":23}],23:[function(t,e,n){function i(){}i.PROOF_QUALITY=0,i.DEFAULT_QUALITY=1,i.DRAFT_QUALITY=2,i.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,i.DEFAULT_INCREMENTAL=!1,i.DEFAULT_ANIMATION_ON_LAYOUT=!0,i.DEFAULT_ANIMATION_DURING_LAYOUT=!1,i.DEFAULT_ANIMATION_PERIOD=50,i.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,i.DEFAULT_GRAPH_MARGIN=10,i.LABEL_HEIGHT=20,i.COMPOUND_NODE_MARGIN=5,i.SIMPLE_NODE_SIZE=40,i.SIMPLE_NODE_HALF_SIZE=i.SIMPLE_NODE_SIZE/2,i.EMPTY_COMPOUND_NODE_SIZE=40,i.MIN_EDGE_LENGTH=1,i.WORLD_BOUNDARY=1e6,i.INITIAL_WORLD_BOUNDARY=i.WORLD_BOUNDARY/1e3,i.WORLD_CENTER_X=1200,i.WORLD_CENTER_Y=900,e.exports=i},{}],24:[function(t,e,n){function i(t,e,n){this.x=null,this.y=null,null==t&&null==e&&null==n?(this.x=0,this.y=0):"number"==typeof t&&"number"==typeof e&&null==n?(this.x=t,this.y=e):"Point"==t.constructor.name&&null==e&&null==n&&(n=t,this.x=n.x,this.y=n.y)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.getLocation=function(){return new i(this.x,this.y)},i.prototype.setLocation=function(t,e,n){"Point"==t.constructor.name&&null==e&&null==n?(n=t,this.setLocation(n.x,n.y)):"number"==typeof t&&"number"==typeof e&&null==n&&(parseInt(t)==t&&parseInt(e)==e?this.move(t,e):(this.x=Math.floor(t+.5),this.y=Math.floor(e+.5)))},i.prototype.move=function(t,e){this.x=t,this.y=e},i.prototype.translate=function(t,e){this.x+=t,this.y+=e},i.prototype.equals=function(t){if("Point"==t.constructor.name){var e=t;return this.x==e.x&&this.y==e.y}return this==t},i.prototype.toString=function(){return(new i).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=i},{}],25:[function(t,e,n){function i(t,e){null==t&&null==e?(this.x=0,this.y=0):(this.x=t,this.y=e)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.setX=function(t){this.x=t},i.prototype.setY=function(t){this.y=t},i.prototype.getDifference=function(t){return new DimensionD(this.x-t.x,this.y-t.y)},i.prototype.getCopy=function(){return new i(this.x,this.y)},i.prototype.translate=function(t){return this.x+=t.width,this.y+=t.height,this},e.exports=i},{}],26:[function(t,e,n){function i(){}i.seed=1,i.x=0,i.nextDouble=function(){return i.x=1e4*Math.sin(i.seed++),i.x-Math.floor(i.x)},e.exports=i},{}],27:[function(t,e,n){function i(t,e,n,i){this.x=0,this.y=0,this.width=0,this.height=0,null!=t&&null!=e&&null!=n&&null!=i&&(this.x=t,this.y=e,this.width=n,this.height=i)}i.prototype.getX=function(){return this.x},i.prototype.setX=function(t){this.x=t},i.prototype.getY=function(){return this.y},i.prototype.setY=function(t){this.y=t},i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(t){this.width=t},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(t){this.height=t},i.prototype.getRight=function(){return this.x+this.width},i.prototype.getBottom=function(){return this.y+this.height},i.prototype.intersects=function(t){return!(this.getRight()<t.x)&&(!(this.getBottom()<t.y)&&(!(t.getRight()<this.x)&&!(t.getBottom()<this.y)))},i.prototype.getCenterX=function(){return this.x+this.width/2},i.prototype.getMinX=function(){return this.getX()},i.prototype.getMaxX=function(){return this.getX()+this.width},i.prototype.getCenterY=function(){return this.y+this.height/2},i.prototype.getMinY=function(){return this.getY()},i.prototype.getMaxY=function(){return this.getY()+this.height},i.prototype.getWidthHalf=function(){return this.width/2},i.prototype.getHeightHalf=function(){return this.height/2},e.exports=i},{}],28:[function(t,e,n){function i(t,e){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(t){this.lworldOrgX=t},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(t){this.lworldOrgY=t},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(t){this.lworldExtX=t},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(t){this.lworldExtY=t},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(t){this.ldeviceOrgX=t},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(t){this.ldeviceOrgY=t},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(t){this.ldeviceExtX=t},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(t){this.ldeviceExtY=t},i.prototype.transformX=function(t){var e=0,n=this.lworldExtX;return 0!=n&&(e=this.ldeviceOrgX+(t-this.lworldOrgX)*this.ldeviceExtX/n),e},i.prototype.transformY=function(t){var e=0,n=this.lworldExtY;return 0!=n&&(e=this.ldeviceOrgY+(t-this.lworldOrgY)*this.ldeviceExtY/n),e},i.prototype.inverseTransformX=function(t){var e=0,n=this.ldeviceExtX;return 0!=n&&(e=this.lworldOrgX+(t-this.ldeviceOrgX)*this.lworldExtX/n),e},i.prototype.inverseTransformY=function(t){var e=0,n=this.ldeviceExtY;return 0!=n&&(e=this.lworldOrgY+(t-this.ldeviceOrgY)*this.lworldExtY/n),e},i.prototype.inverseTransformPoint=function(t){var e=new PointD(this.inverseTransformX(t.x),this.inverseTransformY(t.y));return e},e.exports=i},{}],29:[function(t,e,n){function i(){}i.lastID=0,i.createID=function(t){return i.isPrimitive(t)?t:null!=t.uniqueID?t.uniqueID:(t.uniqueID=i.getString(),i.lastID++,t.uniqueID)},i.getString=function(t){return null==t&&(t=i.lastID),"Object#"+t},i.isPrimitive=function(t){var e=typeof t;return null==t||"object"!=e&&"function"!=e},e.exports=i},{}],30:[function(t,e,n){"use strict";function i(){B.layoutQuality=B.defaultLayoutQuality,B.animationDuringLayout=B.defaultAnimationDuringLayout,B.animationOnLayout=B.defaultAnimationOnLayout,B.animationPeriod=B.defaultAnimationPeriod,B.incremental=B.defaultIncremental,B.createBendsAsNeeded=B.defaultCreateBendsAsNeeded,B.uniformLeafNodeSizes=B.defaultUniformLeafNodeSizes}function r(){B.defaultIdealEdgeLength=P.DEFAULT_EDGE_LENGTH,B.defaultSpringStrength=50,B.defaultRepulsionStrength=50,B.defaultSmartRepulsionRangeCalc=P.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,B.defaultGravityStrength=50,B.defaultGravityRange=50,B.defaultCompoundGravityStrength=50,B.defaultCompoundGravityRange=50,B.defaultSmartEdgeLengthCalc=P.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,B.defaultMultiLevelScaling=P.DEFAULT_USE_MULTI_LEVEL_SCALING,B.idealEdgeLength=B.defaultIdealEdgeLength,B.springStrength=B.defaultSpringStrength,B.repulsionStrength=B.defaultRepulsionStrength,B.smartRepulsionRangeCalc=B.defaultSmartRepulsionRangeCalc,B.gravityStrength=B.defaultGravityStrength,B.gravityRange=B.defaultGravityRange,B.compoundGravityStrength=B.defaultCompoundGravityStrength,
B.compoundGravityRange=B.defaultCompoundGravityRange,B.smartEdgeLengthCalc=B.defaultSmartEdgeLengthCalc,B.multiLevelScaling=B.defaultMultiLevelScaling}function o(t,e){var n={};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];return n}function a(t){this.options=o(F,t),C.getUserOptions(this.options),r()}var s,l=t("./DimensionD"),u=t("./HashMap"),c=t("./HashSet"),h=t("./IGeometry"),d=t("./IMath"),p=t("./Integer"),f=t("./Point"),g=t("./PointD"),v=t("./RandomSeed"),y=t("./RectangleD"),m=t("./Transform"),x=t("./UniqueIDGeneretor"),b=t("./LGraphObject"),w=t("./LGraph"),_=t("./LEdge"),E=t("./LGraphManager"),T=t("./LNode"),D=t("./Layout"),S=t("./LayoutConstants"),N=t("./FDLayout"),C=t("./FDLayoutConstants"),L=t("./FDLayoutEdge"),M=t("./FDLayoutNode"),P=t("./CoSEConstants"),k=t("./CoSEEdge"),I=t("./CoSEGraph"),O=t("./CoSEGraphManager"),A=t("./CoSELayout"),R=t("./CoSENode"),B=t("./layoutOptionsPack");B.layoutQuality,B.animationDuringLayout,B.animationOnLayout,B.animationPeriod,B.incremental,B.createBendsAsNeeded,B.uniformLeafNodeSizes,B.defaultLayoutQuality=S.DEFAULT_QUALITY,B.defaultAnimationDuringLayout=S.DEFAULT_ANIMATION_DURING_LAYOUT,B.defaultAnimationOnLayout=S.DEFAULT_ANIMATION_ON_LAYOUT,B.defaultAnimationPeriod=50,B.defaultIncremental=S.DEFAULT_INCREMENTAL,B.defaultCreateBendsAsNeeded=S.DEFAULT_CREATE_BENDS_AS_NEEDED,B.defaultUniformLeafNodeSizes=S.DEFAULT_UNIFORM_LEAF_NODE_SIZES,i(),a.idToLNode={},a.toBeTiled={};var F={ready:function(){},stop:function(){},fit:!0,padding:10,randomize:!1,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.4,numIter:2500,tile:!0,animate:!0};a.layout=new A,a.prototype.run=function(){var t=this;a.idToLNode={},a.toBeTiled={},a.layout=new A,this.cy=this.options.cy;var e=this;this.cy.trigger("layoutstart");var n=a.layout.newGraphManager();this.gm=n;var i=this.options.eles.nodes(),r=this.options.eles.edges();if(this.root=n.addRoot(),this.options.tile)var o=this.groupZeroDegreeMembers(),F=this.clearCompounds(this.options),z=this.clearZeroDegreeMembers(o);else this.processChildrenList(this.root,i.orphans());for(var q=0;q<r.length;q++){var j=r[q],X=a.idToLNode[j.data("source")],Y=a.idToLNode[j.data("target")],V=n.add(a.layout.newEdge(),X,Y);V.id=j.id()}var G=t.thread;G&&!G.stopped()||(G=t.thread=s(),G.require(l,"DimensionD"),G.require(u,"HashMap"),G.require(c,"HashSet"),G.require(h,"IGeometry"),G.require(d,"IMath"),G.require(p,"Integer"),G.require(f,"Point"),G.require(g,"PointD"),G.require(v,"RandomSeed"),G.require(y,"RectangleD"),G.require(m,"Transform"),G.require(x,"UniqueIDGeneretor"),G.require(b,"LGraphObject"),G.require(w,"LGraph"),G.require(_,"LEdge"),G.require(E,"LGraphManager"),G.require(T,"LNode"),G.require(D,"Layout"),G.require(S,"LayoutConstants"),G.require(B,"layoutOptionsPack"),G.require(N,"FDLayout"),G.require(C,"FDLayoutConstants"),G.require(L,"FDLayoutEdge"),G.require(M,"FDLayoutNode"),G.require(P,"CoSEConstants"),G.require(k,"CoSEEdge"),G.require(I,"CoSEGraph"),G.require(O,"CoSEGraphManager"),G.require(A,"CoSELayout"),G.require(R,"CoSENode"));for(var i=this.options.eles.nodes(),r=this.options.eles.edges(),U={nodes:[],edges:[]},W=n.getAllNodes(),q=0;q<W.length;q++){var H=W[q],$=H.id,Z=this.options.cy.getElementById($),K=Z.data("parent"),Q=H.rect.width,J=H.rect.x,tt=H.rect.y,et=H.rect.height,nt=Z.data("dummy_parent_id");U.nodes.push({id:$,pid:K,x:J,y:tt,width:Q,height:et,dummy_parent_id:nt})}for(var it=n.getAllEdges(),q=0;q<it.length;q++){var rt=it[q],ot=rt.id,at=this.options.cy.getElementById(ot),st=at.source().id(),lt=at.target().id();U.edges.push({id:ot,source:st,target:lt})}var ut=!1;return G.pass(U).run(function(t){var e=function(t){broadcast({log:t})};e("start thread");var n=new A,i=n.newGraphManager(),r=i.layout.newGraph(),o=i.layout.newNode(null),a=i.add(r,o);a.graphManager=i,i.setRootGraph(a);for(var s=i.rootGraph,u=[],c={},h={},d={},p=function(t,e){for(var r=e.length,o=0;o<r;o++){var a,s=e[o],u=h[s.id];if(a=null!=s.width&&null!=s.height?t.add(new R(i,new g(s.x,s.y),new l(parseFloat(s.width),parseFloat(s.height)))):t.add(new R(i)),a.id=s.id,c[s.id]=a,isNaN(a.rect.x)&&(a.rect.x=0),isNaN(a.rect.y)&&(a.rect.y=0),null!=u&&u.length>0){var d;d=n.getGraphManager().add(n.newGraph(),a),d.graphManager=i,p(d,u)}}},f=t.nodes,y=0;y<f.length;y++){var m=f[y],x=m.pid;null!=x?(null==h[x]&&(h[x]=[]),h[x].push(m)):u.push(m)}p(s,u);for(var b=t.edges,y=0;y<b.length;y++){var w=b[y],_=c[w.source],E=c[w.target];i.add(n.newEdge(),_,E)}n.runLayout();for(var T in c){var D=c[T],S=D.rect;d[T]={id:T,x:S.x,y:S.y,w:S.width,h:S.height}}var N={};N.rsSeed=v.seed,N.rsX=v.x;var C={result:d,seeds:N};return C}).then(function(t){var n=t.result,i=t.seeds;v.seed=i.rsSeed,v.x=i.rsX;for(var r in n){var o=a.idToLNode[r],s=n[r];o.rect.x=s.x,o.rect.y=s.y,o.rect.width=s.w,o.rect.height=s.h}e.options.tile&&(e.repopulateZeroDegreeMembers(z),e.repopulateCompounds(F),e.options.eles.nodes().updateCompoundBounds()),e.options.eles.nodes().positions(function(t,e){var n=e.data("id"),i=a.idToLNode[n];return{x:i.getRect().getCenterX(),y:i.getRect().getCenterY()}}),e.options.fit&&e.options.cy.fit(e.options.eles.nodes(),e.options.padding),ut||(e.cy.one("layoutready",e.options.ready),e.cy.trigger("layoutready")),e.cy.one("layoutstop",e.options.stop),e.cy.trigger("layoutstop"),G.stop(),e.options.eles.nodes().removeData("dummy_parent_id")}),G.on("message",function(t){var n=t.message.log;if(null!=n)return void console.log("Thread log: "+n);var i=t.message.pData;return null!=i?(e.options.eles.nodes().positions(function(t,e){if(e.data("dummy_parent_id"))return{x:i[e.data("dummy_parent_id")].x,y:i[e.data("dummy_parent_id")].y};for(var n=e.data("id"),r=i[n],o=this;null==r;)o=o.parent()[0],r=i[o.id()],i[n]=r;return{x:r.x,y:r.y}}),e.options.fit&&e.options.cy.fit(e.options.eles.nodes(),e.options.padding),void(ut||(ut=!0,e.one("layoutready",e.options.ready),e.trigger({type:"layoutready",layout:e})))):void 0}),this},a.prototype.getToBeTiled=function(t){var e=t.data("id");if(null!=a.toBeTiled[e])return a.toBeTiled[e];var n=t.children();if(null==n||0==n.length)return a.toBeTiled[e]=!1,!1;for(var i=0;i<n.length;i++){var r=n[i];if(this.getNodeDegree(r)>0)return a.toBeTiled[e]=!1,!1;if(null!=r.children()&&0!=r.children().length){if(!this.getToBeTiled(r))return a.toBeTiled[e]=!1,!1}else a.toBeTiled[r.data("id")]=!1}return a.toBeTiled[e]=!0,!0},a.prototype.getNodeDegree=function(t){var e=t.id(),n=this.options.eles.edges().filter(function(t,n){var i=n.data("source"),r=n.data("target");if(i!=r&&(i==e||r==e))return!0});return n.length},a.prototype.getNodeDegreeWithChildren=function(t){for(var e=this.getNodeDegree(t),n=t.children(),i=0;i<n.length;i++){var r=n[i];e+=this.getNodeDegreeWithChildren(r)}return e},a.prototype.groupZeroDegreeMembers=function(){for(var t=[],e=[],n=this,i=this.options.eles.nodes().filter(function(t,e){return 0==n.getNodeDegreeWithChildren(e)&&(0==e.parent().length||e.parent().length>0&&!n.getToBeTiled(e.parent()[0]))}),r=0;r<i.length;r++){var o=i[r],a=o.parent().id();"undefined"==typeof t[a]&&(t[a]=[]),t[a]=t[a].concat(o)}for(var a in t)if(t[a].length>1){var s="DummyCompound_"+a;if(e[s]=t[a],this.options.cy.getElementById(s).empty()){this.options.cy.add({group:"nodes",data:{id:s,parent:a}});var l=this.options.cy.nodes()[this.options.cy.nodes().length-1];this.options.eles=this.options.eles.union(l),l.hide();for(var r=0;r<t[a].length;r++){0==r&&l.data("tempchildren",[]);var o=t[a][r];o.data("dummy_parent_id",s),this.options.cy.add({group:"nodes",data:{parent:s,width:o.width(),height:o.height()}});var u=this.options.cy.nodes()[this.options.cy.nodes().length-1];u.hide(),u.css("width",u.data("width")),u.css("height",u.data("height")),u.width(),l.data("tempchildren").push(u)}}}return e},a.prototype.performDFSOnCompounds=function(t){var e=[],n=this.options.eles.nodes().orphans();return this.fillCompexOrderByDFS(e,n),e},a.prototype.fillCompexOrderByDFS=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];this.fillCompexOrderByDFS(t,i.children()),this.getToBeTiled(i)&&t.push(i)}},a.prototype.clearCompounds=function(t){var e=[],n=this.performDFSOnCompounds(t);a.compoundOrder=n,this.processChildrenList(this.root,this.options.eles.nodes().orphans());for(var i=0;i<n.length;i++){var r=a.idToLNode[n[i].id()];e[n[i].id()]=n[i].children(),r.child=null}var o=this.tileCompoundMembers(e);return o},a.prototype.clearZeroDegreeMembers=function(t){var e=[];for(var n in t){var i=a.idToLNode[n];e[n]=this.tileNodes(t[n]),i.rect.width=e[n].width,i.rect.height=e[n].height}return e},a.prototype.repopulateCompounds=function(t){for(var e=a.compoundOrder.length-1;e>=0;e--){var n=a.compoundOrder[e].id(),i=a.idToLNode[n];this.adjustLocations(t[n],i.rect.x,i.rect.y)}},a.prototype.repopulateZeroDegreeMembers=function(t){for(var e in t){var n=this.cy.getElementById(e),i=a.idToLNode[e];this.adjustLocations(t[e],i.rect.x,i.rect.y);for(var r=n.data("tempchildren"),e=0;e<r.length;e++)r[e].remove();n.remove()}},a.prototype.adjustLocations=function(t,e,n){e+=t.compoundMargin,n+=t.compoundMargin;for(var i=e,r=0;r<t.rows.length;r++){var o=t.rows[r];e=i;for(var a=0,s=0;s<o.length;s++){var l=o[s],u=this.cy.getElementById(l.id);u.position({x:e+l.rect.width/2,y:n+l.rect.height/2}),l.rect.x=e,l.rect.y=n,e+=l.rect.width+t.horizontalPadding,l.rect.height>a&&(a=l.rect.height)}n+=a+t.verticalPadding}},a.prototype.tileCompoundMembers=function(t){var e=[];for(var n in t){var i=a.idToLNode[n];e[n]=this.tileNodes(t[n]),i.rect.width=e[n].width+20,i.rect.height=e[n].height+20}return e},a.prototype.tileNodes=function(t){for(var e={rows:[],rowWidth:[],rowHeight:[],compoundMargin:10,width:20,height:20,verticalPadding:10,horizontalPadding:10},n=[],i=0;i<t.length;i++){var r=t[i],o=a.idToLNode[r.id()];if(!r.data("dummy_parent_id")){var s=o.owner;s.remove(o),this.gm.resetAllNodes(),this.gm.getAllNodes()}n.push(o)}n.sort(function(t,e){return t.rect.width*t.rect.height>e.rect.width*e.rect.height?-1:t.rect.width*t.rect.height<e.rect.width*e.rect.height?1:0});for(var i=0;i<n.length;i++){var o=n[i];0==e.rows.length?this.insertNodeToRow(e,o,0):this.canAddHorizontal(e,o.rect.width,o.rect.height)?this.insertNodeToRow(e,o,this.getShortestRowIndex(e)):this.insertNodeToRow(e,o,e.rows.length),this.shiftToLastRow(e)}return e},a.prototype.insertNodeToRow=function(t,e,n){var i=2*t.compoundMargin;if(n==t.rows.length){var r=[];t.rows.push(r),t.rowWidth.push(i),t.rowHeight.push(0)}var o=t.rowWidth[n]+e.rect.width;t.rows[n].length>0&&(o+=t.horizontalPadding),t.rowWidth[n]=o,t.width<o&&(t.width=o);var a=e.rect.height;n>0&&(a+=t.verticalPadding);var s=0;a>t.rowHeight[n]&&(s=t.rowHeight[n],t.rowHeight[n]=a,s=t.rowHeight[n]-s),t.height+=s,t.rows[n].push(e)},a.prototype.getShortestRowIndex=function(t){for(var e=-1,n=Number.MAX_VALUE,i=0;i<t.rows.length;i++)t.rowWidth[i]<n&&(e=i,n=t.rowWidth[i]);return e},a.prototype.getLongestRowIndex=function(t){for(var e=-1,n=Number.MIN_VALUE,i=0;i<t.rows.length;i++)t.rowWidth[i]>n&&(e=i,n=t.rowWidth[i]);return e},a.prototype.canAddHorizontal=function(t,e,n){var i=this.getShortestRowIndex(t);if(i<0)return!0;var r=t.rowWidth[i];if(r+t.horizontalPadding+e<=t.width)return!0;var o=0;t.rowHeight[i]<n&&i>0&&(o=n+t.verticalPadding-t.rowHeight[i]);var a;a=t.width-r>=e+t.horizontalPadding?(t.height+o)/(r+e+t.horizontalPadding):(t.height+o)/t.width,o=n+t.verticalPadding;var s;return s=t.width<e?(t.height+o)/e:(t.height+o)/t.width,s<1&&(s=1/s),a<1&&(a=1/a),a<s},a.prototype.shiftToLastRow=function(t){var e=this.getLongestRowIndex(t),n=t.rowWidth.length-1,i=t.rows[e],r=i[i.length-1],o=r.width+t.horizontalPadding;if(t.width-t.rowWidth[n]>o&&e!=n){i.splice(-1,1),t.rows[n].push(r),t.rowWidth[e]=t.rowWidth[e]-o,t.rowWidth[n]=t.rowWidth[n]+o,t.width=t.rowWidth[this.getLongestRowIndex(t)];for(var a=Number.MIN_VALUE,s=0;s<i.length;s++)i[s].height>a&&(a=i[s].height);e>0&&(a+=t.verticalPadding);var l=t.rowHeight[e]+t.rowHeight[n];t.rowHeight[e]=a,t.rowHeight[n]<r.height+t.verticalPadding&&(t.rowHeight[n]=r.height+t.verticalPadding);var u=t.rowHeight[e]+t.rowHeight[n];t.height+=u-l,this.shiftToLastRow(t)}},a.prototype.stop=function(){return this.stopped=!0,this},a.prototype.processChildrenList=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i];this.options.eles.nodes().length;var o,s=r.children();if(o=null!=r.width()&&null!=r.height()?t.add(new R(a.layout.graphManager,new g(r.position("x"),r.position("y")),new l(parseFloat(r.width()),parseFloat(r.height())))):t.add(new R(this.graphManager)),o.id=r.data("id"),a.idToLNode[r.data("id")]=o,isNaN(o.rect.x)&&(o.rect.x=0),isNaN(o.rect.y)&&(o.rect.y=0),null!=s&&s.length>0){var u;u=a.layout.getGraphManager().add(a.layout.newGraph(),o),this.processChildrenList(u,s)}}},e.exports=function(t){return s=t.Thread,a}},{"./CoSEConstants":1,"./CoSEEdge":2,"./CoSEGraph":3,"./CoSEGraphManager":4,"./CoSELayout":5,"./CoSENode":6,"./DimensionD":7,"./FDLayout":8,"./FDLayoutConstants":9,"./FDLayoutEdge":10,"./FDLayoutNode":11,"./HashMap":12,"./HashSet":13,"./IGeometry":14,"./IMath":15,"./Integer":16,"./LEdge":17,"./LGraph":18,"./LGraphManager":19,"./LGraphObject":20,"./LNode":21,"./Layout":22,"./LayoutConstants":23,"./Point":24,"./PointD":25,"./RandomSeed":26,"./RectangleD":27,"./Transform":28,"./UniqueIDGeneretor":29,"./layoutOptionsPack":31}],31:[function(t,e,n){function i(){}e.exports=i},{}],32:[function(t,e,n){"use strict";!function(){var n=t("./Layout"),i=function(t){var e=n(t);t("layout","cose-bilkent",e)};"undefined"!=typeof e&&e.exports&&(e.exports=i),"undefined"!=typeof define&&define.amd&&define("cytoscape-cose-bilkent",function(){return i}),"undefined"!=typeof cytoscape&&i(cytoscape)}()},{"./Layout":30}]},{},[32]),function(t){"use strict";var e={menuRadius:100,selector:"node",commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(92, 194, 237, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,minSpotlightRadius:24,maxSpotlightRadius:38,itemColor:"white",itemTextShadowColor:"black",zIndex:9999},n=function(t,n){t&&t("core","cxtmenu",function(t){function i(t){var e=t.offset();return e.left+=parseFloat(t.css("padding-left")),e.left+=parseFloat(t.css("border-left-width")),e.top+=parseFloat(t.css("padding-top")),e.top+=parseFloat(t.css("border-top-width")),e}function r(){n(document).off("click",O),g.off("click",A)}function o(t){t=void 0!==t?t:z,x.globalCompositeOperation="source-over",x.clearRect(0,0,w,w),x.fillStyle=h.fillColor,x.beginPath(),x.arc(b+h.activePadding,b+h.activePadding,b,0,2*Math.PI,!0),x.closePath(),x.fill(),x.globalCompositeOperation="destination-out",x.strokeStyle="white",x.lineWidth=h.separatorWidth;for(var e=h.commands,n=2*Math.PI/e.length,i=e.length%2!==0?Math.PI/2:0,r=i+n,o=0;o<e.length;o++){var a=(e[o],b*Math.cos(i)),s=b*Math.sin(i);x.beginPath(),x.moveTo(b+h.activePadding,b+h.activePadding),x.lineTo(b+h.activePadding+a,b+h.activePadding-s),x.closePath(),x.stroke(),i+=n,r+=n}x.fillStyle="white",x.globalCompositeOperation="destination-out",x.beginPath(),x.arc(b+h.activePadding,b+h.activePadding,t+h.spotlightPadding,0,2*Math.PI,!0),x.closePath(),x.fill(),x.globalCompositeOperation="source-over"}function a(t){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,n=+new Date;clearTimeout(R),X||n>=q+j?(e(t),q=n,X=!1):R=setTimeout(function(){e(t),q=n},2*j)}function s(){var t,e,r=!1;Y.on("cxttapstart taphold",h.selector,function(e){c=this;var a=this,s=this===d;t=c.grabbable&&c.grabbable(),t&&c.ungrabify();var l,u,f;!s&&a.isNode()?(l=a.renderedPosition(),u=a.renderedWidth(),f=a.renderedHeight()):(l=e.cyRenderedPosition,u=1,f=1);n(window).scrollLeft(),n(window).scrollTop();v=i(p),B=l.x,F=l.y,y.show().css({left:l.x-b+"px",top:l.y-b+"px"}),z=Math.max(u,f)/2,z=Math.max(z,h.minSpotlightRadius),z=Math.min(z,h.maxSpotlightRadius),o(),_=void 0,r=!0}).on("cxtdrag tapdrag",h.selector,e=function(t){a(function(){if(r){var e=t.originalEvent,n=e.touches&&e.touches.length>0,i=n?e.touches[0].pageX:e.pageX,a=n?e.touches[0].pageY:e.pageY,s=i-v.left-B,l=a-v.top-F;0===s&&(s=.01);var u=Math.sqrt(s*s+l*l),c=(l*l-u*u-s*s)/(-2*u*s),d=Math.acos(c);if(_=void 0,u<z+h.spotlightPadding)return void o();o();var p=s*b/u,f=l*b/u;l>0&&(d=Math.PI+Math.abs(d-Math.PI));for(var g=h.commands,y=2*Math.PI/g.length,m=g.length%2!==0?Math.PI/2:0,w=m+y,E=0;E<g.length;E++){var T=(g[E],m<=d&&d<=w||m<=d+2*Math.PI&&d+2*Math.PI<=w);if(T){x.fillStyle=h.activeFillColor,x.strokeStyle="black",x.lineWidth=1,x.beginPath(),x.moveTo(b+h.activePadding,b+h.activePadding),x.arc(b+h.activePadding,b+h.activePadding,b+h.activePadding,2*Math.PI-m,2*Math.PI-w,!0),x.closePath(),x.fill(),_=E;break}m+=y,w+=y}x.fillStyle="white",x.globalCompositeOperation="destination-out",x.beginPath(),x.translate(b+h.activePadding+p/b*(z+h.spotlightPadding-h.indicatorSize/4),b+h.activePadding+f/b*(z+h.spotlightPadding-h.indicatorSize/4)),x.rotate(Math.PI/4-d),x.fillRect(-h.indicatorSize/2,-h.indicatorSize/2,h.indicatorSize,h.indicatorSize),x.closePath(),x.fill(),x.setTransform(1,0,0,1,0,0),x.beginPath(),x.arc(b+h.activePadding,b+h.activePadding,z+h.spotlightPadding,0,2*Math.PI,!0),x.closePath(),x.fill(),x.globalCompositeOperation="source-over"}})}).on("tapdrag",e).on("cxttapend tapend",h.selector,function(e){var n=this;if(y.hide(),void 0!==_){var i=h.commands[_].select;i&&(i.apply(n),_=void 0)}r=!1,t&&c.grabify()}).on("cxttapend tapend",function(e){y.hide(),r=!1,t&&c.grabify()})}function l(){for(var t=f.handlers,e=0;e<t.length;e++){var n=t[e];"core"===n.selector?d.off(n.events,n.fn):d.off(n.events,n.selector,n.fn)}}function u(){l(),r(),g.remove()}var c,h=n.extend(!0,{},e,t),d=this,p=n(d.container()),f={options:h,handlers:[]},g=n('<div class="cxtmenu"></div>');f.$container=g;var v,y=n("<div></div>"),m=n("<canvas></canvas>"),x=m[0].getContext("2d"),b=h.menuRadius,w=2*(b+h.activePadding),_=void 0;p.append(g),g.append(y),y.append(m),g.css({position:"absolute",zIndex:h.zIndex}),y.css({width:w+"px",height:w+"px",position:"absolute",zIndex:1,marginLeft:-h.activePadding+"px",marginTop:-h.activePadding+"px"}).hide(),m[0].width=w,m[0].height=w;for(var E=h.commands,T=2*Math.PI/E.length,D=E.length%2!==0?Math.PI/2:0,S=D+T,N=0;N<E.length;N++){var C=E[N],L=(D+S)/2,M=.66*b*Math.cos(L),P=.66*b*Math.sin(L),k=n('<div class="cxtmenu-item"></div>');k.css({color:h.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px "+h.itemTextShadowColor+", 1px -1px "+h.itemTextShadowColor+", -1px 1px "+h.itemTextShadowColor+", 1px 1px "+h.itemTextShadowColor,left:"50%",top:"50%","min-height":.66*b,width:.66*b,height:.66*b,marginLeft:M-.33*b,marginTop:-P-.33*b});var I=n('<div class="cxtmenu-content">'+C.content+"</div>");I.css({width:.66*b,height:.66*b,"vertical-align":"middle",display:"table-cell"}),y.append(k),k.append(I),D+=T,S+=T}var O,A,R,B,F,z,q=0,j=1e3/30,X=!0,Y={on:function(t,e,n){return f.handlers.push({events:t,selector:e,fn:n}),"core"===e?d.on(t,function(t){if(t.cyTarget===d)return n.apply(this,[t])}):d.on(t,e,n),this}};return s(),{destroy:function(){u()}}})};"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof define&&define.amd&&define("cytoscape-cxtmenu",function(){return n}),"undefined"!=typeof cytoscape&&n(cytoscape,t)}(jQuery),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.cytoscapeNgraph||(e.cytoscapeNgraph={})).forcelayout=t()}}(function(){var t;return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){function i(e,n){function i(){if(!S)return k.postMessage(M),C}function d(t,e,n,i){k.postMessage({kind:h.setNodePosition,payload:{nodeId:t,x:e,y:n,z:i}}),D(P[t],{x:e,y:n,z:i})}function p(){return E}function f(t,e){k.postMessage({kind:h.pinNode,payload:{nodeId:t.id,isPinned:e}}),L[t.id]=e}function g(t){return L[t.id]}function v(){if(N)throw new Error("Init request is already sent to the worker");k.postMessage({kind:h.init,payload:{graph:s(e),options:JSON.stringify(n)}}),N=!0}function y(){function t(t){P[t.id]=i.getNodePosition(t.id)}var i=u(e,n);e.forEachNode(t),E=i.getGraphRect()}function m(t){return P[t]}function x(t){return T||b(),T[t]}function b(){T=Object.create(null),e.forEachLink(function(t){T[t.id]={from:m(t.fromId),to:m(t.toId)}})}function w(t){var e=t.data.kind,n=t.data.payload;e===h.cycleComplete&&(_(n.positions,n.systemStable),E=n.bbox,I.fire("cycle",n.iterations,n.systemStable)),e===h.initDone&&(S=!1,i())}function _(t,e){function n(e){var n=t[e],i=P[e];i?D(i,n):P[e]=n}C=e,Object.keys(t).forEach(n)}n=c(n);var E,T,D=n.is3d?r:o,S=!1,N=!1,C=!1,L=Object.create(null),M={kind:h.step},P=Object.create(null),k=a(t("./lib/layoutWorker.js"));k.addEventListener("message",w),v(),y();var I={step:i,getNodePosition:m,getLinkPosition:x,pinNode:f,setNodePosition:d,getGraphRect:p,isNodePinned:g};return l(I),I}function r(t,e){t.x=e.x,t.y=e.y,t.z=e.z}function o(t,e){t.x=e.x,t.y=e.y}var a=t("webworkify"),s=t("ngraph.tojson"),l=t("ngraph.events"),u=t("./lib/createLayout.js"),c=t("./options.js"),h=t("./lib/messages.js");e.exports=i},{"./lib/createLayout.js":2,"./lib/layoutWorker.js":3,"./lib/messages.js":4,"./options.js":5,"ngraph.events":6,"ngraph.tojson":35,webworkify:39}],2:[function(t,e,n){function i(t,e){return e=e||{},e.is3d?r(t,e.physics):o(t,e.physics)}var r=t("ngraph.forcelayout3d"),o=r.get2dLayout;e.exports=i},{"ngraph.forcelayout3d":16}],3:[function(t,e,n){function i(t){function e(t){var e=t.data.kind,r=t.data.payload;if(e===s.init){v=o(r.graph);var a=JSON.parse(r.options);u(v,a)}else e===s.step?h():e===s.pinNode?i(r.nodeId,r.isPinned):e===s.setNodePosition&&n(r.nodeId,r.x,r.y,r.z)}function n(t,e,n,i){l(),f.setNodePosition.apply(f,arguments),b=!1,h()}function i(t,e){l();var n=v.getNode(t);n&&f.pinNode(n,e)}function l(){if(!v)throw new Error("Pin node requested without initialied graph");if(!f)throw new Error("Layout was not created. Something is really wrong here")}function u(e,n){n=a(n),g=n.async,f=r(e,n),e.forEachNode(c),t.postMessage({kind:s.initDone})}function c(t){w[t.id]=f.getNodePosition(t.id)}function h(){l(),m=!0,x||d()}function d(){return b?void(x=0):void(x=setTimeout(function(){p(),m||!g.waitForStep?(m=!1,d()):x=0},0))}function p(){for(var e=0;e<g.stepsPerCycle;++e)b=f.step(),y+=1;y>=g.maxIterations&&(b=!0),t.postMessage({kind:s.cycleComplete,payload:{positions:w,systemStable:b,bbox:f.getGraphRect(),iterations:y}})}var f,g,v,y=0,m=!1,x=0,b=!1,w=Object.create(null);t.addEventListener("message",e)}var r=t("./createLayout.js"),o=t("ngraph.fromjson"),a=t("../options.js"),s=t("./messages.js");e.exports=i},{"../options.js":5,"./createLayout.js":2,"./messages.js":4,"ngraph.fromjson":22}],4:[function(t,e,n){e.exports={init:10,initDone:11,step:12,cycleComplete:13,pinNode:41,setNodePosition:43}},{}],5:[function(t,e,n){function i(t){t=t||{},t.is3d="boolean"==typeof t.is3d&&t.is3d;var e=t.async=t.async||{};return e.stepsPerCycle="number"==typeof e.stepsPerCycle?e.stepsPerCycle:5,e.maxIterations="number"==typeof e.maxIterations?e.maxIterations:Number.POSITIVE_INFINITY,e.waitForStep="boolean"!=typeof e.waitForStep||e.waitForStep,t}e.exports=i},{}],6:[function(t,e,n){function i(t){var e=Object.create(null);return{on:function(n,i,r){if("function"!=typeof i)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:i,ctx:r}),t},off:function(n,i){var r="undefined"==typeof n;if(r)return e=Object.create(null),t;if(e[n]){var o="function"!=typeof i;if(o)delete e[n];else for(var a=e[n],s=0;s<a.length;++s)a[s].callback===i&&a.splice(s,1)}return t},fire:function(n){var i=e[n];if(!i)return t;var r;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var a=i[o];a.callback.apply(a.ctx,r)}return t}}}function r(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}e.exports=function(t){r(t);var e=i(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},{}],7:[function(t,e,n){function i(t,e,n){var i="[object Array]"===Object.prototype.toString.call(n);if(i)for(var o=0;o<n.length;++o)r(t,e,n[o]);else for(var a in t)r(t,e,a)}function r(t,e,n){if(t.hasOwnProperty(n)){if("function"==typeof e[n])return;e[n]=function(i){return void 0!==i?(t[n]=i,e):t[n]}}}e.exports=i},{}],8:[function(t,e,n){function i(e,n){function i(t,n){var i;if(void 0===n)i="string"==typeof t?t:t.id;else{var r=e.hasLink(t,n);if(!r)return;i=r.id}return w[i]}function o(t){return b[t]}function a(){e.on("changed",s)}function s(t){for(var e=0;e<t.length;++e){var n=t[e];"add"===n.changeType?(n.node&&u(n.node.id),n.link&&h(n.link)):"remove"===n.changeType&&(n.node&&c(n.node),n.link&&d(n.link))}}function l(){e.forEachNode(function(t){u(t.id)}),e.forEachLink(h)}function u(t){var n=b[t];if(!n){var i=e.getNode(t);if(!i)throw new Error("initBody() was called with unknown node id");var r=i.position;if(!r){var o=p(i);r=x.getBestNewBodyPosition(o)}n=x.addBodyAt(r),b[t]=n,f(t),g(i)&&(n.isPinned=!0)}}function c(t){var e=t.id,n=b[e];n&&(b[e]=null,delete b[e],x.removeBody(n))}function h(t){f(t.fromId),f(t.toId);var e=b[t.fromId],n=b[t.toId],i=x.addSpring(e,n,t.length);_(t,i),w[t.id]=i}function d(t){var n=w[t.id];if(n){var i=e.getNode(t.fromId),r=e.getNode(t.toId);i&&f(i.id),r&&f(r.id),delete w[t.id],x.removeSpring(n)}}function p(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),i=0;i<n;++i){var r=t.links[i],o=r.fromId!==t.id?b[r.fromId]:b[r.toId];o&&o.pos&&e.push(o)}return e}function f(t){var e=b[t];e.mass=y(t)}function g(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}function v(t){var e=b[t];return e||(u(t),e=b[t]),e}function y(t){return 1+e.getLinks(t).length/3}if(!e)throw new Error("Graph structure cannot be undefined");var m=t("ngraph.physics.simulator"),x=m(n),b="function"==typeof Object.create?Object.create(null):{},w={},_=x.settings.springTransform||r;l(),a();var E={step:function(){return x.step()},getNodePosition:function(t){return v(t).pos},setNodePosition:function(t){var e=v(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=w[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return x.getBBox()},pinNode:function(t,e){var n=v(t.id);n.isPinned=!!e},isNodePinned:function(t){return v(t.id).isPinned},dispose:function(){e.off("changed",s)},getBody:o,getSpring:i,simulator:x};return E}function r(){}e.exports=i,e.exports.simulator=t("ngraph.physics.simulator")},{"ngraph.physics.simulator":9}],9:[function(t,e,n){function i(e){function n(){var t,e=d.length;if(e)for(f.insertBodies(d);e--;)t=d[e],t.isPinned||(t.force.reset(),f.updateBodyForce(t),y.update(t));for(e=p.length;e--;)v.update(p[e])}var i=t("./lib/spring"),r=t("ngraph.expose"),o=t("ngraph.merge");e=o(e,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,stableThreshold:.009});var a=e.createQuadTree||t("ngraph.quadtreebh"),s=e.createBounds||t("./lib/bounds"),l=e.createDragForce||t("./lib/dragForce"),u=e.createSpringForce||t("./lib/springForce"),c=e.integrator||t("./lib/eulerIntegrator"),h=e.createBody||t("./lib/createBody"),d=[],p=[],f=a(e),g=s(d,e),v=u(e),y=l(e),m={bodies:d,springs:p,settings:e,step:function(){n();var t=c(d,e.timeStep);return g.update(),t<e.stableThreshold},addBody:function(t){if(!t)throw new Error("Body is required");return d.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=h(t);return d.push(e),e},removeBody:function(t){if(t){var e=d.indexOf(t);if(!(e<0))return d.splice(e,1),0===d.length&&g.reset(),!0}},addSpring:function(t,e,n,r,o){if(!t||!e)throw new Error("Cannot add null spring to force simulator");"number"!=typeof n&&(n=-1);var a=new i(t,e,n,o>=0?o:-1,r);return p.push(a),a},removeSpring:function(t){if(t){var e=p.indexOf(t);return e>-1?(p.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return g.getBestNewPosition(t)},getBBox:function(){return g.box},gravity:function(t){return void 0!==t?(e.gravity=t,f.options({gravity:t}),this):e.gravity},theta:function(t){return void 0!==t?(e.theta=t,f.options({theta:t}),this):e.theta}};return r(e,m),m}e.exports=i},{"./lib/bounds":10,"./lib/createBody":11,"./lib/dragForce":12,"./lib/eulerIntegrator":13,"./lib/spring":14,"./lib/springForce":15,"ngraph.expose":7,"ngraph.merge":24,"ngraph.quadtreebh":26}],10:[function(t,e,n){e.exports=function(e,n){function i(){var t=e.length;if(0!==t){for(var n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Number.MIN_VALUE,a=Number.MIN_VALUE;t--;){var s=e[t];s.isPinned?(s.pos.x=s.prevPos.x,s.pos.y=s.prevPos.y):(s.prevPos.x=s.pos.x,s.prevPos.y=s.pos.y),s.pos.x<n&&(n=s.pos.x),s.pos.x>r&&(r=s.pos.x),s.pos.y<i&&(i=s.pos.y),s.pos.y>a&&(a=s.pos.y)}o.x1=n,o.x2=r,o.y1=i,o.y2=a}}var r=t("ngraph.random").random(42),o={x1:0,y1:0,x2:0,y2:0};return{box:o,update:i,reset:function(){o.x1=o.y1=0,o.x2=o.y2=0},getBestNewPosition:function(t){var e=o,i=0,a=0;if(t.length){for(var s=0;s<t.length;++s)i+=t[s].pos.x,a+=t[s].pos.y;i/=t.length,a/=t.length}else i=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2;var l=n.springLength;return{x:i+r.next(l)-l/2,y:a+r.next(l)-l/2}}}}},{"ngraph.random":34}],11:[function(t,e,n){var i=t("ngraph.physics.primitives");e.exports=function(t){return new i.Body(t)}},{"ngraph.physics.primitives":25}],12:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),i=t("ngraph.expose");e=n(e,{dragCoeff:.02});var r={update:function(t){t.force.x-=e.dragCoeff*t.velocity.x,t.force.y-=e.dragCoeff*t.velocity.y}};return i(e,r,["dragCoeff"]),r}},{"ngraph.expose":7,"ngraph.merge":24}],13:[function(t,e,n){function i(t,e){var n,i=0,r=0,o=0,a=0,s=t.length;for(n=0;n<s;++n){var l=t[n],u=e/l.mass;l.velocity.x+=u*l.force.x,l.velocity.y+=u*l.force.y;var c=l.velocity.x,h=l.velocity.y,d=Math.sqrt(c*c+h*h);d>1&&(l.velocity.x=c/d,l.velocity.y=h/d),i=e*l.velocity.x,o=e*l.velocity.y,l.pos.x+=i,l.pos.y+=o,r+=Math.abs(i),a+=Math.abs(o)}return(r*r+a*a)/t.length}e.exports=i},{}],14:[function(t,e,n){function i(t,e,n,i,r){this.from=t,this.to=e,this.length=n,this.coeff=i,this.weight="number"==typeof r?r:1}e.exports=i},{}],15:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),i=t("ngraph.random").random(42),r=t("ngraph.expose");e=n(e,{springCoeff:2e-4,springLength:80});var o={update:function(t){var n=t.from,r=t.to,o=t.length<0?e.springLength:t.length,a=r.pos.x-n.pos.x,s=r.pos.y-n.pos.y,l=Math.sqrt(a*a+s*s);0===l&&(a=(i.nextDouble()-.5)/50,s=(i.nextDouble()-.5)/50,l=Math.sqrt(a*a+s*s));var u=l-o,c=(!t.coeff||t.coeff<0?e.springCoeff:t.coeff)*u/l*t.weight;n.force.x+=c*a,n.force.y+=c*s,r.force.x-=c*a,r.force.y-=c*s}};return r(e,o,["springCoeff","springLength"]),o}},{"ngraph.expose":7,"ngraph.merge":24,"ngraph.random":34}],16:[function(t,e,n){function i(e,n){var r=t("ngraph.merge");return n=r(n,{createQuadTree:t("ngraph.quadtreebh3d"),createBounds:t("./lib/bounds"),createDragForce:t("./lib/dragForce"),createSpringForce:t("./lib/springForce"),integrator:t("./lib/eulerIntegrator"),createBody:t("./lib/createBody")}),i.get2dLayout(e,n)}e.exports=i,i.get2dLayout=t("ngraph.forcelayout")},{"./lib/bounds":17,"./lib/createBody":18,"./lib/dragForce":19,"./lib/eulerIntegrator":20,"./lib/springForce":21,"ngraph.forcelayout":8,"ngraph.merge":24,"ngraph.quadtreebh3d":30}],17:[function(t,e,n){e.exports=function(e,n){function i(){var t=e.length;
if(0!==t){for(var n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Number.MAX_VALUE,a=Number.MIN_VALUE,s=Number.MIN_VALUE,l=Number.MIN_VALUE;t--;){var u=e[t];u.isPinned?(u.pos.x=u.prevPos.x,u.pos.y=u.prevPos.y,u.pos.z=u.prevPos.z):(u.prevPos.x=u.pos.x,u.prevPos.y=u.pos.y,u.prevPos.z=u.pos.z),u.pos.x<n&&(n=u.pos.x),u.pos.x>a&&(a=u.pos.x),u.pos.y<i&&(i=u.pos.y),u.pos.y>s&&(s=u.pos.y),u.pos.z<r&&(r=u.pos.z),u.pos.z>l&&(l=u.pos.z)}o.x1=n,o.x2=a,o.y1=i,o.y2=s,o.z1=r,o.z2=l}}var r=t("ngraph.random").random(42),o={x1:0,y1:0,z1:0,x2:0,y2:0,z2:0};return{box:o,update:i,reset:function(){o.x1=o.y1=0,o.x2=o.y2=0,o.z1=o.z2=0},getBestNewPosition:function(t){var e=o,i=0,a=0,s=0;if(t.length){for(var l=0;l<t.length;++l)i+=t[l].pos.x,a+=t[l].pos.y,s+=t[l].pos.z;i/=t.length,a/=t.length,s/=t.length}else i=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=(e.z1+e.z2)/2;var u=n.springLength;return{x:i+r.next(u)-u/2,y:a+r.next(u)-u/2,z:s+r.next(u)-u/2}}}}},{"ngraph.random":34}],18:[function(t,e,n){var i=t("ngraph.physics.primitives");e.exports=function(t){return new i.Body3d(t)}},{"ngraph.physics.primitives":25}],19:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),i=t("ngraph.expose");e=n(e,{dragCoeff:.02});var r={update:function(t){t.force.x-=e.dragCoeff*t.velocity.x,t.force.y-=e.dragCoeff*t.velocity.y,t.force.z-=e.dragCoeff*t.velocity.z}};return i(e,r,["dragCoeff"]),r}},{"ngraph.expose":7,"ngraph.merge":24}],20:[function(t,e,n){function i(t,e){var n,i=0,r=0,o=0,a=0,s=0,l=0,u=t.length;for(n=0;n<u;++n){var c=t[n],h=e/c.mass;c.velocity.x+=h*c.force.x,c.velocity.y+=h*c.force.y,c.velocity.z+=h*c.force.z;var d=c.velocity.x,p=c.velocity.y,f=c.velocity.z,g=Math.sqrt(d*d+p*p+f*f);g>1&&(c.velocity.x=d/g,c.velocity.y=p/g,c.velocity.z=f/g),i=e*c.velocity.x,o=e*c.velocity.y,s=e*c.velocity.z,c.pos.x+=i,c.pos.y+=o,c.pos.z+=s,r+=Math.abs(i),a+=Math.abs(o),l+=Math.abs(s)}return(r*r+a*a+l*l)/t.length}e.exports=i},{}],21:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),i=t("ngraph.random").random(42),r=t("ngraph.expose");e=n(e,{springCoeff:2e-4,springLength:80});var o={update:function(t){var n=t.from,r=t.to,o=t.length<0?e.springLength:t.length,a=r.pos.x-n.pos.x,s=r.pos.y-n.pos.y,l=r.pos.z-n.pos.z,u=Math.sqrt(a*a+s*s+l*l);0===u&&(a=(i.nextDouble()-.5)/50,s=(i.nextDouble()-.5)/50,l=(i.nextDouble()-.5)/50,u=Math.sqrt(a*a+s*s+l*l));var c=u-o,h=(!t.coeff||t.coeff<0?e.springCoeff:t.coeff)*c/u*t.weight;n.force.x+=h*a,n.force.y+=h*s,n.force.z+=h*l,r.force.x-=h*a,r.force.y-=h*s,r.force.z-=h*l}};return r(e,o,["springCoeff","springLength"]),o}},{"ngraph.expose":7,"ngraph.merge":24,"ngraph.random":34}],22:[function(t,e,n){function i(t,e,n){var i;e=e||r,n=n||r,i="string"==typeof t?JSON.parse(t):t;var a,s=o();if(void 0===i.links||void 0===i.nodes)throw new Error("Cannot load graph without links and nodes");for(a=0;a<i.nodes.length;++a){var l=e(i.nodes[a]);if(!l.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");s.addNode(l.id,l.data)}for(a=0;a<i.links.length;++a){var u=n(i.links[a]);if(!u.hasOwnProperty("fromId")||!u.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");s.addLink(u.fromId,u.toId,u.data)}return s}function r(t){return t}e.exports=i;var o=t("ngraph.graph")},{"ngraph.graph":23}],23:[function(t,e,n){function i(t){function e(){function t(){return X.beginUpdate=q=D,X.endUpdate=j=S,F=n,z=i,X.on=e,e.apply(X,arguments)}var e=X.on;X.on=t}function n(t,e){B.push({link:t,changeType:e})}function i(t,e){B.push({node:t,changeType:e})}function l(t,e){if(void 0===t)throw new Error("Invalid node identifier");q();var n=h(t);return n?z(n,"update"):(n=new o(t),I++,z(n,"add")),n.data=e,M[t]=n,j(),n}function h(t){return M[t]}function d(t){var e=h(t);if(!e)return!1;if(q(),e.links)for(;e.links.length;){var n=e.links[0];y(n)}return delete M[t],I--,z(e,"remove"),j(),!0}function p(t,e,n){q();var i=h(t)||l(t),r=h(e)||l(e),o=R(t,e,n);return P.push(o),a(i,o),t!==e&&a(r,o),F(o,"add"),j(),o}function f(t,e,n){var i=u(t,e);return new s(t,e,n,i)}function g(t,e,n){var i=u(t,e),r=k.hasOwnProperty(i);if(r||m(t,e)){r||(k[i]=0);var o="@"+ ++k[i];i=u(t+o,e+o)}return new s(t,e,n,i)}function v(t){var e=h(t);return e?e.links:null}function y(t){if(!t)return!1;var e=r(t,P);if(e<0)return!1;q(),P.splice(e,1);var n=h(t.fromId),i=h(t.toId);return n&&(e=r(t,n.links),e>=0&&n.links.splice(e,1)),i&&(e=r(t,i.links),e>=0&&i.links.splice(e,1)),F(t,"remove"),j(),!0}function m(t,e){var n,i=h(t);if(!i||!i.links)return null;for(n=0;n<i.links.length;++n){var r=i.links[n];if(r.fromId===t&&r.toId===e)return r}return null}function x(){q(),A(function(t){d(t.id)}),j()}function b(t){var e,n;if("function"==typeof t)for(e=0,n=P.length;e<n;++e)t(P[e])}function w(t,e,n){var i=h(t);if(i&&i.links&&"function"==typeof e)return n?E(i.links,t,e):_(i.links,t,e)}function _(t,e,n){for(var i,r=0;r<t.length;++r){var o=t[r],a=o.fromId===e?o.toId:o.fromId;if(i=n(M[a],o))return!0}}function E(t,e,n){for(var i,r=0;r<t.length;++r){var o=t[r];if(o.fromId===e&&(i=n(M[o.toId],o)))return!0}}function T(){}function D(){O+=1}function S(){O-=1,0===O&&B.length>0&&(X.fire("changed",B),B.length=0)}function N(){return Object.keys?C:L}function C(t){if("function"==typeof t)for(var e=Object.keys(M),n=0;n<e.length;++n)if(t(M[e[n]]))return!0}function L(t){if("function"==typeof t){var e;for(e in M)if(t(M[e]))return!0}}t=t||{},void 0===t.uniqueLinkId&&(t.uniqueLinkId=!0);var M="function"==typeof Object.create?Object.create(null):{},P=[],k={},I=0,O=0,A=N(),R=t.uniqueLinkId?g:f,B=[],F=T,z=T,q=T,j=T,X={addNode:l,addLink:p,removeLink:y,removeNode:d,getNode:h,getNodesCount:function(){return I},getLinksCount:function(){return P.length},getLinks:v,forEachNode:A,forEachLinkedNode:w,forEachLink:b,beginUpdate:q,endUpdate:j,clear:x,hasLink:m,getLink:m};return c(X),e(),X}function r(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,i=e.length;for(n=0;n<i;n+=1)if(e[n]===t)return n;return-1}function o(t){this.id=t,this.links=null,this.data=null}function a(t,e){t.links?t.links.push(e):t.links=[e]}function s(t,e,n,i){this.fromId=t,this.toId=e,this.data=n,this.id=i}function l(t){var e,n,i,r=0;if(0==t.length)return r;for(e=0,i=t.length;e<i;e++)n=t.charCodeAt(e),r=(r<<5)-r+n,r|=0;return r}function u(t,e){return l(t.toString()+"?? "+e.toString())}e.exports=i;var c=t("ngraph.events")},{"ngraph.events":6}],24:[function(t,e,n){function i(t,e){var n;if(t||(t={}),e)for(n in e)if(e.hasOwnProperty(n)){var r=t.hasOwnProperty(n),o=typeof e[n],a=!r||typeof t[n]!==o;a?t[n]=e[n]:"object"===o&&(t[n]=i(t[n],e[n]))}return t}e.exports=i},{}],25:[function(t,e,n){function i(t,e){this.pos=new r(t,e),this.prevPos=new r(t,e),this.force=new r,this.velocity=new r,this.mass=1}function r(t,e){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0)}function o(t,e,n){this.pos=new a(t,e,n),this.prevPos=new a(t,e,n),this.force=new a,this.velocity=new a,this.mass=1}function a(t,e,n){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0,this.z="number"==typeof t.z?t.z:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof n?n:0)}e.exports={Body:i,Vector2d:r,Body3d:o,Vector3d:a},i.prototype.setPosition=function(t,e){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e},r.prototype.reset=function(){this.x=this.y=0},o.prototype.setPosition=function(t,e,n){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e,this.prevPos.z=this.pos.z=n},a.prototype.reset=function(){this.x=this.y=this.z=0}},{}],26:[function(t,e,n){function i(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:null}function r(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e&&(t.quad3=n)}e.exports=function(e){e=e||{},e.gravity="number"==typeof e.gravity?e.gravity:-1,e.theta="number"==typeof e.theta?e.theta:.8;var n=t("ngraph.random").random(1984),o=t("./node"),a=t("./insertStack"),s=t("./isSamePosition"),l=e.gravity,u=[],c=new a,h=e.theta,d=[],p=0,f=function(){var t=d[p];return t?(t.quad0=null,t.quad1=null,t.quad2=null,t.quad3=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0):(t=new o,d[p]=t),++p,t},g=f(),v=function(t){for(c.reset(),c.push(g,t);!c.isEmpty();){var e=c.pop(),o=e.node,a=e.body;if(o.body){var l=o.body;if(o.body=null,s(l.pos,a.pos)){var u=3;do{var h=n.nextDouble(),d=(o.right-o.left)*h,p=(o.bottom-o.top)*h;l.pos.x=o.left+d,l.pos.y=o.top+p,u-=1}while(u>0&&s(l.pos,a.pos));if(0===u&&s(l.pos,a.pos))return}c.push(o,l),c.push(o,a)}else{var v=a.pos.x,y=a.pos.y;o.mass=o.mass+a.mass,o.massX=o.massX+a.mass*v,o.massY=o.massY+a.mass*y;var m=0,x=o.left,b=(o.right+x)/2,w=o.top,_=(o.bottom+w)/2;if(v>b){m+=1;var E=x;x=b,b+=b-E}if(y>_){m+=2;var T=w;w=_,_+=_-T}var D=i(o,m);D?c.push(D,a):(D=f(),D.left=x,D.top=w,D.right=b,D.bottom=_,D.body=a,r(o,m,D))}}},y=function(t){var e,i,r,o,a=u,s=0,c=0,d=1,p=0,f=1;for(a[0]=g;d;){var v=a[p],y=v.body;d-=1,p+=1;var m=y!==t;y&&m?(i=y.pos.x-t.pos.x,r=y.pos.y-t.pos.y,o=Math.sqrt(i*i+r*r),0===o&&(i=(n.nextDouble()-.5)/50,r=(n.nextDouble()-.5)/50,o=Math.sqrt(i*i+r*r)),e=l*y.mass*t.mass/(o*o*o),s+=e*i,c+=e*r):m&&(i=v.massX/v.mass-t.pos.x,r=v.massY/v.mass-t.pos.y,o=Math.sqrt(i*i+r*r),0===o&&(i=(n.nextDouble()-.5)/50,r=(n.nextDouble()-.5)/50,o=Math.sqrt(i*i+r*r)),(v.right-v.left)/o<h?(e=l*v.mass*t.mass/(o*o*o),s+=e*i,c+=e*r):(v.quad0&&(a[f]=v.quad0,d+=1,f+=1),v.quad1&&(a[f]=v.quad1,d+=1,f+=1),v.quad2&&(a[f]=v.quad2,d+=1,f+=1),v.quad3&&(a[f]=v.quad3,d+=1,f+=1)))}t.force.x+=s,t.force.y+=c},m=function(t){var e,n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Number.MIN_VALUE,o=Number.MIN_VALUE,a=t.length;for(e=a;e--;){var s=t[e].pos.x,l=t[e].pos.y;s<n&&(n=s),s>r&&(r=s),l<i&&(i=l),l>o&&(o=l)}var u=r-n,c=o-i;for(u>c?o=i+u:r=n+c,p=0,g=f(),g.left=n,g.right=r,g.top=i,g.bottom=o,e=a-1,e>0&&(g.body=t[e]);e--;)v(t[e],g)};return{insertBodies:m,updateBodyForce:y,options:function(t){return t?("number"==typeof t.gravity&&(l=t.gravity),"number"==typeof t.theta&&(h=t.theta),this):{gravity:l,theta:h}}}}},{"./insertStack":27,"./isSamePosition":28,"./node":29,"ngraph.random":34}],27:[function(t,e,n){function i(){this.stack=[],this.popIdx=0}function r(t,e){this.node=t,this.body=e}e.exports=i,i.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new r(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],28:[function(t,e,n){e.exports=function(t,e){var n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return n<1e-8&&i<1e-8}},{}],29:[function(t,e,n){e.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},{}],30:[function(t,e,n){function i(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:4===e?t.quad4:5===e?t.quad5:6===e?t.quad6:7===e?t.quad7:null}function r(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e?t.quad3=n:4===e?t.quad4=n:5===e?t.quad5=n:6===e?t.quad6=n:7===e&&(t.quad7=n)}e.exports=function(e){e=e||{},e.gravity="number"==typeof e.gravity?e.gravity:-1,e.theta="number"==typeof e.theta?e.theta:.8;var n=t("ngraph.random").random(1984),o=t("./node"),a=t("./insertStack"),s=t("./isSamePosition"),l=e.gravity,u=[],c=new a,h=e.theta,d=[],p=0,f=function(){var t=d[p];return t?(t.quad0=null,t.quad4=null,t.quad1=null,t.quad5=null,t.quad2=null,t.quad6=null,t.quad3=null,t.quad7=null,t.body=null,t.mass=t.massX=t.massY=t.massZ=0,t.left=t.right=t.top=t.bottom=t.front=t.back=0):(t=new o,d[p]=t),++p,t},g=f(),v=function(t){for(c.reset(),c.push(g,t);!c.isEmpty();){var e=c.pop(),o=e.node,a=e.body;if(o.body){var l=o.body;if(o.body=null,s(l.pos,a.pos)){var u=3;do{var h=n.nextDouble(),d=(o.right-o.left)*h,p=(o.bottom-o.top)*h,v=(o.front-o.back)*h;l.pos.x=o.left+d,l.pos.y=o.top+p,l.pos.z=o.back+v,u-=1}while(u>0&&s(l.pos,a.pos));if(0===u&&s(l.pos,a.pos))return}c.push(o,l),c.push(o,a)}else{var y=a.pos.x,m=a.pos.y,x=a.pos.z;o.mass+=a.mass,o.massX+=a.mass*y,o.massY+=a.mass*m,o.massZ+=a.mass*x;var b=0,w=o.left,_=(o.right+w)/2,E=o.top,T=(o.bottom+E)/2,D=o.back,S=(o.front+D)/2;if(y>_){b+=1;var N=w;w=_,_+=_-N}if(m>T){b+=2;var C=E;E=T,T+=T-C}if(x>S){b+=4;var L=D;D=S,S=D+(D-L)}var M=i(o,b);M?c.push(M,a):(M=f(),M.left=w,M.top=E,M.right=_,M.bottom=T,M.back=D,M.front=S,M.body=a,r(o,b,M))}}},y=function(t){var e,i,r,o,a,s=u,c=0,d=0,p=0,f=1,v=0,y=1;for(s[0]=g;f;){var m=s[v],x=m.body;f-=1,v+=1;var b=x!==t;x&&b?(i=x.pos.x-t.pos.x,r=x.pos.y-t.pos.y,o=x.pos.z-t.pos.z,a=Math.sqrt(i*i+r*r+o*o),0===a&&(i=(n.nextDouble()-.5)/50,r=(n.nextDouble()-.5)/50,o=(n.nextDouble()-.5)/50,a=Math.sqrt(i*i+r*r+o*o)),e=l*x.mass*t.mass/(a*a*a),c+=e*i,d+=e*r,p+=e*o):b&&(i=m.massX/m.mass-t.pos.x,r=m.massY/m.mass-t.pos.y,o=m.massZ/m.mass-t.pos.z,a=Math.sqrt(i*i+r*r+o*o),0===a&&(i=(n.nextDouble()-.5)/50,r=(n.nextDouble()-.5)/50,o=(n.nextDouble()-.5)/50,a=Math.sqrt(i*i+r*r+o*o)),(m.right-m.left)/a<h?(e=l*m.mass*t.mass/(a*a*a),c+=e*i,d+=e*r,p+=e*o):(m.quad0&&(s[y]=m.quad0,f+=1,y+=1),m.quad1&&(s[y]=m.quad1,f+=1,y+=1),m.quad2&&(s[y]=m.quad2,f+=1,y+=1),m.quad3&&(s[y]=m.quad3,f+=1,y+=1),m.quad4&&(s[y]=m.quad4,f+=1,y+=1),m.quad5&&(s[y]=m.quad5,f+=1,y+=1),m.quad6&&(s[y]=m.quad6,f+=1,y+=1),m.quad7&&(s[y]=m.quad7,f+=1,y+=1)))}t.force.x+=c,t.force.y+=d,t.force.z+=p},m=function(t){var e,n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE,s=Number.MIN_VALUE,l=t.length;for(e=l;e--;){var u=t[e].pos,c=u.x,h=u.y,d=u.z;c<n&&(n=c),c>o&&(o=c),h<i&&(i=h),h>a&&(a=h),d<r&&(r=d),d>s&&(s=d)}var y=Math.max(o-n,Math.max(a-i,s-r));for(o=n+y,a=i+y,s=r+y,p=0,g=f(),g.left=n,g.right=o,g.top=i,g.bottom=a,g.back=r,g.front=s,e=l-1,e>0&&(g.body=t[e]);e--;)v(t[e],g)};return{insertBodies:m,updateBodyForce:y,options:function(t){return t?("number"==typeof t.gravity&&(l=t.gravity),"number"==typeof t.theta&&(h=t.theta),this):{gravity:l,theta:h}}}}},{"./insertStack":31,"./isSamePosition":32,"./node":33,"ngraph.random":34}],31:[function(t,e,n){function i(){this.stack=[],this.popIdx=0}function r(t,e){this.node=t,this.body=e}e.exports=i,i.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new r(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],32:[function(t,e,n){e.exports=function(t,e){var n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y),r=Math.abs(t.z-e.z);return n<1e-8&&i<1e-8&&r<1e-8}},{}],33:[function(t,e,n){e.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.quad4=null,this.quad5=null,this.quad6=null,this.quad7=null,this.mass=0,this.massX=0,this.massY=0,this.massZ=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.front=0,this.back=0}},{}],34:[function(t,e,n){function i(t){var e="number"==typeof t?t:+new Date,n=function(){return e=e+2127912214+(e<<12)&4294967295,e=4294967295&(3345072700^e^e>>>19),e=e+374761393+(e<<5)&4294967295,e=4294967295&(e+3550635116^e<<9),e=e+4251993797+(e<<3)&4294967295,e=4294967295&(3042594569^e^e>>>16),(268435455&e)/268435456};return{next:function(t){return Math.floor(n()*t)},nextDouble:function(){return n()}}}function r(t,e){var n=e||i();if("function"!=typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var i,r,o;for(i=t.length-1;i>0;--i)r=n.next(i+1),o=t[r],t[r]=t[i],t[i]=o,e(o);t.length&&e(t[0])},shuffle:function(){var e,i,r;for(e=t.length-1;e>0;--e)i=n.next(e+1),r=t[i],t[i]=t[e],t[e]=r;return t}}}e.exports={random:i,randomIterator:r}},{}],35:[function(t,e,n){function i(t,e,n){function i(t){s.nodes.push(l(t))}function r(t){s.links.push(u(t))}function o(t){var e={id:t.id};return void 0!==t.data&&(e.data=t.data),e}function a(t){var e={fromId:t.fromId,toId:t.toId};return void 0!==t.data&&(e.data=t.data),e}var s={nodes:[],links:[]},l=e||o,u=n||a;return t.forEachNode(i),t.forEachLink(r),JSON.stringify(s)}e.exports=i},{}],36:[function(t,e,n){function i(){d&&c&&(d=!1,c.length?h=c.concat(h):p=-1,h.length&&r())}function r(){if(!d){var t=s(i);d=!0;for(var e=h.length;e;){for(c=h,h=[];++p<e;)c&&c[p].run();p=-1,e=h.length}c=null,d=!1,l(t)}}function o(t,e){this.fun=t,this.array=e}function a(){}var s,l,u=e.exports={};!function(){try{s=setTimeout}catch(t){s=function(){throw new Error("setTimeout is not defined")}}try{l=clearTimeout}catch(t){l=function(){throw new Error("clearTimeout is not defined")}}}();var c,h=[],d=!1,p=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new o(t,e)),1!==h.length||d||s(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],37:[function(e,n,i){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof i&&"object"==typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var r="undefined"!=typeof window?window:self,o=r.Q;r.Q=e(),r.Q.noConflict=function(){return r.Q=o,this}}}(function(){"use strict";function t(t){return function(){return $.apply(t,arguments)}}function n(t){return t===Object(t)}function i(t){return"[object StopIteration]"===it(t)||t instanceof G}function r(t,e){if(X&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(rt)===-1){for(var n=[],i=e;i;i=i.source)i.stack&&n.unshift(i.stack);n.unshift(t.stack);var r=n.join("\n"+rt+"\n");t.stack=o(r)}}function o(t){for(var e=t.split("\n"),n=[],i=0;i<e.length;++i){var r=e[i];l(r)||a(r)||!r||n.push(r)}return n.join("\n")}function a(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function s(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(t);return i?[i[1],Number(i[2])]:void 0}function l(t){var e=s(t);if(!e)return!1;var n=e[0],i=e[1];return n===V&&i>=U&&i<=ut}function u(){if(X)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],i=s(n);if(!i)return;return V=i[0],i[1]}}function c(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function h(t){return t instanceof g?t:x(t)?C(t):N(t)}function d(){function t(t){e=t,o.source=t,K(n,function(e,n){h.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,i=void 0}var e,n=[],i=[],r=tt(d.prototype),o=tt(g.prototype);if(o.promiseDispatch=function(t,r,o){var a=Z(arguments);n?(n.push(a),"when"===r&&o[1]&&i.push(o[1])):h.nextTick(function(){e.promiseDispatch.apply(e,a)})},o.valueOf=function(){if(n)return o;var t=y(e);return m(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},h.longStackSupport&&X)try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return r.promise=o,r.resolve=function(n){e||t(h(n))},r.fulfill=function(n){e||t(N(n))},r.reject=function(n){e||t(S(n))},r.notify=function(t){e||K(i,function(e,n){h.nextTick(function(){n(t)})},void 0)},r}function p(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=d();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function f(t){return p(function(e,n){for(var i=0,r=t.length;i<r;i++)h(t[i]).then(e,n)})}function g(t,e,n){void 0===e&&(e=function(t){return S(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=tt(g.prototype);if(i.promiseDispatch=function(n,r,o){var a;try{a=t[r]?t[r].apply(i,o):e.call(i,r,o)}catch(s){a=S(s)}n&&n(a)},i.inspect=n,n){var r=n();"rejected"===r.state&&(i.exception=r.reason),i.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?i:t.value}}return i}function v(t,e,n,i){return h(t).then(e,n,i)}function y(t){if(m(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function m(t){return t instanceof g}function x(t){return n(t)&&"function"==typeof t.then}function b(t){return m(t)&&"pending"===t.inspect().state}function w(t){return!m(t)||"fulfilled"===t.inspect().state}function _(t){return m(t)&&"rejected"===t.inspect().state}function E(){ot.length=0,at.length=0,lt||(lt=!0)}function T(t,n){lt&&("object"==typeof e&&"function"==typeof e.emit&&h.nextTick.runAfter(function(){Q(at,t)!==-1&&(e.emit("unhandledRejection",n,t),st.push(t))}),at.push(t),n&&"undefined"!=typeof n.stack?ot.push(n.stack):ot.push("(no stack) "+n))}function D(t){if(lt){var n=Q(at,t);n!==-1&&("object"==typeof e&&"function"==typeof e.emit&&h.nextTick.runAfter(function(){var i=Q(st,t);i!==-1&&(e.emit("rejectionHandled",ot[n],t),st.splice(i,1))}),at.splice(n,1),ot.splice(n,1))}}function S(t){var e=g({when:function(e){return e&&D(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return T(e,t),e}function N(t){return g({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return nt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function C(t){var e=d();return h.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function L(t){return g({isDef:function(){}},function(e,n){return A(t,e,n)},function(){return h(t).inspect()})}function M(t,e,n){return h(t).spread(e,n)}function P(t){return function(){function e(t,e){var a;if("undefined"==typeof StopIteration){try{a=n[t](e)}catch(s){return S(s)}return a.done?h(a.value):v(a.value,r,o)}try{a=n[t](e)}catch(s){return i(s)?h(s.value):S(s)}return v(a,r,o)}var n=t.apply(this,arguments),r=e.bind(e,"next"),o=e.bind(e,"throw");return r()}}function k(t){h.done(h.async(t)())}function I(t){throw new G(t)}function O(t){return function(){return M([this,R(arguments)],function(e,n){return t.apply(e,n)})}}function A(t,e,n){return h(t).dispatch(e,n)}function R(t){return v(t,function(t){var e=0,n=d();return K(t,function(i,r,o){var a;m(r)&&"fulfilled"===(a=r.inspect()).state?t[o]=a.value:(++e,v(r,function(i){t[o]=i,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function B(t){if(0===t.length)return h.resolve();var e=h.defer(),n=0;return K(t,function(i,r,o){function a(t){e.resolve(t)}function s(){n--,0===n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function l(t){e.notify({index:o,value:t})}var u=t[o];n++,v(u,a,s,l)},void 0),e.promise}function F(t){return v(t,function(t){return t=J(t,h),v(R(J(t,function(t){return v(t,W,W)})),function(){return t})})}function z(t){return h(t).allSettled()}function q(t,e){return h(t).then(void 0,void 0,e)}function j(t,e){return h(t).nodeify(e)}var X=!1;try{throw new Error}catch(Y){X=!!Y.stack}var V,G,U=u(),W=function(){},H=function(){function t(){for(var t,e;i.next;)i=i.next,t=i.task,i.task=void 0,e=i.domain,e&&(i.domain=void 0,e.enter()),n(t,e);for(;l.length;)t=l.pop(),n(t);o=!1}function n(e,n){try{e()}catch(i){if(s)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),i;setTimeout(function(){throw i},0)}n&&n.exit()}var i={task:void 0,next:null},r=i,o=!1,a=void 0,s=!1,l=[];if(H=function(t){r=r.next={task:t,domain:s&&e.domain,next:null},o||(o=!0,a())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)s=!0,a=function(){e.nextTick(t)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=function(){a=c,u.port1.onmessage=t,t()};var c=function(){u.port2.postMessage(0)};a=function(){setTimeout(t,0),c()}}else a=function(){setTimeout(t,0)};return H.runAfter=function(t){l.push(t),o||(o=!0,a())},H}(),$=Function.call,Z=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(t,e){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t(e,this[n],n));return e}),Q=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),J=t(Array.prototype.map||function(t,e){var n=this,i=[];return K(n,function(r,o,a){i.push(t.call(e,o,a,n))},void 0),i}),tt=Object.create||function(t){function e(){}return e.prototype=t,new e},et=t(Object.prototype.hasOwnProperty),nt=Object.keys||function(t){var e=[];for(var n in t)et(t,n)&&e.push(n);return e},it=t(Object.prototype.toString);G="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var rt="From previous event:";h.resolve=h,h.nextTick=H,h.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(h.longStackSupport=!0),h.defer=d,d.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(Z(arguments,1)):t.resolve(n)}},h.Promise=p,h.promise=p,p.race=f,p.all=R,p.reject=S,p.resolve=h,h.passByCopy=function(t){return t},g.prototype.passByCopy=function(){return this},h.join=function(t,e){return h(t).join(e)},g.prototype.join=function(t){return h([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},h.race=f,g.prototype.race=function(){return this.then(h.race)},h.makePromise=g,g.prototype.toString=function(){return"[object Promise]"},g.prototype.then=function(t,e,n){function i(e){try{return"function"==typeof t?t(e):e}catch(n){return S(n)}}function o(t){if("function"==typeof e){r(t,s);try{return e(t)}catch(n){return S(n)}}return S(t)}function a(t){return"function"==typeof n?n(t):t}var s=this,l=d(),u=!1;return h.nextTick(function(){s.promiseDispatch(function(t){u||(u=!0,l.resolve(i(t)))},"when",[function(t){u||(u=!0,l.resolve(o(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=a(t)}catch(i){if(n=!0,!h.onerror)throw i;h.onerror(i)}n||l.notify(e)}]),l.promise},h.tap=function(t,e){return h(t).tap(e)},g.prototype.tap=function(t){return t=h(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},h.when=v,g.prototype.thenResolve=function(t){return this.then(function(){return t})},h.thenResolve=function(t,e){return h(t).thenResolve(e)},g.prototype.thenReject=function(t){return this.then(function(){throw t})},h.thenReject=function(t,e){return h(t).thenReject(e)},h.nearer=y,h.isPromise=m,h.isPromiseAlike=x,h.isPending=b,g.prototype.isPending=function(){return"pending"===this.inspect().state},h.isFulfilled=w,g.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},h.isRejected=_,g.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ot=[],at=[],st=[],lt=!0;h.resetUnhandledRejections=E,h.getUnhandledReasons=function(){return ot.slice()},h.stopUnhandledRejectionTracking=function(){E(),lt=!1},E(),h.reject=S,h.fulfill=N,h.master=L,h.spread=M,g.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},h.async=P,h.spawn=k,h["return"]=I,h.promised=O,h.dispatch=A,g.prototype.dispatch=function(t,e){var n=this,i=d();return h.nextTick(function(){n.promiseDispatch(i.resolve,t,e)}),i.promise},h.get=function(t,e){return h(t).dispatch("get",[e])},g.prototype.get=function(t){return this.dispatch("get",[t])},h.set=function(t,e,n){return h(t).dispatch("set",[e,n])},g.prototype.set=function(t,e){return this.dispatch("set",[t,e])},h.del=h["delete"]=function(t,e){return h(t).dispatch("delete",[e])},g.prototype.del=g.prototype["delete"]=function(t){return this.dispatch("delete",[t])},h.mapply=h.post=function(t,e,n){return h(t).dispatch("post",[e,n])},g.prototype.mapply=g.prototype.post=function(t,e){return this.dispatch("post",[t,e])},h.send=h.mcall=h.invoke=function(t,e){return h(t).dispatch("post",[e,Z(arguments,2)])},g.prototype.send=g.prototype.mcall=g.prototype.invoke=function(t){return this.dispatch("post",[t,Z(arguments,1)])},h.fapply=function(t,e){return h(t).dispatch("apply",[void 0,e])},g.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},h["try"]=h.fcall=function(t){return h(t).dispatch("apply",[void 0,Z(arguments,1)])},g.prototype.fcall=function(){return this.dispatch("apply",[void 0,Z(arguments)])},h.fbind=function(t){var e=h(t),n=Z(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(Z(arguments))])}},g.prototype.fbind=function(){var t=this,e=Z(arguments);return function(){return t.dispatch("apply",[this,e.concat(Z(arguments))])}},h.keys=function(t){return h(t).dispatch("keys",[])},g.prototype.keys=function(){return this.dispatch("keys",[])},h.all=R,g.prototype.all=function(){return R(this)},h.any=B,g.prototype.any=function(){return B(this)},h.allResolved=c(F,"allResolved","allSettled"),g.prototype.allResolved=function(){return F(this)},h.allSettled=z,g.prototype.allSettled=function(){return this.then(function(t){return R(J(t,function(t){function e(){return t.inspect()}return t=h(t),t.then(e,e)}))})},h.fail=h["catch"]=function(t,e){return h(t).then(void 0,e)},g.prototype.fail=g.prototype["catch"]=function(t){return this.then(void 0,t)},h.progress=q,g.prototype.progress=function(t){return this.then(void 0,void 0,t)},h.fin=h["finally"]=function(t,e){return h(t)["finally"](e)},g.prototype.fin=g.prototype["finally"]=function(t){return t=h(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},h.done=function(t,e,n,i){return h(t).done(e,n,i)},g.prototype.done=function(t,n,i){var o=function(t){h.nextTick(function(){if(r(t,a),!h.onerror)throw t;h.onerror(t)})},a=t||n||i?this.then(t,n,i):this;"object"==typeof e&&e&&e.domain&&(o=e.domain.bind(o)),a.then(void 0,o)},h.timeout=function(t,e,n){return h(t).timeout(e,n)},g.prototype.timeout=function(t,e){var n=d(),i=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(i),n.resolve(t)},function(t){clearTimeout(i),n.reject(t)},n.notify),n.promise},h.delay=function(t,e){return void 0===e&&(e=t,t=void 0),h(t).delay(e)},g.prototype.delay=function(t){return this.then(function(e){var n=d();return setTimeout(function(){n.resolve(e)},t),n.promise})},h.nfapply=function(t,e){return h(t).nfapply(e)},g.prototype.nfapply=function(t){var e=d(),n=Z(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},h.nfcall=function(t){var e=Z(arguments,1);return h(t).nfapply(e)},g.prototype.nfcall=function(){var t=Z(arguments),e=d();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},h.nfbind=h.denodeify=function(t){var e=Z(arguments,1);return function(){var n=e.concat(Z(arguments)),i=d();return n.push(i.makeNodeResolver()),h(t).fapply(n).fail(i.reject),i.promise}},g.prototype.nfbind=g.prototype.denodeify=function(){var t=Z(arguments);return t.unshift(this),h.denodeify.apply(void 0,t)},h.nbind=function(t,e){var n=Z(arguments,2);return function(){function i(){return t.apply(e,arguments)}var r=n.concat(Z(arguments)),o=d();return r.push(o.makeNodeResolver()),
h(i).fapply(r).fail(o.reject),o.promise}},g.prototype.nbind=function(){var t=Z(arguments,0);return t.unshift(this),h.nbind.apply(void 0,t)},h.nmapply=h.npost=function(t,e,n){return h(t).npost(e,n)},g.prototype.nmapply=g.prototype.npost=function(t,e){var n=Z(e||[]),i=d();return n.push(i.makeNodeResolver()),this.dispatch("post",[t,n]).fail(i.reject),i.promise},h.nsend=h.nmcall=h.ninvoke=function(t,e){var n=Z(arguments,2),i=d();return n.push(i.makeNodeResolver()),h(t).dispatch("post",[e,n]).fail(i.reject),i.promise},g.prototype.nsend=g.prototype.nmcall=g.prototype.ninvoke=function(t){var e=Z(arguments,1),n=d();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},h.nodeify=j,g.prototype.nodeify=function(t){return t?void this.then(function(e){h.nextTick(function(){t(null,e)})},function(e){h.nextTick(function(){t(e)})}):this},h.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ut=u();return h})}).call(this,e("_process"))},{_process:36}],38:[function(e,n,i){(function(){function e(t){function e(e,n,i,r,o,a){for(;o>=0&&o<a;o+=t){var s=r?r[o]:o;i=n(i,e[s],s,e)}return i}return function(n,i,r,o){i=_(i,o,4);var a=!L(n)&&w.keys(n),s=(a||n).length,l=t>0?0:s-1;return arguments.length<3&&(r=n[a?a[l]:l],l+=t),e(n,i,r,a,l,s)}}function r(t){return function(e,n,i){n=E(n,i);for(var r=C(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(n(e[o],o,e))return o;return-1}}function o(t,e,n){return function(i,r,o){var a=0,s=C(i);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=e(p.call(i,a,s),w.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(i[o]===r)return o;return-1}}function a(t,e){var n=O.length,i=t.constructor,r=w.isFunction(i)&&i.prototype||c,o="constructor";for(w.has(t,o)&&!w.contains(e,o)&&e.push(o);n--;)o=O[n],o in t&&t[o]!==r[o]&&!w.contains(e,o)&&e.push(o)}var s=this,l=s._,u=Array.prototype,c=Object.prototype,h=Function.prototype,d=u.push,p=u.slice,f=c.toString,g=c.hasOwnProperty,v=Array.isArray,y=Object.keys,m=h.bind,x=Object.create,b=function(){},w=function(t){return t instanceof w?t:this instanceof w?void(this._wrapped=t):new w(t)};"undefined"!=typeof i?("undefined"!=typeof n&&n.exports&&(i=n.exports=w),i._=w):s._=w,w.VERSION="1.8.3";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}},E=function(t,e,n){return null==t?w.identity:w.isFunction(t)?_(t,e,n):w.isObject(t)?w.matcher(t):w.property(t)};w.iteratee=function(t,e){return E(t,e,1/0)};var T=function(t,e){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],a=t(o),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}},D=function(t){if(!w.isObject(t))return{};if(x)return x(t);b.prototype=t;var e=new b;return b.prototype=null,e},S=function(t){return function(e){return null==e?void 0:e[t]}},N=Math.pow(2,53)-1,C=S("length"),L=function(t){var e=C(t);return"number"==typeof e&&e>=0&&e<=N};w.each=w.forEach=function(t,e,n){e=_(e,n);var i,r;if(L(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var o=w.keys(t);for(i=0,r=o.length;i<r;i++)e(t[o[i]],o[i],t)}return t},w.map=w.collect=function(t,e,n){e=E(e,n);for(var i=!L(t)&&w.keys(t),r=(i||t).length,o=Array(r),a=0;a<r;a++){var s=i?i[a]:a;o[a]=e(t[s],s,t)}return o},w.reduce=w.foldl=w.inject=e(1),w.reduceRight=w.foldr=e(-1),w.find=w.detect=function(t,e,n){var i;if(i=L(t)?w.findIndex(t,e,n):w.findKey(t,e,n),void 0!==i&&i!==-1)return t[i]},w.filter=w.select=function(t,e,n){var i=[];return e=E(e,n),w.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},w.reject=function(t,e,n){return w.filter(t,w.negate(E(e)),n)},w.every=w.all=function(t,e,n){e=E(e,n);for(var i=!L(t)&&w.keys(t),r=(i||t).length,o=0;o<r;o++){var a=i?i[o]:o;if(!e(t[a],a,t))return!1}return!0},w.some=w.any=function(t,e,n){e=E(e,n);for(var i=!L(t)&&w.keys(t),r=(i||t).length,o=0;o<r;o++){var a=i?i[o]:o;if(e(t[a],a,t))return!0}return!1},w.contains=w.includes=w.include=function(t,e,n,i){return L(t)||(t=w.values(t)),("number"!=typeof n||i)&&(n=0),w.indexOf(t,e,n)>=0},w.invoke=function(t,e){var n=p.call(arguments,2),i=w.isFunction(e);return w.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})},w.pluck=function(t,e){return w.map(t,w.property(e))},w.where=function(t,e){return w.filter(t,w.matcher(e))},w.findWhere=function(t,e){return w.find(t,w.matcher(e))},w.max=function(t,e,n){var i,r,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=L(t)?t:w.values(t);for(var s=0,l=t.length;s<l;s++)i=t[s],i>o&&(o=i)}else e=E(e,n),w.each(t,function(t,n,i){r=e(t,n,i),(r>a||r===-(1/0)&&o===-(1/0))&&(o=t,a=r)});return o},w.min=function(t,e,n){var i,r,o=1/0,a=1/0;if(null==e&&null!=t){t=L(t)?t:w.values(t);for(var s=0,l=t.length;s<l;s++)i=t[s],i<o&&(o=i)}else e=E(e,n),w.each(t,function(t,n,i){r=e(t,n,i),(r<a||r===1/0&&o===1/0)&&(o=t,a=r)});return o},w.shuffle=function(t){for(var e,n=L(t)?t:w.values(t),i=n.length,r=Array(i),o=0;o<i;o++)e=w.random(0,o),e!==o&&(r[o]=r[e]),r[e]=n[o];return r},w.sample=function(t,e,n){return null==e||n?(L(t)||(t=w.values(t)),t[w.random(t.length-1)]):w.shuffle(t).slice(0,Math.max(0,e))},w.sortBy=function(t,e,n){return e=E(e,n),w.pluck(w.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var M=function(t){return function(e,n,i){var r={};return n=E(n,i),w.each(e,function(i,o){var a=n(i,o,e);t(r,i,a)}),r}};w.groupBy=M(function(t,e,n){w.has(t,n)?t[n].push(e):t[n]=[e]}),w.indexBy=M(function(t,e,n){t[n]=e}),w.countBy=M(function(t,e,n){w.has(t,n)?t[n]++:t[n]=1}),w.toArray=function(t){return t?w.isArray(t)?p.call(t):L(t)?w.map(t,w.identity):w.values(t):[]},w.size=function(t){return null==t?0:L(t)?t.length:w.keys(t).length},w.partition=function(t,e,n){e=E(e,n);var i=[],r=[];return w.each(t,function(t,n,o){(e(t,n,o)?i:r).push(t)}),[i,r]},w.first=w.head=w.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:w.initial(t,t.length-e)},w.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},w.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:w.rest(t,Math.max(0,t.length-e))},w.rest=w.tail=w.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},w.compact=function(t){return w.filter(t,w.identity)};var P=function(t,e,n,i){for(var r=[],o=0,a=i||0,s=C(t);a<s;a++){var l=t[a];if(L(l)&&(w.isArray(l)||w.isArguments(l))){e||(l=P(l,e,n));var u=0,c=l.length;for(r.length+=c;u<c;)r[o++]=l[u++]}else n||(r[o++]=l)}return r};w.flatten=function(t,e){return P(t,e,!1)},w.without=function(t){return w.difference(t,p.call(arguments,1))},w.uniq=w.unique=function(t,e,n,i){w.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=E(n,i));for(var r=[],o=[],a=0,s=C(t);a<s;a++){var l=t[a],u=n?n(l,a,t):l;e?(a&&o===u||r.push(l),o=u):n?w.contains(o,u)||(o.push(u),r.push(l)):w.contains(r,l)||r.push(l)}return r},w.union=function(){return w.uniq(P(arguments,!0,!0))},w.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=C(t);i<r;i++){var o=t[i];if(!w.contains(e,o)){for(var a=1;a<n&&w.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},w.difference=function(t){var e=P(arguments,!0,!0,1);return w.filter(t,function(t){return!w.contains(e,t)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(t){for(var e=t&&w.max(t,C).length||0,n=Array(e),i=0;i<e;i++)n[i]=w.pluck(t,i);return n},w.object=function(t,e){for(var n={},i=0,r=C(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},w.findIndex=r(1),w.findLastIndex=r(-1),w.sortedIndex=function(t,e,n,i){n=E(n,i,1);for(var r=n(e),o=0,a=C(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<r?o=s+1:a=s}return o},w.indexOf=o(1,w.findIndex,w.sortedIndex),w.lastIndexOf=o(-1,w.findLastIndex),w.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;o<i;o++,t+=n)r[o]=t;return r};var k=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=D(t.prototype),a=t.apply(o,r);return w.isObject(a)?a:o};w.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,p.call(arguments,1));if(!w.isFunction(t))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),i=function(){return k(t,i,e,this,n.concat(p.call(arguments)))};return i},w.partial=function(t){var e=p.call(arguments,1),n=function(){for(var i=0,r=e.length,o=Array(r),a=0;a<r;a++)o[a]=e[a]===w?arguments[i++]:e[a];for(;i<arguments.length;)o.push(arguments[i++]);return k(t,n,this,this,o)};return n},w.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)n=arguments[e],t[n]=w.bind(t[n],t);return t},w.memoize=function(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return w.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},w.delay=function(t,e){var n=p.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},w.defer=w.partial(w.delay,w,1),w.throttle=function(t,e,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:w.now(),a=null,o=t.apply(i,r),a||(i=r=null)};return function(){var u=w.now();s||n.leading!==!1||(s=u);var c=e-(u-s);return i=this,r=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=u,o=t.apply(i,r),a||(i=r=null)):a||n.trailing===!1||(a=setTimeout(l,c)),o}},w.debounce=function(t,e,n){var i,r,o,a,s,l=function(){var u=w.now()-a;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,n||(s=t.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=w.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(s=t.apply(o,r),o=r=null),s}},w.wrap=function(t,e){return w.partial(e,t)},w.negate=function(t){return function(){return!t.apply(this,arguments)}},w.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},w.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},w.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},w.once=w.partial(w.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(t){if(!w.isObject(t))return[];if(y)return y(t);var e=[];for(var n in t)w.has(t,n)&&e.push(n);return I&&a(t,e),e},w.allKeys=function(t){if(!w.isObject(t))return[];var e=[];for(var n in t)e.push(n);return I&&a(t,e),e},w.values=function(t){for(var e=w.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i},w.mapObject=function(t,e,n){e=E(e,n);for(var i,r=w.keys(t),o=r.length,a={},s=0;s<o;s++)i=r[s],a[i]=e(t[i],i,t);return a},w.pairs=function(t){for(var e=w.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},w.invert=function(t){for(var e={},n=w.keys(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e},w.functions=w.methods=function(t){var e=[];for(var n in t)w.isFunction(t[n])&&e.push(n);return e.sort()},w.extend=T(w.allKeys),w.extendOwn=w.assign=T(w.keys),w.findKey=function(t,e,n){e=E(e,n);for(var i,r=w.keys(t),o=0,a=r.length;o<a;o++)if(i=r[o],e(t[i],i,t))return i},w.pick=function(t,e,n){var i,r,o={},a=t;if(null==a)return o;w.isFunction(e)?(r=w.allKeys(a),i=_(e,n)):(r=P(arguments,!1,!1,1),i=function(t,e,n){return e in n},a=Object(a));for(var s=0,l=r.length;s<l;s++){var u=r[s],c=a[u];i(c,u,a)&&(o[u]=c)}return o},w.omit=function(t,e,n){if(w.isFunction(e))e=w.negate(e);else{var i=w.map(P(arguments,!1,!1,1),String);e=function(t,e){return!w.contains(i,e)}}return w.pick(t,e,n)},w.defaults=T(w.allKeys,!0),w.create=function(t,e){var n=D(t);return e&&w.extendOwn(n,e),n},w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isMatch=function(t,e){var n=w.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;o<i;o++){var a=n[o];if(e[a]!==r[a]||!(a in r))return!1}return!0};var A=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof w&&(t=t._wrapped),e instanceof w&&(e=e._wrapped);var r=f.call(t);if(r!==f.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(w.isFunction(a)&&a instanceof a&&w.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),o){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!A(t[l],e[l],n,i))return!1}else{var u,c=w.keys(t);if(l=c.length,w.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!w.has(e,u)||!A(t[u],e[u],n,i))return!1}return n.pop(),i.pop(),!0};w.isEqual=function(t,e){return A(t,e)},w.isEmpty=function(t){return null==t||(L(t)&&(w.isArray(t)||w.isString(t)||w.isArguments(t))?0===t.length:0===w.keys(t).length)},w.isElement=function(t){return!(!t||1!==t.nodeType)},w.isArray=v||function(t){return"[object Array]"===f.call(t)},w.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){w["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),w.isArguments(arguments)||(w.isArguments=function(t){return w.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(t){return"function"==typeof t||!1}),w.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},w.isNaN=function(t){return w.isNumber(t)&&t!==+t},w.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===f.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return null!=t&&g.call(t,e)},w.noConflict=function(){return s._=l,this},w.identity=function(t){return t},w.constant=function(t){return function(){return t}},w.noop=function(){},w.property=S,w.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},w.matcher=w.matches=function(t){return t=w.extendOwn({},t),function(e){return w.isMatch(e,t)}},w.times=function(t,e,n){var i=Array(Math.max(0,t));e=_(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},w.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},w.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=w.invert(R),F=function(t){var e=function(e){return t[e]},n="(?:"+w.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};w.escape=F(R),w.unescape=F(B),w.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),w.isFunction(i)?i.call(t):i};var z=0;w.uniqueId=function(t){var e=++z+"";return t?t+e:e},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},X=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(t){return"\\"+j[t]};w.template=function(t,e,n){!e&&n&&(e=n),e=w.defaults({},e,w.templateSettings);var i=RegExp([(e.escape||q).source,(e.interpolate||q).source,(e.evaluate||q).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,a,s){return o+=t.slice(r,s).replace(X,Y),r=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var l=function(t){return a.call(this,t,w)},u=e.variable||"obj";return l.source="function("+u+"){\n"+o+"}",l},w.chain=function(t){var e=w(t);return e._chain=!0,e};var V=function(t,e){return t._chain?w(e).chain():e};w.mixin=function(t){w.each(w.functions(t),function(e){var n=w[e]=t[e];w.prototype[e]=function(){var t=[this._wrapped];return d.apply(t,arguments),V(this,n.apply(w,t))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];w.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],V(this,n)}}),w.each(["concat","join","slice"],function(t){var e=u[t];w.prototype[t]=function(){return V(this,e.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof t&&t.amd&&t("underscore",[],function(){return w})}).call(this)},{}],39:[function(t,e,n){var i=arguments[3],r=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){for(var n,s=Object.keys(o),l=0,u=s.length;l<u;l++){var c=s[l],h=o[c].exports;if(h===t||h&&h["default"]===t){n=c;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var d={},l=0,u=s.length;l<u;l++){var c=s[l];d[c]=c}r[n]=[Function(["require","module","exports"],"("+t+")(self)"),d]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};f[n]=n,r[p]=[Function(["require"],"var f = require("+a(n)+");(f.default ? f.default : f)(self);"),f];var g="("+i+")({"+Object.keys(r).map(function(t){return a(t)+":["+r[t][0]+","+a(r[t][1])+"]"}).join(",")+"},{},["+a(p)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([g],{type:"text/javascript"});if(e&&e.bare)return y;var m=v.createObjectURL(y),x=new Worker(m);return x.objectURL=m,x}},{}],40:[function(t,e,n){"use strict";var i=t("ngraph.graph"),r=t("underscore"),o=(t("Q"),t("ngraph.asyncforce")),a=function(t){function e(t){this.options=a({},n,t),this.layoutOptions=a({},n,t),delete this.layoutOptions.cy,delete this.layoutOptions.eles}if(t){var n={async:{maxIterations:1e3,stepsPerCycle:30,waitForStep:!1},physics:{springLength:100,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,iterations:1e4,fit:!0,stableThreshold:9e-6},iterations:1e4,refreshInterval:16,refreshIterations:10,stableThreshold:2,animate:!0,fit:!0},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t};return e.prototype.l=o,e.prototype.g=i,e.prototype.run=function(){var t=this;t.trigger({type:"layoutstart",layout:t});var e=this.options,n=this.layoutOptions,i=this,o=i.g(),a=e.cy,s=e.eles,l=s.nodes(),u=l.parents();l=l.difference(u),l=l.filterFn(function(t){return t.connectedEdges().length>0});var c,h=s.edges(),d={},p=!0,f=function(e){l.positions(function(t,e){if(!e.data("dragging"))return c.getNodePosition(e.id())}),n.async&&setTimeout(function(){t.trigger({type:"layoutstop",layout:t}),t.trigger({type:"layoutready",layout:t})},500),n.fit&&a.fit(n.padding),p&&(t.trigger("layoutready"),p=!1)};o.on("changed",function(t){}),r.each(l,function(t,e){t.on("tapstart",function(t){t.cyTarget.data("dragging",!0)}),t.on("tapend",function(t){t.cyTarget.removeData("dragging")}),t.on("position","node[dragging]",function(t){c.setNodePosition&&t.cyTarget.data("dragging")&&c.setNodePosition(t.cyTarget.data().id)}),o.addNode(t.data().id)}),r.each(h,function(t,e){d[t.data().source+":"+t.data().target]||d[t.data().target+":"+t.data().source]||(d[t.data().source+":"+t.data().target]=t,o.addLink(t.data().source,t.data().target))}),c=i.l(o,n),r.each(l,function(t,e){var n=t.data();n.pin?(c.pinNode(n.id,!0),t.removeData("pin"),t.data("unpin",!0)):n.unpin&&(c.pinNode(n.id,!1),t.removeData("unpin"))});var g=n.iterations;this.on("layoutstop",function(){n.iterations=0}),c.on("stable",function(){console.log("got Stable event"),g=0}),n.animate||(n.refreshInterval=0);var v;if(c.on("cycle",function(){f()}),n.async)return this;var y=function(){if(n.animate)0!=g?v&&0!=g||(v=setTimeout(function(){g--,v=null,!!c.step()&&(g=0),y()},n.refreshInterval)):(t.trigger({type:"layoutstop",layout:t}),t.trigger({type:"layoutready",layout:t}));else{for(var e=0;e<n.iterations;e++)c.step();t.trigger({type:"layoutstop",layout:t}),t.trigger({type:"layoutready",layout:t})}};return y(),this},e.prototype.stop=function(){return this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},e.prototype.destroy=function(){return this.thread&&this.thread.stop(),this},e}};e.exports=function(t){return a(t)}},{Q:37,"ngraph.asyncforce":1,"ngraph.graph":23,underscore:38}],41:[function(e,n,i){"use strict";!function(){var i=e("./impl.js"),r=function(t){var e=i(t);t("layout","cytoscape-ngraph.forcelayout",e)};"undefined"!=typeof n&&n.exports&&(n.exports=r),"undefined"!=typeof t&&t.amd&&t("cytoscape-ngraph.forcelayout",function(){return r}),"undefined"!=typeof cytoscape&&r(cytoscape)}()},{"./impl.js":40}]},{},[41])(41)}),function(t,e){"use strict";function n(t,e){function n(t,n){var o=t.scratch().qtip,a=e.extend({},n);a.id||(a.id="cy-qtip-target-"+(Date.now()+Math.round(1e4*Math.random()))),o.$domEle||(o.$domEle=i),a.position=a.position||{},a.position.container=a.position.container||e(document.body),a.position.viewport=a.position.viewport||e(document.body),a.position.target=[0,0],a.position.my=a.position.my||"top center",a.position.at=a.position.at||"bottom center";var s=a.position.adjust=a.position.adjust||{};s.method=s.method||"flip",s.mouse=!1,void 0===s.cyAdjustToEleBB&&(s.cyAdjustToEleBB=!0),a.show=a.show||{},a.show.event||(a.show.event="tap"),a.hide=a.hide||{},a.hide.cyViewport=void 0===a.hide.cyViewport||a.hide.cyViewport,a.hide.event||(a.hide.event="unfocus"),a.overwrite=!1;var l;return a.content&&(r(a.content)?l=a.content:a.content.text&&r(a.content.text)&&(l=a.content.text),l&&(a.content=function(e,n){return l.apply(t,[e,n])})),a}var i=e("<div></div>"),s=250;t("collection","qtip",function(t){var e=this,i=this.cy(),r=i.container();return"api"===t?this.scratch().qtip.api:(e.each(function(e,l){var u=l.scratch(),c=u.qtip=u.qtip||{},h=n(l,t),d=h.position.adjust;c.$domEle.qtip(h);var p=c.api=c.$domEle.qtip("api");c.$domEle.removeData("qtip");var f=function(t){var e=r.getBoundingClientRect(),n=l.renderedPosition()||(t?t.cyRenderedPosition:void 0);if(n&&null!=n.x&&!isNaN(n.x)){if(h.position.adjust.cyAdjustToEleBB&&l.isNode()){var a=(h.position.my.toLowerCase(),h.position.at.toLowerCase()),s=i.zoom(),u=l.outerWidth()*s,c=l.outerHeight()*s;a.match("top")?n.y-=c/2:a.match("bottom")&&(n.y+=c/2),a.match("left")?n.x-=u/2:a.match("right")&&(n.x+=u/2),o(d.x)&&(n.x+=d.x),o(d.y)&&(n.y+=d.y)}p.set("position.adjust.x",e.left+n.x+window.pageXOffset),p.set("position.adjust.y",e.top+n.y+window.pageYOffset)}};f(),l.on(h.show.event,function(t){f(t),p.show()}),l.on(h.hide.event,function(t){p.hide()}),h.hide.cyViewport&&i.on("viewport",a(function(){p.hide()},s,{leading:!0})),h.position.adjust.cyViewport&&i.on("pan zoom",a(function(t){f(t),p.reposition()},s,{trailing:!0}))}),this)}),t("core","qtip",function(t){var e=this,i=e.container();if("api"===t)return this.scratch().qtip.api;var r=e.scratch(),o=r.qtip=r.qtip||{},l=n(e,t);o.$domEle.qtip(l);var u=o.api=o.$domEle.qtip("api");o.$domEle.removeData("qtip");var c=function(t){var e=i.getBoundingClientRect(),n=t.cyRenderedPosition;n&&null!=n.x&&!isNaN(n.x)&&(u.set("position.adjust.x",e.left+n.x+window.pageXOffset),u.set("position.adjust.y",e.top+n.y+window.pageYOffset))};return e.on(l.show.event,function(t){(!l.show.cyBgOnly||l.show.cyBgOnly&&t.cyTarget===e)&&(c(t),u.show())}),e.on(l.hide.event,function(t){(!l.hide.cyBgOnly||l.hide.cyBgOnly&&t.cyTarget===e)&&u.hide()}),l.hide.cyViewport&&e.on("viewport",a(function(){u.hide()},s,{leading:!0})),this})}var i=function(t){return null!=t&&"object"==typeof t},r=function(t){return null!=t&&"function"==typeof t},o=function(t){return null!=t&&"number"==typeof t},a=function(t,e,n){var o,a,s,l,u,c,h,d=0,p=!1,f=!0;if(r(t)){if(e=Math.max(0,e)||0,n===!0){var g=!0;f=!1}else i(n)&&(g=n.leading,p="maxWait"in n&&(Math.max(e,n.maxWait)||0),f="trailing"in n?n.trailing:f);var v=function(){var n=e-(Date.now()-l);if(n<=0){a&&clearTimeout(a);var i=h;a=c=h=void 0,i&&(d=Date.now(),s=t.apply(u,o),c||a||(o=u=null))}else c=setTimeout(v,n)},y=function(){c&&clearTimeout(c),a=c=h=void 0,(f||p!==e)&&(d=Date.now(),s=t.apply(u,o),c||a||(o=u=null))};return function(){if(o=arguments,l=Date.now(),u=this,h=f&&(c||!g),p===!1)var n=g&&!c;else{a||g||(d=l);var i=p-(l-d),r=i<=0;r?(a&&(a=clearTimeout(a)),d=l,s=t.apply(u,o)):a||(a=setTimeout(y,i))}return r&&c?c=clearTimeout(c):c||e===p||(c=setTimeout(v,e)),n&&(r=!0,s=t.apply(u,o)),!r||c||a||(o=u=null),s}}};"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof define&&define.amd&&define("cytoscape-qtip",function(){return n}),t&&e&&n(e,t)}("undefined"!=typeof jQuery?jQuery:null,"undefined"!=typeof cytoscape?cytoscape:null);